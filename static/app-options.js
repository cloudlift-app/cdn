!function(){function t(t){return t&&t.__esModule?t.default:t}function e(t,e,n,i,r,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(i,r)}function n(t){return function(){var n=this,i=arguments;return new Promise((function(r,o){var a=t.apply(n,i);function s(t){e(a,r,o,s,l,"next",t)}function l(t){e(a,r,o,s,l,"throw",t)}s(void 0)}))}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function o(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t){return s(t)}function c(t,e,n){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=l(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(n||t):r.value}})(t,e,n)}function u(t,e,n){return c(t,e,n)}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function d(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}function f(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),i.forEach((function(e){a(t,e,n[e])}))}return t}function h(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function v(t,e){return function(t){if(Array.isArray(t))return t}(t)||h(t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function m(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function g(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||h(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function y(t){return t&&t.constructor===Symbol?"symbol":typeof t}function _(t,e){return!e||"object"!==y(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function w(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=l(t);if(e){var r=l(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return _(this,n)}}var b,x,k=function(){"use strict";function t(){i(this,t)}return o(t,null,[{key:"merge",value:function(e,n,i){for(var r in n)!n.hasOwnProperty(r)||null!=i&&-1===i.indexOf(r)||("[object Object]"===Object.prototype.toString.call(n[r])?e[r]=t.merge(e[r],n[r]):void 0!==n[r]&&(e[r]=n[r]));return e}},{key:"extend",value:function(){for(var e={},n=function(n){for(var i in n)n.hasOwnProperty(i)&&("[object Object]"===Object.prototype.toString.call(n[i])?e[i]=t.extend(e[i],n[i]):void 0!==n[i]&&(e[i]=n[i]))},i=0;i<arguments.length;i++){var r=arguments[i];n(r)}return e}},{key:"isElement",value:function(t){return"object"==typeof t&&void 0!==t.nodeType}},{key:"isNodeList",value:function(e){var n=Object.prototype.toString.call(e),i="object"==typeof e&&/^\[object (HTMLCollection|NodeList|Object)\]$/.test(n)&&"number"==typeof e.length&&(0===e.length||"object"==typeof e[0]&&e[0].nodeType>0);return!i&&Array.isArray(e)&&e.length>0?t.isElement(e[0]):i}},{key:"isInPage",value:function(t){return t!==document.body&&document.body.contains(t)}},{key:"isHidden",value:function(t){return 0===t.offsetHeight||0===t.offsetWidth||null===t.offsetParent||"none"===window.getComputedStyle(t).display||1===t.offsetHeight&&1===t.offsetWidth}},{key:"isScrolledIntoView",value:function(t){var e=t.getBoundingClientRect(),n=e.top,i=e.bottom;return n>=0&&i<=window.innerHeight}},{key:"matches",value:function(t,e){return Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(t){for(var e=(this.document||this.ownerDocument).querySelectorAll(t),n=e.length;--n>=0&&e.item(n)!==this;);return n>-1}),t.matches(e)}},{key:"findParent",value:function(e,n){if("function"==typeof e.closest)return e.closest(n)||null;for(;e;){if(t.matches(e,n))return e;e=e.parentElement}return null}},{key:"findInnerDimensions",value:function(t){var e=getComputedStyle(t),n=t.clientWidth,i=t.clientHeight;return{height:i-=parseFloat(e.paddingTop)+parseFloat(e.paddingBottom),width:n-=parseFloat(e.paddingLeft)+parseFloat(e.paddingRight)}}},{key:"getCalculatedPosition",value:function(t){var e=document.body,n=document.documentElement,i=window.pageYOffset||n.scrollTop||e.scrollTop,r=window.pageXOffset||n.scrollLeft||e.scrollLeft,o=t.getBoundingClientRect();return{top:o.top+i,left:o.left+r,right:o.left+r+o.width,bottom:o.top+i+o.height}}},{key:"findElementContainsText",value:function(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document;return t.findElementContainsRegex(e,new RegExp(n),i)}},{key:"findElementContainsRegex",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document,i=n.querySelectorAll(t);return Array.prototype.filter.call(i,(function(t){return e.test(t.textContent)}))}},{key:"escapeRegex",value:function(t){return t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}},{key:"readCookie",value:function(t){t+="=";for(var e=document.cookie.split(/;\s*/),n=e.length-1;n>=0;n--)if(!e[n].indexOf(t))return e[n].replace(t,"")}},{key:"writeCookie",value:function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"/",r=new Date;r.setDate(r.getDate()+n);var o=null==n?"":"; expires="+r.toUTCString();document.cookie=encodeURIComponent(t)+"="+encodeURIComponent(e)+o+(i?"; path="+i:"")+";"}},{key:"removeCookie",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/";document.cookie=t+"=; Path="+e+"; Expires=Thu, 01 Jan 1970 00:00:01 GMT;"}},{key:"addStyleElement",value:function(t,e){e&&"head"!=e||(e=document.head||document.getElementsByTagName("head")[0]);var n=document.createElement("style");return n.appendChild(document.createTextNode(t)),e.appendChild(n),n}},{key:"objectKeys",value:function(t){if(!Object.keys){var e,n=[];for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&n.push(e);return n}return Object.keys(t)}},{key:"hasQueryParam",value:function(t,e){return-1!==t.indexOf(e)}},{key:"getQueryParam",value:function(t,e){var n=new RegExp("[?&]"+e+"=([^&#]*)","i").exec(t);return n?n[1]:null}},{key:"getQueryParams",value:function(t){var e={},n=document.createElement("a");n.href=t;for(var i=n.search.substring(1).split("&"),r=0;r<i.length;r++){var o=i[r].split("=");e[o[0]]=decodeURIComponent(o[1])}return e}},{key:"buildQueryParams",value:function(t){return Object.keys(t).map((function(e){return encodeURIComponent(e)+"="+encodeURIComponent(t[e])})).join("&")}},{key:"debounced",value:function(t,e){var n;return function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];n&&clearTimeout(n),n=setTimeout((function(){e.apply(void 0,g(r)),n=null}),t)}}},{key:"throttled",value:function(t,e){var n=0;return function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];var a=(new Date).getTime();if(!(a-n<t))return n=a,e.apply(void 0,g(r))}}},{key:"decodeHtml",value:function(t){var e=document.createElement("textarea");return e.innerHTML=t,e.value}},{key:"pathBaseName",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=t.split("/").pop();return e||(n=n.substring(0,n.lastIndexOf("."))),n}},{key:"getAgent",value:function(){return navigator.userAgent||navigator.vendor||window.opera}},{key:"isInApp",value:function(t){return t.indexOf("FBAN")>-1||t.indexOf("FBAV")>-1||t.indexOf("Instagram")>-1}},{key:"isFacebook",value:function(t){return t.indexOf("FBAN")>-1||t.indexOf("FBAV")>-1}},{key:"isInstagram",value:function(t){return t.indexOf("Instagram")>-1}},{key:"isIOS",value:function(t){return(t=t.toLowerCase()).indexOf("iphone")>-1||t.indexOf("ipad")>-1}},{key:"isAndroid",value:function(t){return(t=t.toLowerCase()).indexOf("android")>-1}},{key:"isMobile",value:function(t){return this.isAndroid(t)||this.isIOS(t)}}]),t}(),E=k,C=function(){"use strict";function t(e,n){i(this,t);if(!this.supports())throw"This browser is not supported";return this.settings=E.extend({method:"GET",username:null,password:null,data:{},queryParams:{},headers:{"Content-type":"application/x-www-form-urlencoded"},responseType:"text",timeout:null,withCredentials:!1,onProgress:null},n||{}),this.xhr(e)}return o(t,[{key:"supports",value:function(){return"XMLHttpRequest"in window&&"JSON"in window&&"Promise"in window}},{key:"parse",value:function(t){var e;if("text"!==this.settings.responseType&&""!==this.settings.responseType){var n=t.response;if("json"===this.settings.responseType&&"string"==typeof n)try{n=JSON.parse(n)}catch(t){}return{data:n,xhr:t}}try{e=JSON.parse(t.responseText)}catch(n){e=t.responseText}return{data:e,xhr:t}}},{key:"param",value:function(t){if("string"==typeof t||"[object FormData]"===Object.prototype.toString.call(t)||"[object File]"===Object.prototype.toString.call(t)||"[object Blob]"===Object.prototype.toString.call(t))return t;if(/application\/json/i.test(this.settings.headers["Content-type"])||"[object Array]"===Object.prototype.toString.call(t))return JSON.stringify(t);var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e.join("&")}},{key:"addQueryParams",value:function(t){if(this.settings.queryParams){var e=[];for(var n in this.settings.queryParams)this.settings.queryParams.hasOwnProperty(n)&&e.push(n+"="+this.settings.queryParams[n]);if(e.length>0){var i=e.join("&");return-1===t.indexOf("?")?t+"?"+i:t+"&"+i}}return t}},{key:"xhr",value:function(t){var e=this,n=new XMLHttpRequest,i=new Promise((function(i,r){var o=e;for(var a in n.onreadystatechange=function(){if(4===n.readyState){var t=o.parse(n);n.status>=200&&n.status<300?i(t):r(t)}},t=e.addQueryParams(t),n.open(e.settings.method,t,!0,e.settings.username,e.settings.password),n.responseType=e.settings.responseType,e.settings.headers)e.settings.headers.hasOwnProperty(a)&&n.setRequestHeader(a,e.settings.headers[a]);e.settings.timeout&&(n.timeout=e.settings.timeout,n.ontimeout=function(t){r({status:408,statusText:"Request timeout"})}),e.settings.withCredentials&&(n.withCredentials=!0),e.settings.onProgress&&(n.upload.onprogress=e.settings.onProgress),n.send(e.param(e.settings.data))}));return i.cancel=function(){n.abort()},i}}]),t}(),P={};b=void 0,x=function(){"use strict";var t=function(){},e="undefined",n=("undefined"==typeof window?"undefined":y(window))!==e&&y(window.navigator)!==e&&/Trident\/|MSIE /.test(window.navigator.userAgent),i=["trace","debug","info","warn","error"];function r(t,e){var n=t[e];if("function"==typeof n.bind)return n.bind(t);try{return Function.prototype.bind.call(n,t)}catch(e){return function(){return Function.prototype.apply.apply(n,[t,arguments])}}}function o(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function a(i){return"debug"===i&&(i="log"),("undefined"==typeof console?"undefined":y(console))!==e&&("trace"===i&&n?o:void 0!==console[i]?r(console,i):void 0!==console.log?r(console,"log"):t)}function s(e,n){for(var r=0;r<i.length;r++){var o=i[r];this[o]=r<e?t:this.methodFactory(o,e,n)}this.log=this.debug}function l(t,n,i){return function(){("undefined"==typeof console?"undefined":y(console))!==e&&(s.call(this,n,i),this[t].apply(this,arguments))}}function c(t,e,n){return a(t)||l.apply(this,arguments)}function u(t,n,r){var o,a=this,l="loglevel";function u(){var t;if(("undefined"==typeof window?"undefined":y(window))!==e&&l){try{t=window.localStorage[l]}catch(t){}if((void 0===t?"undefined":y(t))===e)try{var n=window.document.cookie,i=n.indexOf(encodeURIComponent(l)+"=");-1!==i&&(t=/^([^;]+)/.exec(n.slice(i))[1])}catch(t){}return void 0===a.levels[t]&&(t=void 0),t}}"string"==typeof t?l+=":"+t:"symbol"===(void 0===t?"undefined":y(t))&&(l=void 0),a.name=t,a.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},a.methodFactory=r||c,a.getLevel=function(){return o},a.setLevel=function(n,r){if("string"==typeof n&&void 0!==a.levels[n.toUpperCase()]&&(n=a.levels[n.toUpperCase()]),!("number"==typeof n&&n>=0&&n<=a.levels.SILENT))throw"log.setLevel() called with invalid level: "+n;if(o=n,!1!==r&&function(t){var n=(i[t]||"silent").toUpperCase();if(("undefined"==typeof window?"undefined":y(window))!==e&&l){try{return void(window.localStorage[l]=n)}catch(t){}try{window.document.cookie=encodeURIComponent(l)+"="+n+";"}catch(t){}}}(n),s.call(a,n,t),("undefined"==typeof console?"undefined":y(console))===e&&n<a.levels.SILENT)return"No console available for logging"},a.setDefaultLevel=function(t){u()||a.setLevel(t,!1)},a.enableAll=function(t){a.setLevel(a.levels.TRACE,t)},a.disableAll=function(t){a.setLevel(a.levels.SILENT,t)};var p=u();null==p&&(p=null==n?"WARN":n),a.setLevel(p,!1)}var p=new u,d={};p.getLogger=function(t){if("symbol"!==(void 0===t?"undefined":y(t))&&"string"!=typeof t||""===t)throw new TypeError("You must supply a name when creating a logger.");var e=d[t];return e||(e=d[t]=new u(t,p.getLevel(),p.methodFactory)),e};var f=("undefined"==typeof window?"undefined":y(window))!==e?window.log:void 0;return p.noConflict=function(){return("undefined"==typeof window?"undefined":y(window))!==e&&window.log===p&&(window.log=f),p},p.getLoggers=function(){return d},p.default=p,p},"function"==typeof define&&define.amd?define(x):P?P=x():b.log=x();var O=function(){"use strict";function t(){i(this,t)}return o(t,null,[{key:"get",value:function(e,n){var i=t.translations[e]||e;if(n)for(var r in n)n.hasOwnProperty(r)&&(i=i.replace(new RegExp("{"+r+"}","g"),n[r]));return i}},{key:"translate",value:function(e,n){if(e&&"string"==typeof e){if("#"===e.charAt(0))return t.get(e.substr(1).trim(),n);if(-1!==e.indexOf("#{")){for(var i=e;-1!==i.indexOf("#{");){var r=i.indexOf("#{"),o=i.indexOf("}"),a=i.substring(r+2,o),s=t.get(a,n);i=i.replace("#{"+a+"}",s)}return i}}return e}},{key:"fetch",value:function(e){var n=t.api.replace("{locale}",e),i=new C(n,{method:"GET"});return t.ready=i.then((function(e){return P.debug("[translate] "+n+" response",e.data),t.update(e.data),t.translations})).catch((function(e){return P.error("[translate] "+n+" error",e),t.translations})),t.ready}},{key:"update",value:function(e){t.translations=E.extend(t.translations,e),t.updated()}},{key:"updated",value:function(){var e=new CustomEvent(t.event,{detail:{},cancelable:!0,bubbles:!0});window.dispatchEvent(e)}},{key:"onUpdated",value:function(e){window.addEventListener(t.event,e)}}]),t}();O.locale=window.Shopify&&window.Shopify.locale?window.Shopify.locale:document.documentElement.lang,O.translations={},O.ready=Promise.resolve(!0),O.event="cloudlift.translate",O.api="";var S=O,T={};!function(){function t(t,e,n){return t.call.apply(t.bind,arguments)}function e(t,e,n){if(!t)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,i),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function n(i,r,o){return(n=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?t:e).apply(null,arguments)}var i=Date.now||function(){return+new Date};function r(t,e){this.a=t,this.o=e||t,this.c=this.o.document}var o=!!window.FontFace;function a(t,e,n,i){if(e=t.c.createElement(e),n)for(var r in n)n.hasOwnProperty(r)&&("style"==r?e.style.cssText=n[r]:e.setAttribute(r,n[r]));return i&&e.appendChild(t.c.createTextNode(i)),e}function s(t,e,n){(t=t.c.getElementsByTagName(e)[0])||(t=document.documentElement),t.insertBefore(n,t.lastChild)}function l(t){t.parentNode&&t.parentNode.removeChild(t)}function c(t,e,n){e=e||[],n=n||[];for(var i=t.className.split(/\s+/),r=0;r<e.length;r+=1){for(var o=!1,a=0;a<i.length;a+=1)if(e[r]===i[a]){o=!0;break}o||i.push(e[r])}for(e=[],r=0;r<i.length;r+=1){for(o=!1,a=0;a<n.length;a+=1)if(i[r]===n[a]){o=!0;break}o||e.push(i[r])}t.className=e.join(" ").replace(/\s+/g," ").replace(/^\s+|\s+$/,"")}function u(t,e){for(var n=t.className.split(/\s+/),i=0,r=n.length;i<r;i++)if(n[i]==e)return!0;return!1}function p(t,e,n){function i(){u&&r&&l&&(u(c),u=null)}e=a(t,"link",{rel:"stylesheet",href:e,media:"all"});var r=!1,l=!0,c=null,u=n||null;o?(e.onload=function(){r=!0,i()},e.onerror=function(){r=!0,c=Error("Stylesheet failed to load"),i()}):setTimeout((function(){r=!0,i()}),0),s(t,"head",e)}function d(t,e,n,i){var r=t.c.getElementsByTagName("head")[0];if(r){var o=a(t,"script",{src:e}),s=!1;return o.onload=o.onreadystatechange=function(){s||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(s=!0,n&&n(null),o.onload=o.onreadystatechange=null,"HEAD"==o.parentNode.tagName&&r.removeChild(o))},r.appendChild(o),setTimeout((function(){s||(s=!0,n&&n(Error("Script load timeout")))}),i||5e3),o}return null}function f(){this.a=0,this.c=null}function h(t){return t.a++,function(){t.a--,m(t)}}function v(t,e){t.c=e,m(t)}function m(t){0==t.a&&t.c&&(t.c(),t.c=null)}function g(t){this.a=t||"-"}function y(t,e){this.c=t,this.f=4,this.a="n";var n=(e||"n4").match(/^([nio])([1-9])$/i);n&&(this.a=n[1],this.f=parseInt(n[2],10))}function _(t){var e=[];t=t.split(/,\s*/);for(var n=0;n<t.length;n++){var i=t[n].replace(/['"]/g,"");-1!=i.indexOf(" ")||/^\d/.test(i)?e.push("'"+i+"'"):e.push(i)}return e.join(",")}function w(t){return t.a+t.f}function b(t){var e="normal";return"o"===t.a?e="oblique":"i"===t.a&&(e="italic"),e}function x(t){var e=4,n="n",i=null;return t&&((i=t.match(/(normal|oblique|italic)/i))&&i[1]&&(n=i[1].substr(0,1).toLowerCase()),(i=t.match(/([1-9]00|normal|bold)/i))&&i[1]&&(/bold/i.test(i[1])?e=7:/[1-9]00/.test(i[1])&&(e=parseInt(i[1].substr(0,1),10)))),n+e}function k(t,e){this.c=t,this.f=t.o.document.documentElement,this.h=e,this.a=new g("-"),this.j=!1!==e.events,this.g=!1!==e.classes}function E(t){if(t.g){var e=u(t.f,t.a.c("wf","active")),n=[],i=[t.a.c("wf","loading")];e||n.push(t.a.c("wf","inactive")),c(t.f,n,i)}C(t,"inactive")}function C(t,e,n){t.j&&t.h[e]&&(n?t.h[e](n.c,w(n)):t.h[e]())}function P(){this.c={}}function O(t,e){this.c=t,this.f=e,this.a=a(this.c,"span",{"aria-hidden":"true"},this.f)}function S(t){s(t.c,"body",t.a)}function L(t){return"display:block;position:absolute;top:-9999px;left:-9999px;font-size:300px;width:auto;height:auto;line-height:normal;margin:0;padding:0;font-variant:normal;white-space:nowrap;font-family:"+_(t.c)+";font-style:"+b(t)+";font-weight:"+t.f+"00;"}function I(t,e,n,i,r,o){this.g=t,this.j=e,this.a=i,this.c=n,this.f=r||3e3,this.h=o||void 0}function M(t,e,n,i,r,o,a){this.v=t,this.B=e,this.c=n,this.a=i,this.s=a||"BESbswy",this.f={},this.w=r||3e3,this.u=o||null,this.m=this.j=this.h=this.g=null,this.g=new O(this.c,this.s),this.h=new O(this.c,this.s),this.j=new O(this.c,this.s),this.m=new O(this.c,this.s),t=L(t=new y(this.a.c+",serif",w(this.a))),this.g.a.style.cssText=t,t=L(t=new y(this.a.c+",sans-serif",w(this.a))),this.h.a.style.cssText=t,t=L(t=new y("serif",w(this.a))),this.j.a.style.cssText=t,t=L(t=new y("sans-serif",w(this.a))),this.m.a.style.cssText=t,S(this.g),S(this.h),S(this.j),S(this.m)}g.prototype.c=function(t){for(var e=[],n=0;n<arguments.length;n++)e.push(arguments[n].replace(/[\W_]+/g,"").toLowerCase());return e.join(this.a)},I.prototype.start=function(){var t=this.c.o.document,e=this,n=i(),r=new Promise((function(r,o){!function a(){var s;i()-n>=e.f?o():t.fonts.load((s=e.a,b(s)+" "+s.f+"00 300px "+_(s.c)),e.h).then((function(t){1<=t.length?r():setTimeout(a,25)}),(function(){o()}))}()})),o=null,a=new Promise((function(t,n){o=setTimeout(n,e.f)}));Promise.race([a,r]).then((function(){o&&(clearTimeout(o),o=null),e.g(e.a)}),(function(){e.j(e.a)}))};var F={D:"serif",C:"sans-serif"},A=null;function R(){if(null===A){var t=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent);A=!!t&&(536>parseInt(t[1],10)||536===parseInt(t[1],10)&&11>=parseInt(t[2],10))}return A}function j(t,e,n){for(var i in F)if(F.hasOwnProperty(i)&&e===t.f[F[i]]&&n===t.f[F[i]])return!0;return!1}function D(t){var e,r=t.g.a.offsetWidth,o=t.h.a.offsetWidth;(e=r===t.f.serif&&o===t.f["sans-serif"])||(e=R()&&j(t,r,o)),e?i()-t.A>=t.w?R()&&j(t,r,o)&&(null===t.u||t.u.hasOwnProperty(t.a.c))?N(t,t.v):N(t,t.B):function(t){setTimeout(n((function(){D(this)}),t),50)}(t):N(t,t.v)}function N(t,e){setTimeout(n((function(){l(this.g.a),l(this.h.a),l(this.j.a),l(this.m.a),e(this.a)}),t),0)}function V(t,e,n){this.c=t,this.a=e,this.f=0,this.m=this.j=!1,this.s=n}M.prototype.start=function(){this.f.serif=this.j.a.offsetWidth,this.f["sans-serif"]=this.m.a.offsetWidth,this.A=i(),D(this)};var q=null;function B(t){0==--t.f&&t.j&&(t.m?((t=t.a).g&&c(t.f,[t.a.c("wf","active")],[t.a.c("wf","loading"),t.a.c("wf","inactive")]),C(t,"active")):E(t.a))}function H(t){this.j=t,this.a=new P,this.h=0,this.f=this.g=!0}function U(t,e,i,r,o){var a=0==--t.h;(t.f||t.g)&&setTimeout((function(){var t=o||null,s=r||{};if(0===i.length&&a)E(e.a);else{e.f+=i.length,a&&(e.j=a);var l,u=[];for(l=0;l<i.length;l++){var p=i[l],d=s[p.c],f=e.a,h=p;if(f.g&&c(f.f,[f.a.c("wf",h.c,w(h).toString(),"loading")]),C(f,"fontloading",h),f=null,null===q)if(window.FontFace){h=/Gecko.*Firefox\/(\d+)/.exec(window.navigator.userAgent);var v=/OS X.*Version\/10\..*Safari/.exec(window.navigator.userAgent)&&/Apple/.exec(window.navigator.vendor);q=h?42<parseInt(h[1],10):!v}else q=!1;f=q?new I(n(e.g,e),n(e.h,e),e.c,p,e.s,d):new M(n(e.g,e),n(e.h,e),e.c,p,e.s,t,d),u.push(f)}for(l=0;l<u.length;l++)u[l].start()}}),0)}function z(t,e){this.c=t,this.a=e}function W(t,e){this.c=t,this.a=e}function Y(t,e){this.c=t||X,this.a=[],this.f=[],this.g=e||""}V.prototype.g=function(t){var e=this.a;e.g&&c(e.f,[e.a.c("wf",t.c,w(t).toString(),"active")],[e.a.c("wf",t.c,w(t).toString(),"loading"),e.a.c("wf",t.c,w(t).toString(),"inactive")]),C(e,"fontactive",t),this.m=!0,B(this)},V.prototype.h=function(t){var e=this.a;if(e.g){var n=u(e.f,e.a.c("wf",t.c,w(t).toString(),"active")),i=[],r=[e.a.c("wf",t.c,w(t).toString(),"loading")];n||i.push(e.a.c("wf",t.c,w(t).toString(),"inactive")),c(e.f,i,r)}C(e,"fontinactive",t),B(this)},H.prototype.load=function(t){this.c=new r(this.j,t.context||this.j),this.g=!1!==t.events,this.f=!1!==t.classes,function(t,e,n){var i=[],r=n.timeout;!function(t){t.g&&c(t.f,[t.a.c("wf","loading")]),C(t,"loading")}(e);i=function(t,e,n){var i,r=[];for(i in e)if(e.hasOwnProperty(i)){var o=t.c[i];o&&r.push(o(e[i],n))}return r}(t.a,n,t.c);var o=new V(t.c,e,r);for(t.h=i.length,e=0,n=i.length;e<n;e++)i[e].load((function(e,n,i){U(t,o,e,n,i)}))}(this,new k(this.c,t),t)},z.prototype.load=function(t){function e(){if(o["__mti_fntLst"+i]){var n,r=o["__mti_fntLst"+i](),a=[];if(r)for(var s=0;s<r.length;s++){var l=r[s].fontfamily;null!=r[s].fontStyle&&null!=r[s].fontWeight?(n=r[s].fontStyle+r[s].fontWeight,a.push(new y(l,n))):a.push(new y(l))}t(a)}else setTimeout((function(){e()}),50)}var n=this,i=n.a.projectId,r=n.a.version;if(i){var o=n.c.o;d(this.c,(n.a.api||"https://fast.fonts.net/jsapi")+"/"+i+".js"+(r?"?v="+r:""),(function(r){r?t([]):(o["__MonotypeConfiguration__"+i]=function(){return n.a},e())})).id="__MonotypeAPIScript__"+i}else t([])},W.prototype.load=function(t){var e,n,i=this.a.urls||[],r=this.a.families||[],o=this.a.testStrings||{},a=new f;for(e=0,n=i.length;e<n;e++)p(this.c,i[e],h(a));var s=[];for(e=0,n=r.length;e<n;e++)if((i=r[e].split(":"))[1])for(var l=i[1].split(","),c=0;c<l.length;c+=1)s.push(new y(i[0],l[c]));else s.push(new y(i[0]));v(a,(function(){t(s,o)}))};var X="https://fonts.googleapis.com/css";function G(t){this.f=t,this.a=[],this.c={}}var $={latin:"BESbswy","latin-ext":"çöüğş",cyrillic:"йяЖ",greek:"αβΣ",khmer:"កខគ",Hanuman:"កខគ"},Q={thin:"1",extralight:"2","extra-light":"2",ultralight:"2","ultra-light":"2",light:"3",regular:"4",book:"4",medium:"5","semi-bold":"6",semibold:"6","demi-bold":"6",demibold:"6",bold:"7","extra-bold":"8",extrabold:"8","ultra-bold":"8",ultrabold:"8",black:"9",heavy:"9",l:"3",r:"4",b:"7"},J={i:"i",italic:"i",n:"n",normal:"n"},K=/^(thin|(?:(?:extra|ultra)-?)?light|regular|book|medium|(?:(?:semi|demi|extra|ultra)-?)?bold|black|heavy|l|r|b|[1-9]00)?(n|i|normal|italic)?$/;function Z(t,e){this.c=t,this.a=e}var tt={Arimo:!0,Cousine:!0,Tinos:!0};function et(t,e){this.c=t,this.a=e}function nt(t,e){this.c=t,this.f=e,this.a=[]}Z.prototype.load=function(t){var e=new f,n=this.c,i=new Y(this.a.api,this.a.text),r=this.a.families;!function(t,e){for(var n=e.length,i=0;i<n;i++){var r=e[i].split(":");3==r.length&&t.f.push(r.pop());var o="";2==r.length&&""!=r[1]&&(o=":"),t.a.push(r.join(o))}}(i,r);var o=new G(r);!function(t){for(var e=t.f.length,n=0;n<e;n++){var i=t.f[n].split(":"),r=i[0].replace(/\+/g," "),o=["n4"];if(2<=i.length){var a;if(a=[],s=i[1])for(var s,l=(s=s.split(",")).length,c=0;c<l;c++){var u;if((u=s[c]).match(/^[\w-]+$/))if(null==(p=K.exec(u.toLowerCase())))u="";else{if(u=null==(u=p[2])||""==u?"n":J[u],null==(p=p[1])||""==p)p="4";else var p=Q[p]||(isNaN(p)?"4":p.substr(0,1));u=[u,p].join("")}else u="";u&&a.push(u)}0<a.length&&(o=a),3==i.length&&(a=[],0<(i=(i=i[2])?i.split(","):a).length&&(i=$[i[0]])&&(t.c[r]=i))}for(t.c[r]||(i=$[r])&&(t.c[r]=i),i=0;i<o.length;i+=1)t.a.push(new y(r,o[i]))}}(o),p(n,function(t){if(0==t.a.length)throw Error("No fonts to load!");if(-1!=t.c.indexOf("kit="))return t.c;for(var e=t.a.length,n=[],i=0;i<e;i++)n.push(t.a[i].replace(/ /g,"+"));return e=t.c+"?family="+n.join("%7C"),0<t.f.length&&(e+="&subset="+t.f.join(",")),0<t.g.length&&(e+="&text="+encodeURIComponent(t.g)),e}(i),h(e)),v(e,(function(){t(o.a,o.c,tt)}))},et.prototype.load=function(t){var e=this.a.id,n=this.c.o;e?d(this.c,(this.a.api||"https://use.typekit.net")+"/"+e+".js",(function(e){if(e)t([]);else if(n.Typekit&&n.Typekit.config&&n.Typekit.config.fn){e=n.Typekit.config.fn;for(var i=[],r=0;r<e.length;r+=2)for(var o=e[r],a=e[r+1],s=0;s<a.length;s++)i.push(new y(o,a[s]));try{n.Typekit.load({events:!1,classes:!1,async:!0})}catch(t){}t(i)}}),2e3):t([])},nt.prototype.load=function(t){var e=this.f.id,n=this.c.o,i=this;e?(n.__webfontfontdeckmodule__||(n.__webfontfontdeckmodule__={}),n.__webfontfontdeckmodule__[e]=function(e,n){for(var r=0,o=n.fonts.length;r<o;++r){var a=n.fonts[r];i.a.push(new y(a.name,x("font-weight:"+a.weight+";font-style:"+a.style)))}t(i.a)},d(this.c,(this.f.api||"https://f.fontdeck.com/s/css/js/")+function(t){return t.o.location.hostname||t.a.location.hostname}(this.c)+"/"+e+".js",(function(e){e&&t([])}))):t([])};var it=new H(window);it.a.c.custom=function(t,e){return new W(e,t)},it.a.c.fontdeck=function(t,e){return new nt(e,t)},it.a.c.monotype=function(t,e){return new z(e,t)},it.a.c.typekit=function(t,e){return new et(e,t)},it.a.c.google=function(t,e){return new Z(e,t)};var rt={load:n(it.load,it)};"function"==typeof define&&define.amd?define((function(){return rt})):T?T=rt:(window.WebFont=rt,window.WebFontConfig&&it.load(window.WebFontConfig))}();var L=function(){"use strict";function t(){i(this,t)}return o(t,null,[{key:"getFont",value:function(t){var e=!0,n=!1,i=void 0;try{for(var r,o=this.fonts[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var a=r.value;if(a.name===t)return a}}catch(t){n=!0,i=t}finally{try{e||null==o.return||o.return()}finally{if(n)throw i}}}},{key:"addFvd",value:function(t,e){return e+=":n4",t.files.italic&&(e+=",i4"),t.files.bold&&(e+=",n7"),t.files.bold_italic&&(e+=",i7"),e}},{key:"addGoogleFontStyle",value:function(t,e){var n=[];if(t.files.regular&&(t.files.regular_300?n.push("300"):n.push("400")),t.files.italic&&(t.files.italic_300?n.push("300italic"):n.push("italic")),t.files.bold&&n.push("bold"),t.files.bold_italic&&n.push("bolditalic"),n.length)return e+":"+n.join(",")}},{key:"loadFontsByName",value:function(t){var e=this,n=[],i=[];return null==this._loadQueue&&(this._loadQueue=Promise.resolve()),this._loadQueue=this._loadQueue.then((function(){var r=!0,o=!1,a=void 0;try{for(var s,l=t[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var c=s.value,u=e.getFont(c);if(u&&!u.loaded)switch(u.type){case 0:u.loaded=!0;break;case 1:var p=e.addGoogleFontStyle(u,c);-1===i.indexOf(p)&&i.push(p);break;case 2:var d=e.addFvd(u,c);-1===n.indexOf(d)&&n.push(d)}}}catch(t){o=!0,a=t}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}return n.length>0||i.length>0?e.loadFontsByFamilies(n,i):Promise.resolve(!0)})),this._loadQueue}},{key:"loadFontsByFamilies",value:function(e,n){var i=this;return new Promise((function(r,o){var a={timeout:3e3};if(e&&e.length){var s=e.map((function(t){return t.substring(0,t.indexOf(":"))}));a.custom={families:e,urls:[i.fontCss(s)]}}n&&n.length&&(a.google={families:n}),a.active=function(){r()},a.inactive=function(){r()},a.fontactive=function(e,n){var i=t.getFont(e);i?i.loaded=!0:t.fonts.push({name:e,loaded:!0})},a.fontinactive=function(e,n){var i=t.getFont(e);P.warn("[live-options] failed to load font",i),i.loaded=!0},T.load(a)}))}},{key:"fontPreview",value:function(e){var n=E.extend(t.apiParams,{name:e});return t.api+"/preview?"+E.buildQueryParams(n)}},{key:"fontCss",value:function(e){var n=E.extend(t.apiParams,{names:e.join(",")});return t.api+"/css?"+E.buildQueryParams(n)}}]),t}();L.fonts=[],L.api="",L.apiParams={};var I=L,M=function(){"use strict";function t(e){i(this,t);this.settings=E.extend({api:"",path:{products:"/products/{handle}.{view}"}},e||{})}return o(t,[{key:"fakeProduct",value:function(t){this.isProduct=function(){return!0},this.getHandleFromUrl=function(){return t}}},{key:"isAdmin",value:function(){return null!=document.getElementById("admin_bar_iframe")}},{key:"isProduct",value:function(){return-1!==window.location.pathname.indexOf("/products/")||this.isProductPreview()}},{key:"isProductPreview",value:function(){return-1!==window.location.pathname.indexOf("/products_preview")}},{key:"getDiscountUrl",value:function(t,e){return"/discount/"+t+(e?"?redirect="+e:"")}},{key:"getDiscountCode",value:function(){return E.readCookie("discount_code")}},{key:"saveDiscountCode",value:function(t){return E.writeCookie("discount_code",t,null,"/")}},{key:"removeDiscountCode",value:function(){return E.removeCookie("discount_code")}},{key:"getHandleFromUrl",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:location.pathname,e=t.replace(/\/$/,"").split("/"),n=("products"==e[e.length-2]||"products_preview"===e.pop())&&e[e.length-1].replace(/(.*)?\?.*$/,"$1");return decodeURIComponent(n)}},{key:"tryGetProduct",value:function(){return this.isProduct()?this.getProduct():new Promise((function(t,e){t(null)}))}},{key:"tryGetProductMap",value:function(){return this.isProduct()?this.getProduct().then((function(e){return t.products})):new Promise((function(e,n){e(t.products)}))}},{key:"parseProductJsonElements",value:function(){var e=document.querySelectorAll('[id^="ProductJson-"]');if(0===e.length&&(e=document.querySelectorAll('[data-product-json], [data-section-type="dynamic-featured-product"]')),e.length>0)for(var n=0;n<e.length;n++){var i=e[n];try{var r=JSON.parse(i.innerHTML);"object"==typeof r.product&&(r=r.product),r.handle&&(t.products[r.handle+".js"]=this.convertProductJson(r))}catch(t){P.debug("error parsing ProductJson: ",i,t)}}}},{key:"convertProductJson",value:function(t){if(t.options&&t.options.length&&"object"!=typeof t.options[0]){for(var e=[],n=0;n<t.options.length;n++){for(var i={name:t.options[n],position:n+1,values:[]},r=0;r<t.variants.length;r++){var o=t.variants[r]["option"+i.position];o&&-1===i.values.indexOf(o)&&i.values.push(o)}e.push(i)}t.options=e}return t}},{key:"getProduct",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"js";if(!e){var i=function(e){if(t.products.hasOwnProperty(e))return{v:new Promise((function(n,i){n(t.products[e])}))}};if(!(e=this.getHandleFromUrl())&&this.isProductPreview())for(var r in t.products){var o=i(r);if("object"===y(o))return o.v}}var a,s=e+"."+n;if(t.products[s])return new Promise((function(e,n){e(t.products[s])}));e?a=this.settings.api+this.settings.path.products.replace("{handle}",e).replace("{view}",n):this.isProductPreview()&&(a=window.location.href.replace("products_preview","products_preview."+n));var l=new C(a,{method:"GET",responseType:"json"});return l.then((function(e){var i=e.data;return"json"===n&&(i=e.data.product),t.products[s]=i,i})).catch((function(t){throw t}))}},{key:"isTheme",value:function(t){if(window.Shopify&&window.Shopify.theme){var e=window.Shopify.theme.theme_store_id;if("Dawn"===t&&(887===e||1368===e||1363===e||1356===e||1431===e||1434===e))return!0;if("Expanse"===t&&902===e)return!0;if(window.Shopify.theme.name&&-1!==window.Shopify.theme.name.toLowerCase().indexOf(t.toLowerCase()))return!0}return!1}},{key:"onThemeSectionEvent",value:function(t,e){return document.addEventListener("shopify:section:"+t,e)}},{key:"findProductForms",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;return t.querySelectorAll('form[action*="/cart/add"]')}},{key:"findProductFormBestMatch",value:function(t,e){var n="#product_form_"+t,i=document.querySelector(n);if(!i){var r=null;if(e&&e.srcEl)for(var o=e.srcEl.parentNode;o;){if((r=this.findProductForms(o)).length){e.parentEl=o;break}o=o.parentNode}if(null!=r&&0!==r.length||(r=this.findProductForms()),1===r.length)return r[0];if(r.length>1)for(var a=0;a<r.length;a++){var s=(i=r[a]).getAttribute("id");if(!s||-1===s.indexOf("installment")&&-1===s.indexOf("instalment"))return i}}return i}},{key:"findProductFormVariantId",value:function(t){if(null!=t){var e=t.querySelector('[name=id], [name="id[]"]');if(null!=e&&e.value)return e.value}return null}},{key:"findProductFormQuantity",value:function(t){if(null!=t){var e=t.querySelector("[name=quantity]");if(null!=e&&e.value)return parseInt(e.value)}return 1}},{key:"findExpressPaymentButtons",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;return t.querySelectorAll('.shopify-payment-button, [data-shopify="payment-button"]')}},{key:"findExpressDynamicCheckoutCart",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;return t.querySelectorAll('#dynamic-checkout-cart, [data-shopify="dynamic-checkout-cart"]')}},{key:"onProductFormSubmit",value:function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:["[data-live-validate]","[data-live-cart-add]",".cl-cart-add"],r="[type=submit],.add_to_cart,.add-to-cart,.product-addToCart,.addToCart,.addtocart-js",o=t.querySelectorAll(i.join(","));if(o.length&&(n=!1),!n){t.addEventListener("submit",e);for(var a=t.querySelectorAll(r),s=0;s<a.length;s++){var l=a[s];l.addEventListener("click",e)}for(var c=a.length,u=this.findExpressPaymentButtons(t),p=0;p<u.length;p++){var d=u[p];d.addEventListener("click",e,{capture:!0})}for(var f=0;f<o.length;f++){var h=o[f];h.addEventListener("click",e,{capture:!0}),c=!0}return c||P.warn("[live-options] failed to find add to cart button"),c}var v=r+',.shopify-payment-button, [data-shopify="payment-button"]';t.addEventListener("click",(function(t){t.target&&(E.matches(t.target,v)||null!=E.findParent(t.target,v))&&e(t)}),{capture:!0})}},{key:"onCartFormSubmit",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:["[data-live-checkout]"],i='form[action="/cart"], form[action$="/cart"], form[action*="/cart?"], form[action="/checkout"], form[action$="/checkout"], form[action*="/checkout?"]';if(n.push('a[href="/checkout"], a[href$="/checkout"], a[href*="/checkout?"]'),e){document.addEventListener("submit",(function(e){e.target&&E.matches(e.target,i)&&t(e)}),{capture:!0});var r=n.join(",");document.addEventListener("click",(function(e){e.target&&(E.matches(e.target,r)||null!=E.findParent(e.target,r))&&t(e)}),{capture:!0})}else{var o=document.querySelectorAll(i);if(o.length)for(var a=0;a<o.length;a++){var s=o[a];s.addEventListener("submit",(function(e){t(e)}))}for(var l=document.querySelectorAll(n.join(",")),c=0;c<l.length;c++){var u=l[c];u.addEventListener("click",t,{capture:!0})}}}},{key:"trimMoneyFormatAmount",value:function(t){var e=t.indexOf("{"),n=t.lastIndexOf("}");return-1!==e&&-1!==n&&(t=t.substring(e,n+1)),t.trim()}},{key:"parseImageDimension",value:function(t){var e={x:0,y:0},n=/(\d*)x(\d*)/.exec(t);return n&&3===n.length&&(e.x=parseInt(n[1]),e.y=n[2]?parseInt(n[2]):e.x),e}},{key:"stripImageDimension",value:function(t){var e=(t=t.replace(/_(\d*)x(\d*)/g,"")).lastIndexOf("@");-1!==e&&(t=t.substring(0,e));var n=t.lastIndexOf(".progressive");return-1!==n&&(t=t.substring(0,n)),t}}],[{key:"getInstance",value:function(e){return t._instance||(t._instance=new t(e)),t._instance}}]),t}();M.products={},M.collections={};var F=M,A=function(){"use strict";function t(e){i(this,t);this.cache=null,this.settings=E.extend({api:"",requestOptions:{responseType:"json",headers:{"Content-type":"application/json"}}},e||{})}return o(t,[{key:"getCart",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this;return t&&this.cache?Promise.resolve(this.cache):this._cart().then((function(t){return e.cache=t,t}))}},{key:"getItemLine",value:function(t,e){for(var n=0;n<t.items.length;n++){var i=t.items[n];if(e.key===i.key)return n+1}return-1}},{key:"toItem",value:function(t,e,n){return{id:t,quantity:e,properties:n}}},{key:"addItem",value:function(t){return this._cartAdd(t)}},{key:"addItems",value:function(t){return this._cartAdd({items:t}).then((function(t){return t.items}))}},{key:"removeItem",value:function(t){return this.updateItem(t,this.toItem(null,0))}},{key:"removeItemById",value:function(t){return this.updateItemById(this.toItem(t,0))}},{key:"updateItem",value:function(t,e){return this._cartChange({line:t,quantity:e.quantity,properties:e.properties})}},{key:"updateItemById",value:function(t){return this._cartChange(t)}},{key:"updateItemQuantitiesById",value:function(t){return this._cartUpdate({updates:t})}},{key:"setNote",value:function(t){return this._cartUpdate({note:t})}},{key:"setAttributes",value:function(t){return this._cartUpdate({attributes:t})}},{key:"clear",value:function(){return this._cartClear()}},{key:"_cart",value:function(){return this._cartRequest("/cart.js",{method:"GET"})}},{key:"_cartAdd",value:function(t){return this._cartRequest("/cart/add.js",{method:"POST",data:t})}},{key:"_cartUpdate",value:function(t){return this._cartRequest("/cart/update.js",{method:"POST",data:t})}},{key:"_cartChange",value:function(t){return this._cartRequest("/cart/change.js",{method:"POST",data:t})}},{key:"_cartClear",value:function(){return this._cartRequest("/cart/clear.js",{method:"POST"})}},{key:"_cartRequest",value:function(t,e){var n=E.extend(this.settings.requestOptions,e),i=this.settings.api+t;return new C(i,n).then((function(t){return P.debug("[shopify-cart] "+i+" response",t.data),t.data})).catch((function(t){throw P.error("[shopify-cart] "+i+" error",t),t.data}))}}],[{key:"getInstance",value:function(e){return t._instance||(t._instance=new t(e)),t._instance}}]),t}(),R=A,j=function(){"use strict";function t(){i(this,t)}return o(t,null,[{key:"register",value:function(t){var e=this;return this.listeners.push(t),this.patched||this._patch(),function(){var n=e.listeners.indexOf(t);-1!==n&&e.listeners.splice(n,1),0===e.listeners.length&&e._unpatch()}}},{key:"_callListeners",value:function(e){for(var n=0;n<t.listeners.length;n++){(0,t.listeners[n])(e)}}},{key:"_patch",value:function(){t.originalOpen=XMLHttpRequest.prototype.open,XMLHttpRequest.prototype.open=function(){var e=arguments[0],n=arguments[1];this.addEventListener("readystatechange",(function(){4==this.readyState&&200==this.status&&t._callListeners({method:e,url:n})}),!1),t.originalOpen.apply(this,arguments)},"function"==typeof window.fetch&&(t.originalFetch=window.fetch,window.fetch=function(){var e=arguments[0],n=void 0!==arguments[1]?arguments[1].method:"GET",i=t.originalFetch.apply(this,arguments);return i.then((function(){t._callListeners({method:n,url:e})})),i}),this.patched=!0}},{key:"_unpatch",value:function(){t.originalOpen&&(XMLHttpRequest.prototype.open=t.originalOpen),t.originalFetch&&(window.fetch=t.originalFetch),this.patched=!1}}]),t}();j.patched=!1,j.listeners=[];var D=j,N=new WeakMap,V=function(t){return function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];var r=t.apply(void 0,g(n));return N.set(r,!0),r}},q=function(t){return"function"==typeof t&&N.has(t)},B="undefined"!=typeof window&&null!=window.customElements&&void 0!==window.customElements.polyfillWrapFlushCallback,H=function(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;e!==n;){var r=e.nextSibling;t.insertBefore(e,i),e=r}},U=function(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e!==n;){var i=e.nextSibling;t.removeChild(e),e=i}},z={},W={},Y="{{lit-".concat(String(Math.random()).slice(2),"}}"),X="\x3c!--".concat(Y,"--\x3e"),G=new RegExp("".concat(Y,"|").concat(X)),$="$lit$",Q=function t(e,n){"use strict";i(this,t),this.parts=[],this.element=n;for(var r=[],o=[],a=document.createTreeWalker(n.content,133,null,!1),s=0,l=-1,c=0,u=e.strings,p=e.values.length;c<p;){var d=a.nextNode();if(null!==d){if(l++,1===d.nodeType){if(d.hasAttributes()){for(var f=d.attributes,h=f.length,v=0,m=0;m<h;m++)J(f[m].name,$)&&v++;for(;v-- >0;){var g=u[c],y=tt.exec(g)[2],_=y.toLowerCase()+$,w=d.getAttribute(_);d.removeAttribute(_);var b=w.split(G);this.parts.push({type:"attribute",index:l,name:y,strings:b}),c+=b.length-1}}"TEMPLATE"===d.tagName&&(o.push(d),a.currentNode=d.content)}else if(3===d.nodeType){var x=d.data;if(x.indexOf(Y)>=0){for(var k=d.parentNode,E=x.split(G),C=E.length-1,P=0;P<C;P++){var O=void 0,S=E[P];if(""===S)O=Z();else{var T=tt.exec(S);null!==T&&J(T[2],$)&&(S=S.slice(0,T.index)+T[1]+T[2].slice(0,-$.length)+T[3]),O=document.createTextNode(S)}k.insertBefore(O,d),this.parts.push({type:"node",index:++l})}""===E[C]?(k.insertBefore(Z(),d),r.push(d)):d.data=E[C],c+=C}}else if(8===d.nodeType)if(d.data===Y){var L=d.parentNode;null!==d.previousSibling&&l!==s||(l++,L.insertBefore(Z(),d)),s=l,this.parts.push({type:"node",index:l}),null===d.nextSibling?d.data="":(r.push(d),l--),c++}else for(var I=-1;-1!==(I=d.data.indexOf(Y,I+1));)this.parts.push({type:"node",index:-1}),c++}else a.currentNode=o.pop()}var M=!0,F=!1,A=void 0;try{for(var R,j=r[Symbol.iterator]();!(M=(R=j.next()).done);M=!0){var D=R.value;D.parentNode.removeChild(D)}}catch(t){F=!0,A=t}finally{try{M||null==j.return||j.return()}finally{if(F)throw A}}},J=function(t,e){var n=t.length-e.length;return n>=0&&t.slice(n)===e},K=function(t){return-1!==t.index},Z=function(){return document.createComment("")},tt=/([ \x09\x0a\x0c\x0d])([^\0-\x1F\x7F-\x9F "'>=/]+)([ \x09\x0a\x0c\x0d]*=[ \x09\x0a\x0c\x0d]*(?:[^ \x09\x0a\x0c\x0d"'`<>=]*|"[^"]*|'[^']*))$/,et=function(){"use strict";function t(e,n,r){i(this,t),this.__parts=[],this.template=e,this.processor=n,this.options=r}return o(t,[{key:"update",value:function(t){var e=0,n=!0,i=!1,r=void 0;try{for(var o,a=this.__parts[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;void 0!==s&&s.setValue(t[e]),e++}}catch(t){i=!0,r=t}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}var l=!0,c=!1,u=void 0;try{for(var p,d=this.__parts[Symbol.iterator]();!(l=(p=d.next()).done);l=!0){var f=p.value;void 0!==f&&f.commit()}}catch(t){c=!0,u=t}finally{try{l||null==d.return||d.return()}finally{if(c)throw u}}}},{key:"_clone",value:function(){for(var t,e=B?this.template.element.content.cloneNode(!0):document.importNode(this.template.element.content,!0),n=[],i=this.template.parts,r=document.createTreeWalker(e,133,null,!1),o=0,a=0,s=r.nextNode();o<i.length;){var l;if(t=i[o],K(t)){for(;a<t.index;)a++,"TEMPLATE"===s.nodeName&&(n.push(s),r.currentNode=s.content),null===(s=r.nextNode())&&(r.currentNode=n.pop(),s=r.nextNode());if("node"===t.type){var c=this.processor.handleTextExpression(this.options);c.insertAfterNode(s.previousSibling),this.__parts.push(c)}else(l=this.__parts).push.apply(l,g(this.processor.handleAttributeExpressions(s,t.name,t.strings,this.options)));o++}else this.__parts.push(void 0),o++}return B&&(document.adoptNode(e),customElements.upgrade(e)),e}}]),t}(),nt=window.trustedTypes&&trustedTypes.createPolicy("lit-html",{createHTML:function(t){return t}}),it=" ".concat(Y," "),rt=function(){"use strict";function t(e,n,r,o){i(this,t),this.strings=e,this.values=n,this.type=r,this.processor=o}return o(t,[{key:"getHTML",value:function(){for(var t=this.strings.length-1,e="",n=!1,i=0;i<t;i++){var r=this.strings[i],o=r.lastIndexOf("\x3c!--");n=(o>-1||n)&&-1===r.indexOf("--\x3e",o+1);var a=tt.exec(r);e+=null===a?r+(n?it:X):r.substr(0,a.index)+a[1]+a[2]+$+a[3]+Y}return e+=this.strings[t]}},{key:"getTemplateElement",value:function(){var t=document.createElement("template"),e=this.getHTML();return void 0!==nt&&(e=nt.createHTML(e)),t.innerHTML=e,t}}]),t}(),ot=function(t){return null===t||!("object"==typeof t||"function"==typeof t)},at=function(t){return Array.isArray(t)||!(!t||!t[Symbol.iterator])},st=function(){"use strict";function t(e,n,r){i(this,t),this.dirty=!0,this.element=e,this.name=n,this.strings=r,this.parts=[];for(var o=0;o<r.length-1;o++)this.parts[o]=this._createPart()}return o(t,[{key:"_createPart",value:function(){return new lt(this)}},{key:"_getValue",value:function(){var t=this.strings,e=t.length-1,n=this.parts;if(1===e&&""===t[0]&&""===t[1]){var i=n[0].value;if("symbol"===(void 0===i?"undefined":y(i)))return String(i);if("string"==typeof i||!at(i))return i}for(var r="",o=0;o<e;o++){r+=t[o];var a=n[o];if(void 0!==a){var s=a.value,l=!0,c=!1,u=void 0;if(ot(s)||!at(s))r+="string"==typeof s?s:String(s);else try{for(var p,d=s[Symbol.iterator]();!(l=(p=d.next()).done);l=!0){var f=p.value;r+="string"==typeof f?f:String(f)}}catch(t){c=!0,u=t}finally{try{l||null==d.return||d.return()}finally{if(c)throw u}}}}return r+=t[e]}},{key:"commit",value:function(){this.dirty&&(this.dirty=!1,this.element.setAttribute(this.name,this._getValue()))}}]),t}(),lt=function(){"use strict";function t(e){i(this,t),this.value=void 0,this.committer=e}return o(t,[{key:"setValue",value:function(t){t===z||ot(t)&&t===this.value||(this.value=t,q(t)||(this.committer.dirty=!0))}},{key:"commit",value:function(){for(;q(this.value);){var t=this.value;this.value=z,t(this)}this.value!==z&&this.committer.commit()}}]),t}(),ct=function(){"use strict";function t(e){i(this,t),this.value=void 0,this.__pendingValue=void 0,this.options=e}return o(t,[{key:"appendInto",value:function(t){this.startNode=t.appendChild(Z()),this.endNode=t.appendChild(Z())}},{key:"insertAfterNode",value:function(t){this.startNode=t,this.endNode=t.nextSibling}},{key:"appendIntoPart",value:function(t){t.__insert(this.startNode=Z()),t.__insert(this.endNode=Z())}},{key:"insertAfterPart",value:function(t){t.__insert(this.startNode=Z()),this.endNode=t.endNode,t.endNode=this.startNode}},{key:"setValue",value:function(t){this.__pendingValue=t}},{key:"commit",value:function(){if(null!==this.startNode.parentNode){for(;q(this.__pendingValue);){var t=this.__pendingValue;this.__pendingValue=z,t(this)}var e=this.__pendingValue;e!==z&&(ot(e)?e!==this.value&&this.__commitText(e):e instanceof rt?this.__commitTemplateResult(e):e instanceof Node?this.__commitNode(e):at(e)?this.__commitIterable(e):e===W?(this.value=W,this.clear()):this.__commitText(e))}}},{key:"__insert",value:function(t){this.endNode.parentNode.insertBefore(t,this.endNode)}},{key:"__commitNode",value:function(t){this.value!==t&&(this.clear(),this.__insert(t),this.value=t)}},{key:"__commitText",value:function(t){var e=this.startNode.nextSibling,n="string"==typeof(t=null==t?"":t)?t:String(t);e===this.endNode.previousSibling&&3===e.nodeType?e.data=n:this.__commitNode(document.createTextNode(n)),this.value=t}},{key:"__commitTemplateResult",value:function(t){var e=this.options.templateFactory(t);if(this.value instanceof et&&this.value.template===e)this.value.update(t.values);else{var n=new et(e,t.processor,this.options),i=n._clone();n.update(t.values),this.__commitNode(i),this.value=n}}},{key:"__commitIterable",value:function(e){Array.isArray(this.value)||(this.value=[],this.clear());var n,i=this.value,r=0,o=!0,a=!1,s=void 0;try{for(var l,c=e[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){var u=l.value;void 0===(n=i[r])&&(n=new t(this.options),i.push(n),0===r?n.appendIntoPart(this):n.insertAfterPart(i[r-1])),n.setValue(u),n.commit(),r++}}catch(t){a=!0,s=t}finally{try{o||null==c.return||c.return()}finally{if(a)throw s}}r<i.length&&(i.length=r,this.clear(n&&n.endNode))}},{key:"clear",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.startNode;U(this.startNode.parentNode,t.nextSibling,this.endNode)}}]),t}(),ut=function(){"use strict";function t(e,n,r){if(i(this,t),this.value=void 0,this.__pendingValue=void 0,2!==r.length||""!==r[0]||""!==r[1])throw new Error("Boolean attributes can only contain a single expression");this.element=e,this.name=n,this.strings=r}return o(t,[{key:"setValue",value:function(t){this.__pendingValue=t}},{key:"commit",value:function(){for(;q(this.__pendingValue);){var t=this.__pendingValue;this.__pendingValue=z,t(this)}if(this.__pendingValue!==z){var e=!!this.__pendingValue;this.value!==e&&(e?this.element.setAttribute(this.name,""):this.element.removeAttribute(this.name),this.value=e),this.__pendingValue=z}}}]),t}(),pt=function(t){"use strict";d(n,t);var e=w(n);function n(t,r,o){var a;return i(this,n),(a=e.call(this,t,r,o)).single=2===o.length&&""===o[0]&&""===o[1],a}return o(n,[{key:"_createPart",value:function(){return new dt(this)}},{key:"_getValue",value:function(){return this.single?this.parts[0].value:u(l(n.prototype),"_getValue",this).call(this)}},{key:"commit",value:function(){this.dirty&&(this.dirty=!1,this.element[this.name]=this._getValue())}}]),n}(st),dt=function(t){"use strict";d(n,t);var e=w(n);function n(){return i(this,n),e.apply(this,arguments)}return n}(lt),ft=!1;
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */!function(){try{var t={get capture(){return ft=!0,!1}};window.addEventListener("test",t,t),window.removeEventListener("test",t,t)}catch(t){}}();var ht=function(){"use strict";function t(e,n,r){var o=this;i(this,t),this.value=void 0,this.__pendingValue=void 0,this.element=e,this.eventName=n,this.eventContext=r,this.__boundHandleEvent=function(t){return o.handleEvent(t)}}return o(t,[{key:"setValue",value:function(t){this.__pendingValue=t}},{key:"commit",value:function(){for(;q(this.__pendingValue);){var t=this.__pendingValue;this.__pendingValue=z,t(this)}if(this.__pendingValue!==z){var e=this.__pendingValue,n=this.value,i=null==e||null!=n&&(e.capture!==n.capture||e.once!==n.once||e.passive!==n.passive),r=null!=e&&(null==n||i);i&&this.element.removeEventListener(this.eventName,this.__boundHandleEvent,this.__options),r&&(this.__options=vt(e),this.element.addEventListener(this.eventName,this.__boundHandleEvent,this.__options)),this.value=e,this.__pendingValue=z}}},{key:"handleEvent",value:function(t){"function"==typeof this.value?this.value.call(this.eventContext||this.element,t):this.value.handleEvent(t)}}]),t}(),vt=function(t){return t&&(ft?{capture:t.capture,passive:t.passive,once:t.once}:t.capture)},mt=new(function(){"use strict";function t(){i(this,t)}return o(t,[{key:"handleAttributeExpressions",value:function(t,e,n,i){var r=e[0];return"."===r?new pt(t,e.slice(1),n).parts:"@"===r?[new ht(t,e.slice(1),i.eventContext)]:"?"===r?[new ut(t,e.slice(1),n)]:new st(t,e,n).parts}},{key:"handleTextExpression",value:function(t){return new ct(t)}}]),t}());function gt(t){var e=yt.get(t.type);void 0===e&&(e={stringsArray:new WeakMap,keyString:new Map},yt.set(t.type,e));var n=e.stringsArray.get(t.strings);if(void 0!==n)return n;var i=t.strings.join(Y);return void 0===(n=e.keyString.get(i))&&(n=new Q(t,t.getTemplateElement()),e.keyString.set(i,n)),e.stringsArray.set(t.strings,n),n}var yt=new Map,_t=new WeakMap,wt=function(t,e,n){var i=_t.get(e);void 0===i&&(U(e,e.firstChild),_t.set(e,i=new ct(Object.assign({templateFactory:gt},n))),i.appendInto(e)),i.setValue(t),i.commit()};"undefined"!=typeof window&&(window.litHtmlVersions||(window.litHtmlVersions=[])).push("1.3.0");var bt=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return new rt(t,n,"html",mt)};function xt(t){var e=t.getBoundingClientRect();return{width:e.width,height:e.height,top:e.top,right:e.right,bottom:e.bottom,left:e.left,x:e.left,y:e.top}}function kt(t){if("[object Window]"!==t.toString()){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function Et(t){var e=kt(t);return{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function Ct(t){return t instanceof kt(t).Element||t instanceof Element}function Pt(t){return t instanceof kt(t).HTMLElement||t instanceof HTMLElement}function Ot(t){return t?(t.nodeName||"").toLowerCase():null}function St(t){return((Ct(t)?t.ownerDocument:t.document)||window.document).documentElement}function Tt(t){return xt(St(t)).left+Et(t).scrollLeft}function Lt(t){return kt(t).getComputedStyle(t)}function It(t){var e=Lt(t),n=e.overflow,i=e.overflowX,r=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+r+i)}function Mt(t,e,n){void 0===n&&(n=!1);var i,r,o=St(e),a=xt(t),s=Pt(e),l={scrollLeft:0,scrollTop:0},c={x:0,y:0};return(s||!s&&!n)&&(("body"!==Ot(e)||It(o))&&(l=(i=e)!==kt(i)&&Pt(i)?{scrollLeft:(r=i).scrollLeft,scrollTop:r.scrollTop}:Et(i)),Pt(e)?((c=xt(e)).x+=e.clientLeft,c.y+=e.clientTop):o&&(c.x=Tt(o))),{x:a.left+l.scrollLeft-c.x,y:a.top+l.scrollTop-c.y,width:a.width,height:a.height}}function Ft(t){return{x:t.offsetLeft,y:t.offsetTop,width:t.offsetWidth,height:t.offsetHeight}}function At(t){return"html"===Ot(t)?t:t.assignedSlot||t.parentNode||t.host||St(t)}function Rt(t){return["html","body","#document"].indexOf(Ot(t))>=0?t.ownerDocument.body:Pt(t)&&It(t)?t:Rt(At(t))}function jt(t,e){void 0===e&&(e=[]);var n=Rt(t),i="body"===Ot(n),r=kt(n),o=i?[r].concat(r.visualViewport||[],It(n)?n:[]):n,a=e.concat(o);return i?a:a.concat(jt(At(o)))}function Dt(t){return["table","td","th"].indexOf(Ot(t))>=0}function Nt(t){if(!Pt(t)||"fixed"===Lt(t).position)return null;var e=t.offsetParent;if(e){var n=St(e);if("body"===Ot(e)&&"static"===Lt(e).position&&"static"!==Lt(n).position)return n}return e}function Vt(t){for(var e=kt(t),n=Nt(t);n&&Dt(n)&&"static"===Lt(n).position;)n=Nt(n);return n&&"body"===Ot(n)&&"static"===Lt(n).position?e:n||function(t){for(var e=At(t);Pt(e)&&["html","body"].indexOf(Ot(e))<0;){var n=Lt(e);if("none"!==n.transform||"none"!==n.perspective||n.willChange&&"auto"!==n.willChange)return e;e=e.parentNode}return null}(t)||e}var qt="top",Bt="bottom",Ht="right",Ut="left",zt="auto",Wt=[qt,Bt,Ht,Ut],Yt="start",Xt="end",Gt="viewport",$t="popper",Qt=Wt.reduce((function(t,e){return t.concat([e+"-"+Yt,e+"-"+Xt])}),[]),Jt=[].concat(Wt,[zt]).reduce((function(t,e){return t.concat([e,e+"-"+Yt,e+"-"+Xt])}),[]),Kt=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function Zt(t){var e=new Map,n=new Set,i=[];function r(t){n.add(t.name),[].concat(t.requires||[],t.requiresIfExists||[]).forEach((function(t){if(!n.has(t)){var i=e.get(t);i&&r(i)}})),i.push(t)}return t.forEach((function(t){e.set(t.name,t)})),t.forEach((function(t){n.has(t.name)||r(t)})),i}var te={placement:"bottom",modifiers:[],strategy:"absolute"};function ee(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some((function(t){return!(t&&"function"==typeof t.getBoundingClientRect)}))}function ne(t){void 0===t&&(t={});var e=t,n=e.defaultModifiers,i=void 0===n?[]:n,r=e.defaultOptions,o=void 0===r?te:r;return function(t,e,n){void 0===n&&(n=o);var r,a,s={placement:"bottom",orderedModifiers:[],options:Object.assign(Object.assign({},te),o),modifiersData:{},elements:{reference:t,popper:e},attributes:{},styles:{}},l=[],c=!1,u={state:s,setOptions:function(n){p(),s.options=Object.assign(Object.assign(Object.assign({},o),s.options),n),s.scrollParents={reference:Ct(t)?jt(t):t.contextElement?jt(t.contextElement):[],popper:jt(e)};var r=function(t){var e=Zt(t);return Kt.reduce((function(t,n){return t.concat(e.filter((function(t){return t.phase===n})))}),[])}(function(t){var e=t.reduce((function(t,e){var n=t[e.name];return t[e.name]=n?Object.assign(Object.assign(Object.assign({},n),e),{},{options:Object.assign(Object.assign({},n.options),e.options),data:Object.assign(Object.assign({},n.data),e.data)}):e,t}),{});return Object.keys(e).map((function(t){return e[t]}))}([].concat(i,s.options.modifiers)));return s.orderedModifiers=r.filter((function(t){return t.enabled})),s.orderedModifiers.forEach((function(t){var e=t.name,n=t.options,i=void 0===n?{}:n,r=t.effect;if("function"==typeof r){var o=r({state:s,name:e,instance:u,options:i}),a=function(){};l.push(o||a)}})),u.update()},forceUpdate:function(){if(!c){var t=s.elements,e=t.reference,n=t.popper;if(ee(e,n)){s.rects={reference:Mt(e,Vt(n),"fixed"===s.options.strategy),popper:Ft(n)},s.reset=!1,s.placement=s.options.placement,s.orderedModifiers.forEach((function(t){return s.modifiersData[t.name]=Object.assign({},t.data)}));for(var i=0;i<s.orderedModifiers.length;i++)if(!0!==s.reset){var r=s.orderedModifiers[i],o=r.fn,a=r.options,l=void 0===a?{}:a,p=r.name;"function"==typeof o&&(s=o({state:s,options:l,name:p,instance:u})||s)}else s.reset=!1,i=-1}}},update:(r=function(){return new Promise((function(t){u.forceUpdate(),t(s)}))},function(){return a||(a=new Promise((function(t){Promise.resolve().then((function(){a=void 0,t(r())}))}))),a}),destroy:function(){p(),c=!0}};if(!ee(t,e))return u;function p(){l.forEach((function(t){return t()})),l=[]}return u.setOptions(n).then((function(t){!c&&n.onFirstUpdate&&n.onFirstUpdate(t)})),u}}var ie={passive:!0};function re(t){return t.split("-")[0]}function oe(t){return t.split("-")[1]}function ae(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function se(t){var e,n=t.reference,i=t.element,r=t.placement,o=r?re(r):null,a=r?oe(r):null,s=n.x+n.width/2-i.width/2,l=n.y+n.height/2-i.height/2;switch(o){case qt:e={x:s,y:n.y-i.height};break;case Bt:e={x:s,y:n.y+n.height};break;case Ht:e={x:n.x+n.width,y:l};break;case Ut:e={x:n.x-i.width,y:l};break;default:e={x:n.x,y:n.y}}var c=o?ae(o):null;if(null!=c){var u="y"===c?"height":"width";switch(a){case Yt:e[c]=e[c]-(n[u]/2-i[u]/2);break;case Xt:e[c]=e[c]+(n[u]/2-i[u]/2)}}return e}var le={top:"auto",right:"auto",bottom:"auto",left:"auto"};function ce(t){var e,n=t.popper,i=t.popperRect,r=t.placement,o=t.offsets,a=t.position,s=t.gpuAcceleration,l=t.adaptive,c=t.roundOffsets?function(t){var e=t.x,n=t.y,i=window.devicePixelRatio||1;return{x:Math.round(e*i)/i||0,y:Math.round(n*i)/i||0}}(o):o,u=c.x,p=void 0===u?0:u,d=c.y,f=void 0===d?0:d,h=o.hasOwnProperty("x"),v=o.hasOwnProperty("y"),m=Ut,g=qt,y=window;if(l){var _=Vt(n);_===kt(n)&&(_=St(n)),r===qt&&(g=Bt,f-=_.clientHeight-i.height,f*=s?1:-1),r===Ut&&(m=Ht,p-=_.clientWidth-i.width,p*=s?1:-1)}var w,b=Object.assign({position:a},l&&le);return s?Object.assign(Object.assign({},b),{},((w={})[g]=v?"0":"",w[m]=h?"0":"",w.transform=(y.devicePixelRatio||1)<2?"translate("+p+"px, "+f+"px)":"translate3d("+p+"px, "+f+"px, 0)",w)):Object.assign(Object.assign({},b),{},((e={})[g]=v?f+"px":"",e[m]=h?p+"px":"",e.transform="",e))}var ue={left:"right",right:"left",bottom:"top",top:"bottom"};function pe(t){return t.replace(/left|right|bottom|top/g,(function(t){return ue[t]}))}var de={start:"end",end:"start"};function fe(t){return t.replace(/start|end/g,(function(t){return de[t]}))}function he(t,e){var n,i=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(i&&((n=i)instanceof kt(n).ShadowRoot||n instanceof ShadowRoot)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function ve(t){return Object.assign(Object.assign({},t),{},{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function me(t,e){return e===Gt?ve(function(t){var e=kt(t),n=St(t),i=e.visualViewport,r=n.clientWidth,o=n.clientHeight,a=0,s=0;return i&&(r=i.width,o=i.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(a=i.offsetLeft,s=i.offsetTop)),{width:r,height:o,x:a+Tt(t),y:s}}(t)):Pt(e)?function(t){var e=xt(t);return e.top=e.top+t.clientTop,e.left=e.left+t.clientLeft,e.bottom=e.top+t.clientHeight,e.right=e.left+t.clientWidth,e.width=t.clientWidth,e.height=t.clientHeight,e.x=e.left,e.y=e.top,e}(e):ve(function(t){var e=St(t),n=Et(t),i=t.ownerDocument.body,r=Math.max(e.scrollWidth,e.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),o=Math.max(e.scrollHeight,e.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),a=-n.scrollLeft+Tt(t),s=-n.scrollTop;return"rtl"===Lt(i||e).direction&&(a+=Math.max(e.clientWidth,i?i.clientWidth:0)-r),{width:r,height:o,x:a,y:s}}(St(t)))}function ge(t,e,n){var i="clippingParents"===e?function(t){var e=jt(At(t)),n=["absolute","fixed"].indexOf(Lt(t).position)>=0&&Pt(t)?Vt(t):t;return Ct(n)?e.filter((function(t){return Ct(t)&&he(t,n)&&"body"!==Ot(t)})):[]}(t):[].concat(e),r=[].concat(i,[n]),o=r[0],a=r.reduce((function(e,n){var i=me(t,n);return e.top=Math.max(i.top,e.top),e.right=Math.min(i.right,e.right),e.bottom=Math.min(i.bottom,e.bottom),e.left=Math.max(i.left,e.left),e}),me(t,o));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function ye(t){return Object.assign(Object.assign({},{top:0,right:0,bottom:0,left:0}),t)}function _e(t,e){return e.reduce((function(e,n){return e[n]=t,e}),{})}function we(t,e){void 0===e&&(e={});var n=e,i=n.placement,r=void 0===i?t.placement:i,o=n.boundary,a=void 0===o?"clippingParents":o,s=n.rootBoundary,l=void 0===s?Gt:s,c=n.elementContext,u=void 0===c?$t:c,p=n.altBoundary,d=void 0!==p&&p,f=n.padding,h=void 0===f?0:f,v=ye("number"!=typeof h?h:_e(h,Wt)),m=u===$t?"reference":$t,g=t.elements.reference,y=t.rects.popper,_=t.elements[d?m:u],w=ge(Ct(_)?_:_.contextElement||St(t.elements.popper),a,l),b=xt(g),x=se({reference:b,element:y,strategy:"absolute",placement:r}),k=ve(Object.assign(Object.assign({},y),x)),E=u===$t?k:b,C={top:w.top-E.top+v.top,bottom:E.bottom-w.bottom+v.bottom,left:w.left-E.left+v.left,right:E.right-w.right+v.right},P=t.modifiersData.offset;if(u===$t&&P){var O=P[r];Object.keys(C).forEach((function(t){var e=[Ht,Bt].indexOf(t)>=0?1:-1,n=[qt,Bt].indexOf(t)>=0?"y":"x";C[t]+=O[n]*e}))}return C}function be(t,e,n){return Math.max(t,Math.min(e,n))}function xe(t,e,n){return void 0===n&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function ke(t){return[qt,Ht,Bt,Ut].some((function(e){return t[e]>=0}))}var Ee=ne({defaultModifiers:[{name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(t){var e=t.state,n=t.instance,i=t.options,r=i.scroll,o=void 0===r||r,a=i.resize,s=void 0===a||a,l=kt(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return o&&c.forEach((function(t){t.addEventListener("scroll",n.update,ie)})),s&&l.addEventListener("resize",n.update,ie),function(){o&&c.forEach((function(t){t.removeEventListener("scroll",n.update,ie)})),s&&l.removeEventListener("resize",n.update,ie)}},data:{}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function(t){var e=t.state,n=t.name;e.modifiersData[n]=se({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(t){var e=t.state,n=t.options,i=n.gpuAcceleration,r=void 0===i||i,o=n.adaptive,a=void 0===o||o,s=n.roundOffsets,l=void 0===s||s,c={placement:re(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:r};null!=e.modifiersData.popperOffsets&&(e.styles.popper=Object.assign(Object.assign({},e.styles.popper),ce(Object.assign(Object.assign({},c),{},{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:a,roundOffsets:l})))),null!=e.modifiersData.arrow&&(e.styles.arrow=Object.assign(Object.assign({},e.styles.arrow),ce(Object.assign(Object.assign({},c),{},{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign(Object.assign({},e.attributes.popper),{},{"data-popper-placement":e.placement})},data:{}},{name:"applyStyles",enabled:!0,phase:"write",fn:function(t){var e=t.state;Object.keys(e.elements).forEach((function(t){var n=e.styles[t]||{},i=e.attributes[t]||{},r=e.elements[t];Pt(r)&&Ot(r)&&(Object.assign(r.style,n),Object.keys(i).forEach((function(t){var e=i[t];!1===e?r.removeAttribute(t):r.setAttribute(t,!0===e?"":e)})))}))},effect:function(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach((function(t){var i=e.elements[t],r=e.attributes[t]||{},o=Object.keys(e.styles.hasOwnProperty(t)?e.styles[t]:n[t]).reduce((function(t,e){return t[e]="",t}),{});Pt(i)&&Ot(i)&&(Object.assign(i.style,o),Object.keys(r).forEach((function(t){i.removeAttribute(t)})))}))}},requires:["computeStyles"]},{name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(t){var e=t.state,n=t.options,i=t.name,r=n.offset,o=void 0===r?[0,0]:r,a=Jt.reduce((function(t,n){return t[n]=function(t,e,n){var i=re(t),r=[Ut,qt].indexOf(i)>=0?-1:1,o="function"==typeof n?n(Object.assign(Object.assign({},e),{},{placement:t})):n,a=o[0],s=o[1];return a=a||0,s=(s||0)*r,[Ut,Ht].indexOf(i)>=0?{x:s,y:a}:{x:a,y:s}}(n,e.rects,o),t}),{}),s=a[e.placement],l=s.x,c=s.y;null!=e.modifiersData.popperOffsets&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=c),e.modifiersData[i]=a}},{name:"flip",enabled:!0,phase:"main",fn:function(t){var e=t.state,n=t.options,i=t.name;if(!e.modifiersData[i]._skip){for(var r=n.mainAxis,o=void 0===r||r,a=n.altAxis,s=void 0===a||a,l=n.fallbackPlacements,c=n.padding,u=n.boundary,p=n.rootBoundary,d=n.altBoundary,f=n.flipVariations,h=void 0===f||f,v=n.allowedAutoPlacements,m=e.options.placement,g=re(m),y=l||(g===m||!h?[pe(m)]:function(t){if(re(t)===zt)return[];var e=pe(t);return[fe(t),e,fe(e)]}(m)),_=[m].concat(y).reduce((function(t,n){return t.concat(re(n)===zt?function(t,e){void 0===e&&(e={});var n=e,i=n.placement,r=n.boundary,o=n.rootBoundary,a=n.padding,s=n.flipVariations,l=n.allowedAutoPlacements,c=void 0===l?Jt:l,u=oe(i),p=u?s?Qt:Qt.filter((function(t){return oe(t)===u})):Wt,d=p.filter((function(t){return c.indexOf(t)>=0}));0===d.length&&(d=p);var f=d.reduce((function(e,n){return e[n]=we(t,{placement:n,boundary:r,rootBoundary:o,padding:a})[re(n)],e}),{});return Object.keys(f).sort((function(t,e){return f[t]-f[e]}))}(e,{placement:n,boundary:u,rootBoundary:p,padding:c,flipVariations:h,allowedAutoPlacements:v}):n)}),[]),w=e.rects.reference,b=e.rects.popper,x=new Map,k=!0,E=_[0],C=0;C<_.length;C++){var P=_[C],O=re(P),S=oe(P)===Yt,T=[qt,Bt].indexOf(O)>=0,L=T?"width":"height",I=we(e,{placement:P,boundary:u,rootBoundary:p,altBoundary:d,padding:c}),M=T?S?Ht:Ut:S?Bt:qt;w[L]>b[L]&&(M=pe(M));var F=pe(M),A=[];if(o&&A.push(I[O]<=0),s&&A.push(I[M]<=0,I[F]<=0),A.every((function(t){return t}))){E=P,k=!1;break}x.set(P,A)}if(k)for(var R=function(t){var e=_.find((function(e){var n=x.get(e);if(n)return n.slice(0,t).every((function(t){return t}))}));if(e)return E=e,"break"},j=h?3:1;j>0;j--){if("break"===R(j))break}e.placement!==E&&(e.modifiersData[i]._skip=!0,e.placement=E,e.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}},{name:"preventOverflow",enabled:!0,phase:"main",fn:function(t){var e=t.state,n=t.options,i=t.name,r=n.mainAxis,o=void 0===r||r,a=n.altAxis,s=void 0!==a&&a,l=n.boundary,c=n.rootBoundary,u=n.altBoundary,p=n.padding,d=n.tether,f=void 0===d||d,h=n.tetherOffset,v=void 0===h?0:h,m=we(e,{boundary:l,rootBoundary:c,padding:p,altBoundary:u}),g=re(e.placement),y=oe(e.placement),_=!y,w=ae(g),b="x"===w?"y":"x",x=e.modifiersData.popperOffsets,k=e.rects.reference,E=e.rects.popper,C="function"==typeof v?v(Object.assign(Object.assign({},e.rects),{},{placement:e.placement})):v,P={x:0,y:0};if(x){if(o){var O="y"===w?qt:Ut,S="y"===w?Bt:Ht,T="y"===w?"height":"width",L=x[w],I=x[w]+m[O],M=x[w]-m[S],F=f?-E[T]/2:0,A=y===Yt?k[T]:E[T],R=y===Yt?-E[T]:-k[T],j=e.elements.arrow,D=f&&j?Ft(j):{width:0,height:0},N=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},V=N[O],q=N[S],B=be(0,k[T],D[T]),H=_?k[T]/2-F-B-V-C:A-B-V-C,U=_?-k[T]/2+F+B+q+C:R+B+q+C,z=e.elements.arrow&&Vt(e.elements.arrow),W=z?"y"===w?z.clientTop||0:z.clientLeft||0:0,Y=e.modifiersData.offset?e.modifiersData.offset[e.placement][w]:0,X=x[w]+H-Y-W,G=x[w]+U-Y,$=be(f?Math.min(I,X):I,L,f?Math.max(M,G):M);x[w]=$,P[w]=$-L}if(s){var Q="x"===w?qt:Ut,J="x"===w?Bt:Ht,K=x[b],Z=be(K+m[Q],K,K-m[J]);x[b]=Z,P[b]=Z-K}e.modifiersData[i]=P}},requiresIfExists:["offset"]},{name:"arrow",enabled:!0,phase:"main",fn:function(t){var e,n=t.state,i=t.name,r=n.elements.arrow,o=n.modifiersData.popperOffsets,a=re(n.placement),s=ae(a),l=[Ut,Ht].indexOf(a)>=0?"height":"width";if(r&&o){var c=n.modifiersData[i+"#persistent"].padding,u=Ft(r),p="y"===s?qt:Ut,d="y"===s?Bt:Ht,f=n.rects.reference[l]+n.rects.reference[s]-o[s]-n.rects.popper[l],h=o[s]-n.rects.reference[s],v=Vt(r),m=v?"y"===s?v.clientHeight||0:v.clientWidth||0:0,g=f/2-h/2,y=c[p],_=m-u[l]-c[d],w=m/2-u[l]/2+g,b=be(y,w,_),x=s;n.modifiersData[i]=((e={})[x]=b,e.centerOffset=b-w,e)}},effect:function(t){var e=t.state,n=t.options,i=t.name,r=n.element,o=void 0===r?"[data-popper-arrow]":r,a=n.padding,s=void 0===a?0:a;null!=o&&("string"!=typeof o||(o=e.elements.popper.querySelector(o)))&&he(e.elements.popper,o)&&(e.elements.arrow=o,e.modifiersData[i+"#persistent"]={padding:ye("number"!=typeof s?s:_e(s,Wt))})},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]},{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(t){var e=t.state,n=t.name,i=e.rects.reference,r=e.rects.popper,o=e.modifiersData.preventOverflow,a=we(e,{elementContext:"reference"}),s=we(e,{altBoundary:!0}),l=xe(a,i),c=xe(s,r,o),u=ke(l),p=ke(c);e.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:p},e.attributes.popper=Object.assign(Object.assign({},e.attributes.popper),{},{"data-popper-reference-hidden":u,"data-popper-escaped":p})}}]}),Ce="tippy-content",Pe="tippy-backdrop",Oe="tippy-arrow",Se="tippy-svg-arrow",Te={passive:!0,capture:!0};function Le(t,e,n){if(Array.isArray(t)){var i=t[e];return null==i?Array.isArray(n)?n[e]:n:i}return t}function Ie(t,e){var n={}.toString.call(t);return 0===n.indexOf("[object")&&n.indexOf(e+"]")>-1}function Me(t,e){return"function"==typeof t?t.apply(void 0,e):t}function Fe(t,e){return 0===e?t:function(i){clearTimeout(n),n=setTimeout((function(){t(i)}),e)};var n}function Ae(t){return[].concat(t)}function Re(t,e){-1===t.indexOf(e)&&t.push(e)}function je(t){return t.split("-")[0]}function De(t){return[].slice.call(t)}function Ne(){return document.createElement("div")}function Ve(t){return["Element","Fragment"].some((function(e){return Ie(t,e)}))}function qe(t){return Ie(t,"MouseEvent")}function Be(t){return!(!t||!t._tippy||t._tippy.reference!==t)}function He(t){return Ve(t)?[t]:function(t){return Ie(t,"NodeList")}(t)?De(t):Array.isArray(t)?t:De(document.querySelectorAll(t))}function Ue(t,e){t.forEach((function(t){t&&(t.style.transitionDuration=e+"ms")}))}function ze(t,e){t.forEach((function(t){t&&t.setAttribute("data-state",e)}))}function We(t){var e=Ae(t)[0];return e&&e.ownerDocument||document}function Ye(t,e,n){var i=e+"EventListener";["transitionend","webkitTransitionEnd"].forEach((function(e){t[i](e,n)}))}var Xe={isTouch:!1},Ge=0;function $e(){Xe.isTouch||(Xe.isTouch=!0,window.performance&&document.addEventListener("mousemove",Qe))}function Qe(){var t=performance.now();t-Ge<20&&(Xe.isTouch=!1,document.removeEventListener("mousemove",Qe)),Ge=t}function Je(){var t=document.activeElement;if(Be(t)){var e=t._tippy;t.blur&&!e.state.isVisible&&t.blur()}}var Ke="undefined"!=typeof window&&"undefined"!=typeof document?navigator.userAgent:"",Ze=/MSIE |Trident\//.test(Ke);var tn={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},en=Object.assign({appendTo:function(){return document.body},aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},tn,{},{allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999}),nn=Object.keys(en);function rn(t){var e=(t.plugins||[]).reduce((function(e,n){var i=n.name,r=n.defaultValue;return i&&(e[i]=void 0!==t[i]?t[i]:r),e}),{});return Object.assign({},t,{},e)}function on(t,e){var n=Object.assign({},e,{content:Me(e.content,[t])},e.ignoreAttributes?{}:function(t,e){return(e?Object.keys(rn(Object.assign({},en,{plugins:e}))):nn).reduce((function(e,n){var i=(t.getAttribute("data-tippy-"+n)||"").trim();if(!i)return e;if("content"===n)e[n]=i;else try{e[n]=JSON.parse(i)}catch(t){e[n]=i}return e}),{})}(t,e.plugins));return n.aria=Object.assign({},en.aria,{},n.aria),n.aria={expanded:"auto"===n.aria.expanded?e.interactive:n.aria.expanded,content:"auto"===n.aria.content?e.interactive?null:"describedby":n.aria.content},n}function an(t,e){t.innerHTML=e}function sn(t){var e=Ne();return!0===t?e.className=Oe:(e.className=Se,Ve(t)?e.appendChild(t):an(e,t)),e}function ln(t,e){Ve(e.content)?(an(t,""),t.appendChild(e.content)):"function"!=typeof e.content&&(e.allowHTML?an(t,e.content):t.textContent=e.content)}function cn(t){var e=t.firstElementChild,n=De(e.children);return{box:e,content:n.find((function(t){return t.classList.contains(Ce)})),arrow:n.find((function(t){return t.classList.contains(Oe)||t.classList.contains(Se)})),backdrop:n.find((function(t){return t.classList.contains(Pe)}))}}function un(t){var e=Ne(),n=Ne();n.className="tippy-box",n.setAttribute("data-state","hidden"),n.setAttribute("tabindex","-1");var i=Ne();function r(n,i){var r=cn(e),o=r.box,a=r.content,s=r.arrow;i.theme?o.setAttribute("data-theme",i.theme):o.removeAttribute("data-theme"),"string"==typeof i.animation?o.setAttribute("data-animation",i.animation):o.removeAttribute("data-animation"),i.inertia?o.setAttribute("data-inertia",""):o.removeAttribute("data-inertia"),o.style.maxWidth="number"==typeof i.maxWidth?i.maxWidth+"px":i.maxWidth,i.role?o.setAttribute("role",i.role):o.removeAttribute("role"),n.content===i.content&&n.allowHTML===i.allowHTML||ln(a,t.props),i.arrow?s?n.arrow!==i.arrow&&(o.removeChild(s),o.appendChild(sn(i.arrow))):o.appendChild(sn(i.arrow)):s&&o.removeChild(s)}return i.className=Ce,i.setAttribute("data-state","hidden"),ln(i,t.props),e.appendChild(n),n.appendChild(i),r(t.props,t.props),{popper:e,onUpdate:r}}un.$$tippy=!0;var pn=1,dn=[],fn=[];function hn(t,e){var n,i,r,o,a,s,l,c,u,p=on(t,Object.assign({},en,{},rn((n=e,Object.keys(n).reduce((function(t,e){return void 0!==n[e]&&(t[e]=n[e]),t}),{}))))),d=!1,f=!1,h=!1,v=!1,m=[],g=Fe(G,p.interactiveDebounce),y=pn++,_=(u=p.plugins).filter((function(t,e){return u.indexOf(t)===e})),w={id:y,reference:t,popper:Ne(),popperInstance:null,props:p,state:{isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},plugins:_,clearDelayTimeouts:function(){clearTimeout(i),clearTimeout(r),cancelAnimationFrame(o)},setProps:function(e){0;if(w.state.isDestroyed)return;A("onBeforeUpdate",[w,e]),Y();var n=w.props,i=on(t,Object.assign({},w.props,{},e,{ignoreAttributes:!0}));w.props=i,W(),n.interactiveDebounce!==i.interactiveDebounce&&(D(),g=Fe(G,i.interactiveDebounce));n.triggerTarget&&!i.triggerTarget?Ae(n.triggerTarget).forEach((function(t){t.removeAttribute("aria-expanded")})):i.triggerTarget&&t.removeAttribute("aria-expanded");j(),F(),k&&k(n,i);w.popperInstance&&(K(),tt().forEach((function(t){requestAnimationFrame(t._tippy.popperInstance.forceUpdate)})));A("onAfterUpdate",[w,e])},setContent:function(t){w.setProps({content:t})},show:function(){0;var t=w.state.isVisible,e=w.state.isDestroyed,n=!w.state.isEnabled,i=Xe.isTouch&&!w.props.touch,r=Le(w.props.duration,0,en.duration);if(t||e||n||i)return;if(T().hasAttribute("disabled"))return;if(A("onShow",[w],!1),!1===w.props.onShow(w))return;w.state.isVisible=!0,S()&&(x.style.visibility="visible");F(),B(),w.state.isMounted||(x.style.transition="none");if(S()){var o=I(),a=o.box,s=o.content;Ue([a,s],0)}l=function(){if(w.state.isVisible&&!v){if(v=!0,x.offsetHeight,x.style.transition=w.props.moveTransition,S()&&w.props.animation){var t=I(),e=t.box,n=t.content;Ue([e,n],r),ze([e,n],"visible")}R(),j(),Re(fn,w),w.state.isMounted=!0,A("onMount",[w]),w.props.animation&&S()&&function(t,e){U(t,e)}(r,(function(){w.state.isShown=!0,A("onShown",[w])}))}},function(){var t,e=w.props.appendTo,n=T();t=w.props.interactive&&e===en.appendTo||"parent"===e?n.parentNode:Me(e,[n]);t.contains(x)||t.appendChild(x);K(),!1}()},hide:function(){0;var t=!w.state.isVisible,e=w.state.isDestroyed,n=!w.state.isEnabled,i=Le(w.props.duration,1,en.duration);if(t||e||n)return;if(A("onHide",[w],!1),!1===w.props.onHide(w))return;w.state.isVisible=!1,w.state.isShown=!1,v=!1,d=!1,S()&&(x.style.visibility="hidden");if(D(),H(),F(),S()){var r=I(),o=r.box,a=r.content;w.props.animation&&(Ue([o,a],i),ze([o,a],"hidden"))}R(),j(),w.props.animation?S()&&function(t,e){U(t,(function(){!w.state.isVisible&&x.parentNode&&x.parentNode.contains(x)&&e()}))}(i,w.unmount):w.unmount()},hideWithInteractivity:function(t){0;L().addEventListener("mousemove",g),Re(dn,g),g(t)},enable:function(){w.state.isEnabled=!0},disable:function(){w.hide(),w.state.isEnabled=!1},unmount:function(){0;w.state.isVisible&&w.hide();if(!w.state.isMounted)return;Z(),tt().forEach((function(t){t._tippy.unmount()})),x.parentNode&&x.parentNode.removeChild(x);fn=fn.filter((function(t){return t!==w})),w.state.isMounted=!1,A("onHidden",[w])},destroy:function(){0;if(w.state.isDestroyed)return;w.clearDelayTimeouts(),w.unmount(),Y(),delete t._tippy,w.state.isDestroyed=!0,A("onDestroy",[w])}};if(!p.render)return w;var b=p.render(w),x=b.popper,k=b.onUpdate;x.setAttribute("data-tippy-root",""),x.id="tippy-"+w.id,w.popper=x,t._tippy=w,x._tippy=w;var E=_.map((function(t){return t.fn(w)})),C=t.hasAttribute("aria-expanded");function P(){var t=w.props.touch;return Array.isArray(t)?t:[t,0]}function O(){return"hold"===P()[0]}function S(){var t;return!!(null==(t=w.props.render)?void 0:t.$$tippy)}function T(){return c||t}function L(){var t=T().parentNode;return t?We(t):document}function I(){return cn(x)}function M(t){return w.state.isMounted&&!w.state.isVisible||Xe.isTouch||a&&"focus"===a.type?0:Le(w.props.delay,t?0:1,en.delay)}function F(){x.style.pointerEvents=w.props.interactive&&w.state.isVisible?"":"none",x.style.zIndex=""+w.props.zIndex}function A(t,e,n){var i;(void 0===n&&(n=!0),E.forEach((function(n){n[t]&&n[t].apply(void 0,e)})),n)&&(i=w.props)[t].apply(i,e)}function R(){var e=w.props.aria;if(e.content){var n="aria-"+e.content,i=x.id;Ae(w.props.triggerTarget||t).forEach((function(t){var e=t.getAttribute(n);if(w.state.isVisible)t.setAttribute(n,e?e+" "+i:i);else{var r=e&&e.replace(i,"").trim();r?t.setAttribute(n,r):t.removeAttribute(n)}}))}}function j(){!C&&w.props.aria.expanded&&Ae(w.props.triggerTarget||t).forEach((function(t){w.props.interactive?t.setAttribute("aria-expanded",w.state.isVisible&&t===T()?"true":"false"):t.removeAttribute("aria-expanded")}))}function D(){L().removeEventListener("mousemove",g),dn=dn.filter((function(t){return t!==g}))}function N(t){if(!(Xe.isTouch&&(h||"mousedown"===t.type)||w.props.interactive&&x.contains(t.target))){if(T().contains(t.target)){if(Xe.isTouch)return;if(w.state.isVisible&&w.props.trigger.indexOf("click")>=0)return}else A("onClickOutside",[w,t]);!0===w.props.hideOnClick&&(w.clearDelayTimeouts(),w.hide(),f=!0,setTimeout((function(){f=!1})),w.state.isMounted||H())}}function V(){h=!0}function q(){h=!1}function B(){var t=L();t.addEventListener("mousedown",N,!0),t.addEventListener("touchend",N,Te),t.addEventListener("touchstart",q,Te),t.addEventListener("touchmove",V,Te)}function H(){var t=L();t.removeEventListener("mousedown",N,!0),t.removeEventListener("touchend",N,Te),t.removeEventListener("touchstart",q,Te),t.removeEventListener("touchmove",V,Te)}function U(t,e){var n=I().box;function i(t){t.target===n&&(Ye(n,"remove",i),e())}if(0===t)return e();Ye(n,"remove",s),Ye(n,"add",i),s=i}function z(e,n,i){void 0===i&&(i=!1),Ae(w.props.triggerTarget||t).forEach((function(t){t.addEventListener(e,n,i),m.push({node:t,eventType:e,handler:n,options:i})}))}function W(){var t;O()&&(z("touchstart",X,{passive:!0}),z("touchend",$,{passive:!0})),(t=w.props.trigger,t.split(/\s+/).filter(Boolean)).forEach((function(t){if("manual"!==t)switch(z(t,X),t){case"mouseenter":z("mouseleave",$);break;case"focus":z(Ze?"focusout":"blur",Q);break;case"focusin":z("focusout",Q)}}))}function Y(){m.forEach((function(t){var e=t.node,n=t.eventType,i=t.handler,r=t.options;e.removeEventListener(n,i,r)})),m=[]}function X(t){var e,n=!1;if(w.state.isEnabled&&!J(t)&&!f){var i="focus"===(null==(e=a)?void 0:e.type);a=t,c=t.currentTarget,j(),!w.state.isVisible&&qe(t)&&dn.forEach((function(e){return e(t)})),"click"===t.type&&(w.props.trigger.indexOf("mouseenter")<0||d)&&!1!==w.props.hideOnClick&&w.state.isVisible?n=!0:et(t),"click"===t.type&&(d=!n),n&&!i&&nt(t)}}function G(t){var e=t.target,n=T().contains(e)||x.contains(e);"mousemove"===t.type&&n||function(t,e){var n=e.clientX,i=e.clientY;return t.every((function(t){var e=t.popperRect,r=t.popperState,o=t.props.interactiveBorder,a=je(r.placement),s=r.modifiersData.offset;if(!s)return!0;var l="bottom"===a?s.top.y:0,c="top"===a?s.bottom.y:0,u="right"===a?s.left.x:0,p="left"===a?s.right.x:0,d=e.top-i+l>o,f=i-e.bottom-c>o,h=e.left-n+u>o,v=n-e.right-p>o;return d||f||h||v}))}(tt().concat(x).map((function(t){var e,n=null==(e=t._tippy.popperInstance)?void 0:e.state;return n?{popperRect:t.getBoundingClientRect(),popperState:n,props:p}:null})).filter(Boolean),t)&&(D(),nt(t))}function $(t){J(t)||w.props.trigger.indexOf("click")>=0&&d||(w.props.interactive?w.hideWithInteractivity(t):nt(t))}function Q(t){w.props.trigger.indexOf("focusin")<0&&t.target!==T()||w.props.interactive&&t.relatedTarget&&x.contains(t.relatedTarget)||nt(t)}function J(t){return!!Xe.isTouch&&O()!==t.type.indexOf("touch")>=0}function K(){Z();var e=w.props,n=e.popperOptions,i=e.placement,r=e.offset,o=e.getReferenceClientRect,a=e.moveTransition,s=S()?cn(x).arrow:null,c=o?{getBoundingClientRect:o,contextElement:o.contextElement||T()}:t,u=[{name:"offset",options:{offset:r}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!a}},{name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(t){var e=t.state;if(S()){var n=I().box;["placement","reference-hidden","escaped"].forEach((function(t){"placement"===t?n.setAttribute("data-placement",e.placement):e.attributes.popper["data-popper-"+t]?n.setAttribute("data-"+t,""):n.removeAttribute("data-"+t)})),e.attributes.popper={}}}}];S()&&s&&u.push({name:"arrow",options:{element:s,padding:3}}),u.push.apply(u,(null==n?void 0:n.modifiers)||[]),w.popperInstance=Ee(c,x,Object.assign({},n,{placement:i,onFirstUpdate:l,modifiers:u}))}function Z(){w.popperInstance&&(w.popperInstance.destroy(),w.popperInstance=null)}function tt(){return De(x.querySelectorAll("[data-tippy-root]"))}function et(t){w.clearDelayTimeouts(),t&&A("onTrigger",[w,t]),B();var e=M(!0),n=P(),r=n[0],o=n[1];Xe.isTouch&&"hold"===r&&o&&(e=o),e?i=setTimeout((function(){w.show()}),e):w.show()}function nt(t){if(w.clearDelayTimeouts(),A("onUntrigger",[w,t]),w.state.isVisible){if(!(w.props.trigger.indexOf("mouseenter")>=0&&w.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(t.type)>=0&&d)){var e=M(!1);e?r=setTimeout((function(){w.state.isVisible&&w.hide()}),e):o=requestAnimationFrame((function(){w.hide()}))}}else H()}return W(),j(),F(),A("onCreate",[w]),p.showOnCreate&&et(),x.addEventListener("mouseenter",(function(){w.props.interactive&&w.state.isVisible&&w.clearDelayTimeouts()})),x.addEventListener("mouseleave",(function(t){w.props.interactive&&w.props.trigger.indexOf("mouseenter")>=0&&(L().addEventListener("mousemove",g),g(t))})),w}function vn(t,e){void 0===e&&(e={});var n=en.plugins.concat(e.plugins||[]);document.addEventListener("touchstart",$e,Te),window.addEventListener("blur",Je);var i=Object.assign({},e,{plugins:n}),r=He(t).reduce((function(t,e){var n=e&&hn(e,i);return n&&t.push(n),t}),[]);return Ve(t)?r[0]:r}vn.defaultProps=en,vn.setDefaultProps=function(t){Object.keys(t).forEach((function(e){en[e]=t[e]}))},vn.currentInput=Xe;vn.setDefaultProps({render:un});var mn=vn,gn=new WeakMap,yn=V((function(t){return function(e){if(!(e instanceof ct))throw new Error("unsafeHTML can only be used in text bindings");var n=gn.get(e);if(void 0===n||!ot(t)||t!==n.value||e.value!==n.fragment){var i=document.createElement("template");i.innerHTML=t;var r=document.importNode(i.content,!0);e.setValue(r),gn.set(e,{value:t,fragment:r})}}})),_n=function(t,e){var n=t.startNode.parentNode,i=void 0===e?t.endNode:e.startNode,r=n.insertBefore(Z(),i);n.insertBefore(Z(),i);var o=new ct(t.options);return o.insertAfterNode(r),o},wn=function(t,e){return t.setValue(e),t.commit(),t},bn=function(t,e,n){var i=t.startNode.parentNode,r=n?n.startNode:t.endNode,o=e.endNode.nextSibling;o!==r&&H(i,e.startNode,o,r)},xn=function(t){U(t.startNode.parentNode,t.startNode,t.endNode.nextSibling)},kn=function(t,e,n){for(var i=new Map,r=e;r<=n;r++)i.set(t[r],r);return i},En=new WeakMap,Cn=new WeakMap,Pn=V((function(t,e,n){var i;return void 0===n?n=e:void 0!==e&&(i=e),function(e){if(!(e instanceof ct))throw new Error("repeat can only be used in text bindings");var r=En.get(e)||[],o=Cn.get(e)||[],a=[],s=[],l=[],c=0,u=!0,p=!1,d=void 0;try{for(var f,h=t[Symbol.iterator]();!(u=(f=h.next()).done);u=!0){var v=f.value;l[c]=i?i(v,c):c,s[c]=n(v,c),c++}}catch(t){p=!0,d=t}finally{try{u||null==h.return||h.return()}finally{if(p)throw d}}for(var m=void 0,g=void 0,y=0,_=r.length-1,w=0,b=s.length-1;y<=_&&w<=b;)if(null===r[y])y++;else if(null===r[_])_--;else if(o[y]===l[w])a[w]=wn(r[y],s[w]),y++,w++;else if(o[_]===l[b])a[b]=wn(r[_],s[b]),_--,b--;else if(o[y]===l[b])a[b]=wn(r[y],s[b]),bn(e,r[y],a[b+1]),y++,b--;else if(o[_]===l[w])a[w]=wn(r[_],s[w]),bn(e,r[_],r[y]),_--,w++;else if(void 0===m&&(m=kn(l,w,b),g=kn(o,y,_)),m.has(o[y]))if(m.has(o[_])){var x=g.get(l[w]),k=void 0!==x?r[x]:null;if(null===k){var E=_n(e,r[y]);wn(E,s[w]),a[w]=E}else a[w]=wn(k,s[w]),bn(e,k,r[y]),r[x]=null;w++}else xn(r[_]),_--;else xn(r[y]),y++;for(;w<=b;){var C=_n(e,a[b+1]);wn(C,s[w]),a[w++]=C}for(;y<=_;){var P=r[y++];null!==P&&xn(P)}En.set(e,a),Cn.set(e,l)}})),On=function(){"use strict";function t(e){i(this,t),this.classes=new Set,this.changed=!1,this.element=e;var n=(e.getAttribute("class")||"").split(/\s+/),r=!0,o=!1,a=void 0;try{for(var s,l=n[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var c=s.value;this.classes.add(c)}}catch(t){o=!0,a=t}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}}return o(t,[{key:"add",value:function(t){this.classes.add(t),this.changed=!0}},{key:"remove",value:function(t){this.classes.delete(t),this.changed=!0}},{key:"commit",value:function(){if(this.changed){var t="";this.classes.forEach((function(e){return t+=e+" "})),this.element.setAttribute("class",t)}}}]),t}(),Sn=new WeakMap,Tn=V((function(t){return function(e){if(!(e instanceof lt)||e instanceof dt||"class"!==e.committer.name||e.committer.parts.length>1)throw new Error("The `classMap` directive must be used in the `class` attribute and must be the only part in the attribute.");var n=e.committer,i=n.element,r=Sn.get(e);void 0===r&&(i.setAttribute("class",n.strings.join(" ")),Sn.set(e,r=new Set));var o=i.classList||new On(i);for(var a in r.forEach((function(e){e in t||(o.remove(e),r.delete(e))})),t){var s=t[a];s!=r.has(a)&&(s?(o.add(a),r.add(a)):(o.remove(a),r.delete(a)))}"function"==typeof o.commit&&o.commit()}})),Ln=new WeakMap,In=V((function(t){return function(e){if(!(e instanceof lt)||e instanceof dt||"style"!==e.committer.name||e.committer.parts.length>1)throw new Error("The `styleMap` directive must be used in the style attribute and must be the only part in the attribute.");var n=e.committer,i=n.element.style,r=Ln.get(e);for(var o in void 0===r&&(i.cssText=n.strings.join(" "),Ln.set(e,r=new Set)),r.forEach((function(e){e in t||(r.delete(e),-1===e.indexOf("-")?i[e]=null:i.removeProperty(e))})),t)r.add(o),-1===o.indexOf("-")?i[o]=t[o]:i.setProperty(o,t[o])}})),Mn=new WeakMap,Fn=V((function(t){return function(e){if(!(e instanceof ct))throw new Error("cache can only be used in text bindings");var n=Mn.get(e);void 0===n&&(n=new WeakMap,Mn.set(e,n));var i=e.value;if(i instanceof et){if(t instanceof rt&&i.template===e.options.templateFactory(t))return void e.setValue(t);var r=n.get(i.template);void 0===r&&(r={instance:i,nodes:document.createDocumentFragment()},n.set(i.template,r)),H(r.nodes,e.startNode.nextSibling,e.endNode)}if(t instanceof rt){var o=e.options.templateFactory(t),a=n.get(o);void 0!==a&&(e.setValue(a.nodes),e.commit(),e.value=a.instance)}e.setValue(t)}})),An=new WeakMap,Rn=V((function(t){return function(e){var n=An.get(e);if(void 0===t&&e instanceof lt){if(void 0!==n||!An.has(e)){var i=e.committer.name;e.committer.element.removeAttribute(i)}}else t!==n&&e.setValue(t);An.set(e,t)}})),jn=V((function(t){return function(e){var n;if(e instanceof ht||e instanceof ct)throw new Error("The `live` directive is not allowed on text or event bindings");if(e instanceof ut)Dn(e.strings),n=e.element.hasAttribute(e.name),e.value=n;else{var i=e.committer,r=i.element,o=i.name,a=i.strings;if(Dn(a),e instanceof dt){if((n=r[o])===t)return}else e instanceof lt&&(n=r.getAttribute(o));if(n===String(t))return}e.setValue(t)}})),Dn=function(t){if(2!==t.length||""!==t[0]||""!==t[1])throw new Error("`live` bindings can only contain a single expression")},Nn={},Vn=function(t){var e,n=Object.prototype,i=n.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",s=r.toStringTag||"@@toStringTag";function l(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,n){return t[e]=n}}function c(t,e,n,i){var r=e&&e.prototype instanceof m?e:m,o=Object.create(r.prototype),a=new S(i||[]);return o._invoke=function(t,e,n){var i=p;return function(r,o){if(i===f)throw new Error("Generator is already running");if(i===h){if("throw"===r)throw o;return L()}for(n.method=r,n.arg=o;;){var a=n.delegate;if(a){var s=C(a,n);if(s){if(s===v)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===p)throw i=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=f;var l=u(t,e,n);if("normal"===l.type){if(i=n.done?h:d,l.arg===v)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i=h,n.method="throw",n.arg=l.arg)}}}(t,n,a),o}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var p="suspendedStart",d="suspendedYield",f="executing",h="completed",v={};function m(){}function g(){}function y(){}var _={};l(_,o,(function(){return this}));var w=Object.getPrototypeOf,b=w&&w(w(T([])));b&&b!==n&&i.call(b,o)&&(_=b);var x=y.prototype=m.prototype=Object.create(_);function k(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function E(t,e){function n(r,o,a,s){var l=u(t[r],t,o);if("throw"!==l.type){var c=l.arg,p=c.value;return p&&"object"==typeof p&&i.call(p,"__await")?e.resolve(p.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(p).then((function(t){c.value=t,a(c)}),(function(t){return n("throw",t,a,s)}))}s(l.arg)}var r;this._invoke=function(t,i){function o(){return new e((function(e,r){n(t,i,e,r)}))}return r=r?r.then(o,o):o()}}function C(t,n){var i=t.iterator[n.method];if(i===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=e,C(t,n),"throw"===n.method))return v;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var r=u(i,t.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,v;var o=r.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function T(t){if(t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,a=function n(){for(;++r<t.length;)if(i.call(t,r))return n.value=t[r],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}return{next:L}}function L(){return{value:e,done:!0}}return g.prototype=y,l(x,"constructor",y),l(y,"constructor",g),g.displayName=l(y,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,l(t,s,"GeneratorFunction")),t.prototype=Object.create(x),t},t.awrap=function(t){return{__await:t}},k(E.prototype),l(E.prototype,a,(function(){return this})),t.AsyncIterator=E,t.async=function(e,n,i,r,o){void 0===o&&(o=Promise);var a=new E(c(e,n,i,r),o);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(x),l(x,s,"Generator"),l(x,o,(function(){return this})),l(x,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var i=e.pop();if(i in t)return n.value=i,n.done=!1,n}return n.done=!0,n}},t.values=T,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(O),!t)for(var n in this)"t"===n.charAt(0)&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(i,r){return s.type="throw",s.arg=t,n.next=i,r&&(n.method="next",n.arg=e),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var l=i.call(a,"catchLoc"),c=i.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),O(n),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var i=n.completion;if("throw"===i.type){var r=i.arg;O(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,i){return this.delegate={iterator:T(t),resultName:n,nextLoc:i},"next"===this.method&&(this.arg=e),v}},t}(Nn);try{regeneratorRuntime=Vn}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=Vn:Function("r","regeneratorRuntime = r")(Vn)}var qn=function(){"use strict";function t(e){i(this,t),this.classes=new Set,this.element=e;var n=(e.getAttribute("class")||"").split(/\s+/),r=!0,o=!1,a=void 0;try{for(var s,l=n[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var c=s.value;this.classes.add(c)}}catch(t){o=!0,a=t}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}}return o(t,[{key:"add",value:function(t){this.classes.add(t),this.commit()}},{key:"remove",value:function(t){this.classes.delete(t),this.commit()}},{key:"commit",value:function(){var t="";this.classes.forEach((function(e){return t+=e+" "})),this.element.setAttribute("class",t)}}]),t}(),Bn=!1;function Hn(t){return Bn?new qn(t):t.classList||new qn(t)}function Un(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return new Promise((function(e){return 0==--t?requestAnimationFrame((function(){return e()})):e(Un(t))}))}function zn(t){for(var e=t;e=e.parentNode||e.host;)if(e instanceof HTMLElement)return e;return null}function Wn(e,i){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return new Promise((function(o){var a=new MutationObserver(n(t(Nn).mark((function e(){return t(Nn).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.disconnect(),t.t0=r,!t.t0){t.next=5;break}return t.next=5,Un();case 5:o();case 6:case"end":return t.stop()}}),e)}))));a.observe(e,{attributes:!0,attributeFilter:["class"]}),i&&i()}))}function Yn(t){var e=function(t){for(var e=[],n=t.startNode.nextSibling;n!==t.endNode;)e.push(n),n=n.nextSibling;return e}(t),n=e.filter((function(t){return!("#text"===(e=t).nodeName&&!(null===(n=e.nodeValue)||void 0===n?void 0:n.trim()));var e,n}));if(1!=n.length)throw new Error("lit-transition directive expects exactly one child node,\n      but was passed ".concat(n.map((function(t){return t.nodeName})).join(", ")));return n[0]}var Xn,Gn=new WeakMap;function $n(t,e){return Gn.set(t,e),t}function Qn(t,e){var n=zn(t);if(n){var i=function(){var t,i=document.createElement("div"),r=Hn(i),o=n.shadowRoot||n;t=e,Array.isArray(t)?t.forEach((function(t){return r.add(t)})):r.add(t),o.appendChild(i);var a=window.getComputedStyle(i).position;return o.removeChild(i),a}();if("absolute"===i)return"relative"===window.getComputedStyle(n).position}return!1}function Jn(t){for(var e=t.getBoundingClientRect(),n=0,i=0,r=t.offsetParent;t&&t!==document&&!(t instanceof DocumentFragment)&&t!==r;)n+=t.offsetTop-(t.scrollTop||0),i+=t.offsetLeft-(t.scrollLeft||0),t=zn(t);return{left:i,top:n,width:e.width,height:e.height}}function Kn(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!document.hidden;Xn=t}function Zn(){var t=m(["<div></div>"]);return Zn=function(){return t},t}function ti(){var t=m(['<div style="display: inline-block">',"</div>"]);return ti=function(){return t},t}Kn(),document.addEventListener("visibilitychange",(function(){return Kn()}),!1);var ei,ni,ii=function(t){return t},ri=new WeakMap;function oi(e){return function(i,r){return n(t(Nn).mark((function o(a){var s,l,c,u,p,d,f,h,v,m,g,y,_,w,b,x,k,E;return t(Nn).wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(g=function(t){var e=new ct(a.options);return e.appendIntoPart(a),e.setValue(t),e.commit(),e},y=function(t){var e=t.startNode,n=t.endNode;try{e&&t.clear()}catch(t){}e&&e.parentNode&&e.parentNode.removeChild(e),n&&n.parentNode&&n.parentNode.removeChild(n)},_=function(t){return w.apply(this,arguments)},w=function(){return(w=n(t(Nn).mark((function n(i){return t(Nn).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=u,!t.t0){t.next=4;break}return t.next=4,u();case 4:if(t.t1=l,!t.t1){t.next=8;break}return t.next=8,e.transition(i,l,r);case 8:if(t.t2=d,!t.t2){t.next=12;break}return t.next=12,d();case 12:case"end":return t.stop()}}),n)})))).apply(this,arguments)},b=function(t){return x.apply(this,arguments)},x=function(){return(x=n(t(Nn).mark((function n(i){return t(Nn).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=p,!t.t0){t.next=4;break}return t.next=4,p();case 4:if(t.t1=c,!t.t1){t.next=8;break}return t.next=8,e.transition(i,c,r);case 8:if(y(i),t.t2=f,!t.t2){t.next=13;break}return t.next=13,f();case 13:case"end":return t.stop()}}),n)})))).apply(this,arguments)},a instanceof ct){o.next=8;break}throw new Error("The `transition` directive can only be used on nodes");case 8:if(i||(i=bt(Ds||(Ds=ii(Zn())))),"string"!=typeof i&&"number"!=typeof i||(i=bt(Ns||(Ns=ii(ti(),0)),i)),C=i,s=Gn.get(C),l=r.enter,c=r.leave,u=r.onEnter,p=r.onLeave,d=r.onAfterEnter,f=r.onAfterLeave,h=r.mode,v=void 0===h?"in-out":h,m=ri.get(a),Xn){o.next=35;break}if(m&&m.last&&y(m.last),o.t0=p,!o.t0){o.next=21;break}return o.next=21,p();case 21:if(o.t1=f,!o.t1){o.next=25;break}return o.next=25,f();case 25:if(o.t2=u,!o.t2){o.next=29;break}return o.next=29,u();case 29:if(m&&(m.last=g(i)),o.t3=d,!o.t3){o.next=34;break}return o.next=34,d();case 34:return o.abrupt("return");case 35:if(m||ri.set(a,m={children:new Map,styles:new Map,transition:r}),e.init&&e.init({transition:r,data:m,add:g,remove:y}),!m.last||!s||s!==m.name){o.next=45;break}m.last.setValue(i),m.last.commit(),o.next=69;break;case 45:if(m.name=s,"in-out"!==v){o.next=56;break}return k=m.last,o.next=50,_(m.last=g(i));case 50:if(o.t4=k,!o.t4){o.next=54;break}return o.next=54,b(k);case 54:case 64:o.next=69;break;case 56:if("out-in"!==v){o.next=66;break}if(E=m.last,o.t5=E,!o.t5){o.next=62;break}return o.next=62,b(E);case 62:return o.next=64,_(m.last=g(i));case 66:return m.last&&b(m.last),o.next=69,_(m.last=g(i));case 69:case"end":return o.stop()}var C}),o)})))}}function Zn(){var t=m(["<style>","</style>"]);return Zn=function(){return t},t}!function(t){t.InOut="in-out",t.OutIn="out-in",t.Both="both"}(ei||(ei={})),function(t){t[t.None=0]="None",t[t.Lock=1]="Lock",t.Auto="auto"}(ni||(ni={}));ii=function(t){return t};function ai(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.css,n=t.duration,i=t.enter,r=void 0===i?{}:i,o=t.leave,a=void 0===o?{}:o,s=t.mode,l=void 0===s?ei.Both:s,c=t.onAfterEnter,u=t.onAfterLeave,p=t.onEnter,d=t.onLeave,f=t.skipHidden,h=void 0===f||f,v=!1;return{duration:n,skipHidden:h,css:bt(Ds||(Ds=ii(Zn(),0)),e),enter:0!=r&&(Array.isArray(r)||"string"==typeof r?{active:r}:Object.assign({active:"enter-active",from:"enter-from",to:"enter-to"},r)),leave:0!=a&&(Array.isArray(a)||"string"==typeof a?{active:a,lock:v}:Object.assign({active:"leave-active",from:"leave-from",to:"leave-to",lock:v},a)),onEnter:p,onLeave:d,onAfterEnter:c,onAfterLeave:u,mode:l}}function si(t,e){var n=e();for(var i in n)e[i]=n[i];return Object.defineProperty(e,"name",{get:function(){return t}}),e}function li(t,e){for(var n in e)try{e[n].constructor==Object?t[n]=li(t[n],e[n]):t[n]=e[n]}catch(i){t[n]=e[n]}return t}var ci=si("fade",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.duration,n=void 0===e?500:e,i=t.ease,r=void 0===i?"ease-out":i,o=t.opacity,a=void 0===o?0:o;return li({enter:{active:"fade-enter-active",from:"fade-enter-from",to:"fade-enter-to"},leave:{active:"fade-leave-active",from:"fade-leave-from",to:"fade-leave-to",lock:!0},css:"\n    .fade-leave-active {\n      position: fixed;\n      transition: opacity ".concat(n,"ms ").concat(r,", transform ").concat(n,"ms ").concat(r,";\n    }\n    .fade-enter-active {\n      transition: opacity ").concat(n,"ms ").concat(r,", transform ").concat(n,"ms ").concat(r,";\n    }\n  .fade-enter-from, .fade-leave-to {\n    opacity: ").concat(a,";\n  }\n  .fade-enter-to, .fade-leave-from {\n    opacity: 1;\n  }\n  ")},t)}));function Zn(){var t=m(["<style>","</style>"]);return Zn=function(){return t},t}ii=function(t){return t};var ui={transition:function(e,i,r){return n(t(Nn).mark((function o(){var a,s,l,c,u,p,d,f;return t(Nn).wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(a=i.duration,s=void 0===a?r.duration:a,l=i.active,c=i.from,u=i.to,p=i.lock,d=Yn(e)){o.next=4;break}return o.abrupt("return");case 4:return p&&(p!==ni.Auto||l&&Qn(d,l))&&(f=Jn(d)),o.next=8,new Promise(n(t(Nn).mark((function e(n){var i,r,o,a,p;return t(Nn).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=function(t){if(t){if(t.target!==d)return;t.preventDefault(),t.stopPropagation()}["transitionend","transitioncancel","animationend","animationcancel"].filter((function(e){return!t||e!==t.type})).forEach((function(t){return d.removeEventListener(t,a)})),l&&o(l),c&&o(c),u&&o(u),n()},i=Hn(d),r=function(t){return Array.isArray(t)?t.forEach((function(t){return i.add(t)})):i.add(t)},o=function(t){return Array.isArray(t)?t.forEach((function(t){return i.remove(t)})):i.remove(t)},f&&(h=f,(e=d).style.marginLeft="0px",e.style.marginTop="0px",e.style.left=h.left+"px",e.style.top=h.top+"px",e.style.width=h.width+"px",e.style.height=h.height+"px"),p={once:!0},s?setTimeout(a,s):(d.addEventListener("transitionrun",(function(){d.addEventListener("transitionend",a,p),d.addEventListener("transitioncancel",a,p)}),p),d.addEventListener("animationstart",(function(){d.addEventListener("animationend",a,p),d.addEventListener("animationcancel",a,p)}),p)),t.t0=c,!t.t0){t.next=12;break}return t.next=12,Wn(d,(function(){return r(c)}));case 12:if(t.t1=l,!t.t1){t.next=16;break}return t.next=16,Wn(d,(function(){return r(l)}));case 16:c&&o(c),u&&r(u);case 18:case"end":return t.stop()}var e,h}),e)}))));case 8:case"end":return o.stop()}}),o)})))()},init:function(t){var e=t.data,n=t.remove,i=t.add,r=t.transition;if(e._cssSource!==r.css&&(e.css&&n(e.css),r.css)){e._cssSource=r.css;var o=r.css;o="string"==typeof o?bt(Ds||(Ds=ii(Zn(),0)),o):o,e.css=i(o)}}},pi=(si("land",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.duration,n=void 0===e?500:e,i=t.ease,r=void 0===i?"ease-out":i,o=t.opacity,a=void 0===o?0:o;return li({enter:{active:"land1-enter-active",from:"land1-enter-from",to:"land1-enter-to"},leave:{active:"land1-leave-active",from:"land1-leave-from",to:"land1-leave-to"},mode:"both",css:"\n      .land1-enter-active {\n        transform-origin: 50% 50%;\n        transition: transform ".concat(n,"ms ").concat(r,", opacity ").concat(n,"ms ").concat(r,";\n      }\n      .land1-leave-active {\n        transform-origin: 50% 50%;\n        position: absolute;\n        transition: transform ").concat(n,"ms ").concat(r,", opacity ").concat(n,"ms ").concat(r,";\n      }\n      .land1-enter-from {\n        opacity: ").concat(a,";\n        transform: translate(0px, 0px) scale(3);\n      }\n      .land1-leave-to {\n        transform: translate(0px, 100px);\n        opacity: ").concat(a,";\n      }")},t)})),si("slide",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.left,n=t.right,i=t.up,r=t.down,o={};e&&(o={x:"-100%",x1:"100%"}),n&&(o={x:"100%",x1:"-100%"}),i&&(o={y:"100%",y1:"-100%"}),r&&(o={y:"-100%",y1:"100%"});var a=Object.assign(Object.assign({},o),t),s=a.mode,l=a.duration,c=void 0===l?500:l,u=a.x,p=void 0===u?"100%":u,d=a.y,f=void 0===d?"0%":d,h=a.x1,v=void 0===h?"":h,m=a.y1,g=void 0===m?"":m,y=a.ease,_=void 0===y?"ease-out":y,w=a.leavePosition,b=void 0===w?"":w,x=a.opacity,k=void 0===x?0:x;return v=v||p,g=g||f,li({enter:{active:"slide-enter-active",from:"slide-enter-from"},leave:{active:"slide-leave-active",to:"slide-leave-to",lock:ni.Auto},css:"\n    .slide-enter-active {\n      transition: transform ".concat(c,"ms ").concat(_,", opacity ").concat(c,"ms ").concat(_,";\n    }\n    .slide-leave-active {\n      position: ").concat(b||(s!==ei.OutIn?"absolute":"initial"),";\n      transition: transform ").concat(c,"ms ").concat(_,", opacity ").concat(c,"ms ").concat(_,";\n    }\n    .slide-leave-to {\n      opacity: ").concat(k,";\n      transform: translate(").concat(p,", ").concat(f,");\n    }\n    .slide-enter-from {\n      opacity: ").concat(k,";\n      transform: translate(").concat(v,", ").concat(g,");\n    }"),mode:s},t)})),V((function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ci;return"function"==typeof e&&(e=e()),oi(ui)(t,ai(e))})));function di(t,e){"string"==typeof t&&(t=t.replace(".",""));var n="",i=/\{\{\s*(\w+)\s*\}\}/,r=e||"${{amount}}";function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:",",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:".";if(isNaN(t)||null==t)return 0;var r=(t=(t/100).toFixed(e)).split("."),o=r[0].replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1".concat(n)),a=r[1]?i+r[1]:"";return o+a}switch(r.match(i)[1]){case"amount":n=o(t,2);break;case"amount_no_decimals":n=o(t,0);break;case"amount_with_comma_separator":n=o(t,2,".",",");break;case"amount_no_decimals_with_comma_separator":n=o(t,0,".",",")}return r.replace(i,n)}var fi={OPTIONS:"_cl_options",ID:"_cl_options_id",PRICE:"_cl_options_price",PRICE_BASE:"_cl_options_price_base",CURRENCY:"_cl_options_currency",VALIDATE:!0},hi={cartItem:!0,cartItemPreview:!0,cartItemPrice:!0,cartItemPriceOptions:!0,cartItemEdit:!1,cartItemClOptions:!0,cartCount:!0,cartTotal:!0,cartFormCapture:!0,cartDiscount:!1,productFormCapture:!0,productPrice:!0,productPriceAll:!1,productVariantHide:!0,productVariantFilter:!1,productVariantReset:!1,productVariantHistory:!1,productVariantHistoryPush:!0,productVariantHistoryReplace:!0,productPriceTimeout:!1,productPriceObserver:!1,productItemUpdate:!0,productItemModal:!1,productOptionsClear:!1,amountNoDecimals:!1,themeGallery:!1,themeGalleryTimeout:!1,tooltipBody:!0,currencyFormat:!0},vi={currency:"",currencyConvert:!1,currencyFactor:1,moneyFormat:"$ {{amount}}",moneyFormatWithCurrency:"${{amount}} USD",priceVariant:!1,priceVariantValue:.01,priceVariantId:"",priceProductHandle:""},mi=function(t){if(1!==vi.currencyFactor)if(t*=vi.currencyFactor,vi.priceVariant){var e=Math.round(t/vi.priceVariantValue);t=vi.priceVariantValue*e,t=Math.round(100*t)/100}else t=vi.currencyFactor>100&&t>100?100*Math.round(t/100):t>100?Math.round(t):Math.round(10*t)/10;return t},gi=0,yi=1,_i=2,wi=2,bi=3,xi=4,ki=function t(){"use strict";i(this,t)};ki.templates={};var Ei=ki,Ci=function(){"use strict";function t(e){i(this,t);this.settings=E.extend({api:"",path:"/api/storage",queryParams:{}},e||{})}return o(t,[{key:"upload",value:function(t,e){for(var n=this,i=function(i){var a=n,s=t[i];r.push(new Promise((function(t,n){a._getSignedUrl(s).then((function(r){var a={method:"PUT",headers:{"Content-type":s.mimeType},data:s._file};0===i&&(a.onProgress=e);var l=new C(r.upload,a);o.push(l),l.then((function(){s.url=r.download,s.path=r.path,t(s)})).catch((function(t){n(t)}))})).catch((function(t){n(t)}))})))},r=[],o=[],a=0;a<t.length;a++)i(a);var s=Promise.all(r).then((function(t){return P.info(t),t}));return s.cancel=function(){for(var t=0;t<o.length;t++){o[t].cancel()}},s}},{key:"_getSignedUrl",value:function(t){var e=this.settings.api+this.settings.path,n=E.extend(this.settings.queryParams,{name:encodeURIComponent(t.name),type:encodeURIComponent(t.mimeType),public:"1",cb:1e18*Math.random()+""});return new C(e,{method:"GET",withCredentials:!0,queryParams:n}).then((function(t){return t.data}))}}]),t}(),Pi=function(){"use strict";function t(e){i(this,t);this.settings=E.extend({api:"",path:"/api/upload",queryParams:{}},e||{}),this.findToken()}return o(t,[{key:"findToken",value:function(){var t=E.readCookie("token");t&&(this.settings.queryParams.token=t)}},{key:"blobToFile",value:function(t,e){return new File([t],e,{lastModified:(new Date).getTime(),type:t.type})}},{key:"fromBlob",value:function(t,e){return{name:e,size:t.size,mimeType:t.type,meta:{},_file:t}}},{key:"fromNative",value:function(t){return{name:t.name?t.name:"",size:t.size,mimeType:t.type,meta:{},_file:t}}},{key:"saveFile",value:function(t){var e=this;return this.settings.queryParams.token||this.findToken(),this.settings.origin&&(t.origin=this.settings.origin),new C(this.settings.api+this.settings.path,{method:"POST",responseType:"json",headers:{"Content-type":"application/json"},withCredentials:!0,data:t,queryParams:this.settings.queryParams}).then((function(t){if(!e.settings.queryParams.token&&t.data.token){var n=t.data.token;E.writeCookie("token",n,10,"/"),e.settings.queryParams.token=n}return t.data})).catch((function(t){throw t}))}},{key:"removeFile",value:function(t){return new C(this.settings.api+this.settings.path+"/"+t.uuid,{method:"DELETE",responseType:"json",withCredentials:!0,queryParams:this.settings.queryParams}).then((function(t){return t.data})).catch((function(t){throw t}))}}]),t}(),Oi={};!function(t,e){"function"==typeof define&&define.amd?define([],e):"object"==typeof Oi?Oi=e():t.loadjs=e()}(Oi,(function(){var t=function(){},e={},n={},i={};function r(t,e){if(t){var r=i[t];if(n[t]=e,r)for(;r.length;)r[0](t,e),r.splice(0,1)}}function o(e,n){e.call&&(e={success:e}),n.length?(e.error||t)(n):(e.success||t)(e)}function a(e,n,i,r){var o,s,l=document,c=i.async,u=(i.numRetries||0)+1,p=i.before||t,d=e.replace(/[\?|#].*$/,""),f=e.replace(/^(css|img)!/,"");r=r||0,/(^css!|\.css$)/.test(d)?((s=l.createElement("link")).rel="stylesheet",s.href=f,(o="hideFocus"in s)&&s.relList&&(o=0,s.rel="preload",s.as="style")):/(^img!|\.(png|gif|jpg|svg|webp)$)/.test(d)?(s=l.createElement("img")).src=f:((s=l.createElement("script")).src=e,s.async=void 0===c||c),s.onload=s.onerror=s.onbeforeload=function(t){var l=t.type[0];if(o)try{s.sheet.cssText.length||(l="e")}catch(t){18!=t.code&&(l="e")}if("e"==l){if((r+=1)<u)return a(e,n,i,r)}else if("preload"==s.rel&&"style"==s.as)return s.rel="stylesheet";n(e,l,t.defaultPrevented)},!1!==p(e,s)&&l.head.appendChild(s)}function s(t,n,i){var s,l;if(n&&n.trim&&(s=n),l=(s?i:n)||{},s){if(s in e)throw"LoadJS";e[s]=!0}function c(e,n){!function(t,e,n){var i,r,o=(t=t.push?t:[t]).length,s=o,l=[];for(i=function(t,n,i){if("e"==n&&l.push(t),"b"==n){if(!i)return;l.push(t)}--o||e(l)},r=0;r<s;r++)a(t[r],i,n)}(t,(function(t){o(l,t),e&&o({success:e,error:n},t),r(s,t)}),l)}if(l.returnPromise)return new Promise(c);c()}return s.ready=function(t,e){return function(t,e){t=t.push?t:[t];var r,o,a,s=[],l=t.length,c=l;for(r=function(t,n){n.length&&s.push(t),--c||e(s)};l--;)o=t[l],(a=n[o])?r(o,a):(i[o]=i[o]||[]).push(r)}(t,(function(t){o(e,t)})),s},s.done=function(t){r(t,[])},s.reset=function(){e={},n={},i={}},s.isDefined=function(t){return t in e},s}));var Si=function(){"use strict";function e(){i(this,e)}return o(e,null,[{key:"load",value:function(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{async:!0};return i.returnPromise=!0,t(Oi)(e,n,i)}},{key:"isReady",value:function(e){return Array.isArray(e)||(e=[e]),new Promise((function(n,i){t(Oi).ready(e,(function(){n(e)}))}))}},{key:"isDefined",value:function(e){return t(Oi).isDefined(e)}},{key:"loadOnce",value:function(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{async:!0};return e.isDefined(n)?e.isReady(n):e.load(t,n,i)}}]),e}(),Ti=Si,Li=function(){"use strict";function t(e){i(this,t);this.settings=E.extend({api:"",queryParams:{}},e||{}),this._fileMeta=new Pi({api:this.settings.api,queryParams:this.settings.queryParams,origin:4}),this._provider=new Ci({api:this.settings.api,queryParams:this.settings.queryParams})}return o(t,[{key:"controller",value:function(){var t=this,e={files:[],inputs:[],onValidate:function(t){var n=!0;return t.required&&0===e.files.length&&(t.errors.push(S.get("product.options.validity.upload.required")),n=!1),n},onChange:function(n,i,r,o){var a=n.target;if(a.value&&a.files.length>0){for(var s=t,l=a.files,c=[],u=0;u<l.length;u++){var p=l[u],d=i.params.maxMb||10,f=1048576*d;if(p.size>f)return a.value="",i.errors=i.errors||[],i.errors.push(S.get("product.options.validity.upload.max",{max:d})),void a.dispatchEvent(new CustomEvent("options:render",{detail:i,cancelable:!0,bubbles:!0}));c.push(t._fileMeta.fromNative(p))}var h=E.findParent(a,".cl-po--upload"),v=h.querySelector("progress");v.max=100,v.value=0,v.style.display="block",t.upload(c,(function(t){if(t.lengthComputable){var e=t.loaded/t.total*100;e>v.value&&(v.value=e)}})).then((function(t){v.style.display="none";for(var n=0;n<e.files.length;n++){var l=e.files[n];l.uuid&&s._fileMeta.removeFile(l)}for(var c=0;c<e.inputs.length;c++){var u=e.inputs[c];u.parentNode&&u.parentNode.removeChild(u)}e.inputs.length=0,e.files=t;for(var p="",d=0;d<e.files.length;d++){var f=e.files[d];p+=s._corsUrl(f.url);var m=d+1;m<e.files.length&&(p+=",");var g=document.createElement("input");g.type="hidden",i.params.multiple?g.name="properties["+i.name+"_"+m+"]":g.name="properties["+i.name+"]",g.value=f.url,s._linkForm(g,r),h.appendChild(g),e.inputs.push(g)}i.value=p,a.value="",o(i)}))}},update:function(n,i){if(n.value){if(0===e.inputs.length){e.files.push({url:n.value,name:"file"+n.value.substring(n.value.lastIndexOf(".")),meta:{}});var r=document.createElement("input");r.type="hidden",r.name="properties["+n.name+"]",r.value=n.value,n.value=t._corsUrl(n.value),t._linkForm(r,i),document.querySelector('[data-option="'+n.name+'"] .cl-po--upload').appendChild(r),e.inputs.push(r)}}else if(e.inputs.length>0){for(var o=0;o<e.inputs.length;o++){var a=e.inputs[o];a.parentNode&&a.parentNode.removeChild(a)}e.inputs.length=0,e.files.length=0}},remove:function(n,i,r,o){for(var a=0;a<e.files.length;a++)if(e.files[a]===r){t._fileMeta.removeFile(r),e.files.splice(a,1);for(var s=0;s<e.inputs.length;s++)if(e.inputs[s].value==r.url){var l=e.inputs[s];l.parentNode&&l.parentNode.removeChild(l),e.inputs.splice(s,1)}n.value="",o(n);break}},crop:function(t,e){e.dispatchEvent(new CustomEvent("option:crop",{detail:t,cancelable:!0,bubbles:!0}))}};return e}},{key:"controllerLift",value:function(t,e,n,i){var r=this,o={option:t,selector:".cl-po--upload-lift-".concat(t.id),container:null,field:null,urls:[],onValidate:function(t){var e=!0;if(t.required&&0===o.urls.length)t.errors.push(S.get("product.options.validity.upload.required")),e=!1;else if(o.field)return o.field.validate();return e},syncValue:function(){for(var t="",e=0;e<o.urls.length;e++){t+=r._corsUrl(o.urls[e]),e+1<o.urls.length&&(t+=",")}o.option.value=t,i(o.option)},watchUploads:function(){o.container=document.querySelector(o.selector),o.container&&(o.container.addEventListener("upload:added",(function(e){var n=e.detail,i=t.params.variant||"original";n.url&&n.meta.variant===i&&(o.urls.push(n.url),o.syncValue())})),o.container.addEventListener("upload:removed",(function(e){var n=e.detail,i=t.params.variant||"original";if(n.url&&n.meta.variant===i){var r=o.urls.indexOf(n.url);-1!==r&&(o.urls.splice(r,1),o.syncValue())}})))},update:function(t,e){t.value?0===o.urls.length&&t._controller.ready.then((function(){var e=t.value.split(",");t._controller.field.restore(e),t.value=""})):o.urls.length>0&&t._controller.field&&t._controller.field.clearFiles()},crop:function(t,e){e.dispatchEvent(new CustomEvent("option:crop",{detail:t,cancelable:!0,bubbles:!0}))}},a=function(i){n.removeEventListener("options:rendered",a);var r=function(){var i=window.Cloudlift.upload.App;if(i.fields.length>0)for(var r=0;r<i.fields.length;r++){var a=i.fields[r];a.config.uuid==t.params.uuid&&(a.destroy(),i.fields.splice(r,1))}else i.config.setup=!1;for(var s=0;s<window.Cloudlift.upload.config.fields.length;s++){var l=window.Cloudlift.upload.config.fields[s];if(l.uuid===t.params.uuid){var c=JSON.parse(JSON.stringify(l));c.field=t.name,c.fileFetch=!1,c.selector=o.selector,i._createUploadField(c,e);var u=i.fields.length-1;o.field=i.fields[u],o.field._productForm=n,i.fields.splice(u,1),t._controller.onReady(o.field)}}};t._controller.ready=new Promise((function(e,n){t._controller.onReady=e}));var s=function(){setTimeout((function(){window.Cloudlift.upload.App?o.field||r():s()}),300)};window.Cloudlift&&window.Cloudlift.upload&&(window.Cloudlift.upload.App?r():s()),window.addEventListener("cloudlift.upload.ready",(function(t){window.Cloudlift.upload.App?o.field||r():s()})),o.watchUploads()};return n.addEventListener("options:rendered",a),o}},{key:"_corsUrl",value:function(t){return t=(t=t.replace("https://upload.dev.cloudlift.app/s/dev","https://storage.googleapis.com/cloudlift-app-cloud-dev-upload")).replace("https://upload.cloudlift.app/s","https://storage.googleapis.com/cloudlift-app-cloud-prod-upload")}},{key:"_linkForm",value:function(t,e){if(e){var n=e.getAttribute("id");n&&t.setAttribute("form",n)}}},{key:"upload",value:function(t,e){try{var n=this,i=this._provider.upload(t,e),r=new Promise((function(t,e){var r=n;i.then((function(n){for(var i=r,o=0;o<n.length;o++)delete n[o]._file;var a=n[0];r._fileMeta.saveFile(a).then((function(e){for(var r=[],o=1;o<n.length;o++){var a=n[o];a.parent=e.uuid,r.push(i._fileMeta.saveFile(a).then((function(t){return t})))}Promise.all(r).then((function(n){n.unshift(e),t(n)}))})).catch((function(t){e(t)}))})),i.catch((function(t){e(t)}))}));return r.cancel=function(){i.cancel()},r}catch(t){return Promise.reject(t)}}}],[{key:"getInstance",value:function(e){return t._instance||(t._instance=new t(e)),t._instance}}]),t}();function Zn(){var t=m(['\n    <input type="hidden" id="','" name="','" .value='," form=",">\n"]);return Zn=function(){return t},t}function ti(){var t=m(["\n    ",'\n    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="20" height="20"><path fill="none" d="M0 0h24v24H0z"/><path d="M15.728 9.686l-1.414-1.414L5 17.586V19h1.414l9.314-9.314zm1.414-1.414l1.414-1.414-1.414-1.414-1.414 1.414 1.414 1.414zM7.242 21H3v-4.243L16.435 3.322a1 1 0 0 1 1.414 0l2.829 2.829a1 1 0 0 1 0 1.414L7.243 21z" fill="var(--text-editor-color)"/></svg>\n']);return ti=function(){return t},t}function Ii(){var t=m(['<span class="cl-po--edit-label">',"</span>"]);return Ii=function(){return t},t}function Mi(){var t=m(['\n    <input type="text" class="cl-po--input ','" id="','" name="','" .value='," @input=","\n      ?required="," minlength="," maxlength="," pattern="," placeholder=",' autocomplete="','" form='," style=",">\n\n    ","\n"]);return Mi=function(){return t},t}function Fi(){var t=m(["",""]);return Fi=function(){return t},t}function Ai(){var t=m(["",""]);return Ai=function(){return t},t}function Ri(){var t=m(['\n    <textarea class="cl-po--input ','" id="','" name="','" .value='," @input="," @keyup=","\n     ?required="," minlength="," maxlength="," rows="," placeholder="," style=",' autocomplete="','" form=',">\n    </textarea>\n\n    ","\n        \n    ","\n"]);return Ri=function(){return t},t}function ji(){var t=m(["",""]);return ji=function(){return t},t}function Di(){var t=m(["",""]);return Di=function(){return t},t}function Ni(){var t=m(['\n        <div class="cl-po--help cl-po--text-help"></div>\n    ']);return Ni=function(){return t},t}function Vi(){var t=m(['\n    <div class="cl-po--text-editor">\n\n        ',"\n        \n        ","\n        ","\n        ","\n        ","\n         ","\n        \n    </div>\n"]);return Vi=function(){return t},t}function qi(){var t=m(['\n        <div class="cl-po--editor-group cl-po--font-family">\n            ',"\n        </div>"]);return qi=function(){return t},t}function Bi(){var t=m([' \n        <div class="cl-po--editor-group cl-po--font-style">\n            <div @click=',' class="cl-po--swatch cl-po--swatch-button ','" data-tippy-content="','" data-tippy-placement="bottom">\n                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><path fill="none" d="M0 0h24v24H0z"/><path d="M8 11h4.5a2.5 2.5 0 1 0 0-5H8v5zm10 4.5a4.5 4.5 0 0 1-4.5 4.5H6V4h6.5a4.5 4.5 0 0 1 3.256 7.606A4.498 4.498 0 0 1 18 15.5zM8 13v5h5.5a2.5 2.5 0 1 0 0-5H8z" fill="var(--text-editor-color)"/></svg>\n            </div>\n            <div @click=',' class="cl-po--swatch cl-po--swatch-button ','" data-tippy-content="','" data-tippy-placement="bottom">\n                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><path fill="none" d="M0 0h24v24H0z"/><path d="M15 20H7v-2h2.927l2.116-12H9V4h8v2h-2.927l-2.116 12H15z" fill="var(--text-editor-color)"/></svg>\n            </div>\n        </div>']);return Bi=function(){return t},t}function Hi(){var t=m([' \n        <div class="cl-po--editor-group cl-po--text-align">\n            <div @click=',' class="cl-po--swatch cl-po--swatch-button ','" data-tippy-content="','" data-tippy-placement="bottom">\n                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><path fill="none" d="M0 0h24v24H0z"/><path d="M3 4h18v2H3V4zm0 15h14v2H3v-2zm0-5h18v2H3v-2zm0-5h14v2H3V9z" fill="var(--text-editor-color)"/></svg>\n            </div>\n            <div @click=',' class="cl-po--swatch cl-po--swatch-button ','" data-tippy-content="','" data-tippy-placement="bottom">\n                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><path fill="none" d="M0 0h24v24H0z"/><path d="M3 4h18v2H3V4zm2 15h14v2H5v-2zm-2-5h18v2H3v-2zm2-5h14v2H5V9z" fill="var(--text-editor-color)"/></svg>\n            </div>\n            <div @click=',' class="cl-po--swatch cl-po--swatch-button ','" data-tippy-content="','" data-tippy-placement="bottom">\n                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><path fill="none" d="M0 0h24v24H0z"/><path d="M3 4h18v2H3V4zm4 15h14v2H7v-2zm-4-5h18v2H3v-2zm4-5h14v2H7V9z" fill="var(--text-editor-color)"/></svg>\n            </div>\n        </div>']);return Hi=function(){return t},t}function Ui(){var t=m([' \n        <div class="cl-po--editor-group cl-po--font-size">\n            <div @click=',' class="cl-po--swatch cl-po--swatch-button">\n                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><path fill="none" d="M0 0h24v24H0z"/><path d="M5 11h14v2H5z" fill="var(--text-editor-color)"/></svg>\n            </div>\n            <div class="cl-po--swatch cl-po--swatch-button icon" data-tippy-content="','" data-tippy-placement="bottom">\n                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><path fill="none" d="M0 0h24v24H0z"/><path d="M11.246 15H4.754l-2 5H.6L7 4h2l6.4 16h-2.154l-2-5zm-.8-2L8 6.885 5.554 13h4.892zM21 12.535V12h2v8h-2v-.535a4 4 0 1 1 0-6.93zM19 18a2 2 0 1 0 0-4 2 2 0 0 0 0 4z" fill="var(--text-editor-color)"/></svg>\n            </div>\n            <div @click=',' class="cl-po--swatch cl-po--swatch-button">\n                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><path fill="none" d="M0 0h24v24H0z"/><path d="M11 11V5h2v6h6v2h-6v6h-2v-6H5v-2z" fill="var(--text-editor-color)"/></svg>\n            </div>\n        </div>']);return Ui=function(){return t},t}function zi(){var t=m([' \n        <div class="cl-po--editor-group cl-po--font-color">\n            ',"\n            ","\n        </div>"]);return zi=function(){return t},t}function Wi(){var t=m(['\n            <div class="cl-po--font-color-input">\n            ',"\n              </div>"]);return Wi=function(){return t},t}function Yi(){var t=m(['\n         <input type="hidden" name="','" id="','" .value='," form=",'  />\n         <input type="date" class="cl-po--input ','" id="','-date" @change=',"\n            ?required="," min="," max=",">\n    "]);return Yi=function(){return t},t}function Xi(){var t=m(['\n    <input type="number" class="cl-po--input ','" id="','" name="','" .value='," @input=","\n     ?required="," min="," max="," placeholder=",' autocomplete="','" form=',">\n"]);return Xi=function(){return t},t}function Gi(){var t=m(['\n            <input type="hidden" name="','" id="','" value='," form=",' />\n            <div class="cl-po--dimension-container">\n                 <div class="cl-po--dimension-item">\n                     ','\n                     <div class="cl-po--input-group">\n                         <input type="text" class="cl-po--input ','" id="','-x" name="properties[_','_x]" .value='," @input=","\n                            ?required="," form=",">\n                         ",'\n                     </div>\n                 </div>\n                <div class="cl-po--dimension-item">\n                    ','\n                    <div class="cl-po--input-group">\n                        <input type="text" class="cl-po--input ','" id="','-y" name="properties[_','_y]" .value='," @input=","\n                         ?required="," form=",">\n                        ","\n                    </div>\n                </div>\n           </div>\n        "]);return Gi=function(){return t},t}function $i(){var t=m(['<label class="cl-po--label" for="','-x">',"</label>"]);return $i=function(){return t},t}function Qi(){var t=m(['<span class="cl-po--input cl-po--input-addon">',"</span>"]);return Qi=function(){return t},t}function Ji(){var t=m(['<label class="cl-po--label" for="','-y">',"</label>"]);return Ji=function(){return t},t}function Ki(){var t=m(['<span class="cl-po--input cl-po--input-addon">',"</span>"]);return Ki=function(){return t},t}function Zi(){var t=m(["\n    ","\n"]);return Zi=function(){return t},t}function tr(){var t=m(['\n     <input type="color" class="cl-po--input ','" id="','" name="','" .value='," @change=","\n     ?required="," minlength="," maxlength="," placeholder="," form=",">\n        "]);return tr=function(){return t},t}function er(){var t=m(['\n      <input type="text" class="cl-po--input ','" id="','" name="','" .value='," @change="," \n      ?required=",' pattern="#[0-9A-Fa-f]{6}" placeholder=',' autocomplete="','" form=',">\n"]);return er=function(){return t},t}function nr(){var t=m(['\n            <div class="cl-po--swatch-container">\n                <input type="hidden" name="','" id="','" value='," form="," />\n                ","\n            </div>\n        "]);return nr=function(){return t},t}function ir(){var t=m(['\n                    <label class="cl-po--swatch-item ',' ">\n                        <input type="checkbox" class="cl-po--input ','" id="',"-",'"  .value='," @change=","\n                               .checked="," form=",'>\n                        <div class="cl-po--swatch cl-po--swatch-color ','" style=',' data-tippy-content="','" data-tippy-placement="bottom">\n                        </div>\n                    </label>\n                    ',"\n                "]);return ir=function(){return t},t}function rr(){var t=m(['<div class="cl-po--break" data-index=',"></div>"]);return rr=function(){return t},t}function or(){var t=m(['\n            <div class="cl-po--swatch-container">\n            ',"\n            </div>\n        "]);return or=function(){return t},t}function ar(){var t=m(['\n                <label class="cl-po--swatch-item ','">\n                    <input type="radio" class="cl-po--input ','" id="',"-",'" name="','" .value='," @change=","\n                           .checked="," ?required="," form=",'>\n                    <div class="cl-po--swatch cl-po--swatch-color ','" style=',' data-tippy-content="','" data-tippy-placement="bottom"\n                         @click=',">\n                    </div>\n                </label>\n                ","\n            "]);return ar=function(){return t},t}function sr(){var t=m(['<div class="cl-po--break" data-index=',"></div>"]);return sr=function(){return t},t}function lr(){var t=m(['\n            <div class="cl-po--swatch-container">\n                <input type="hidden" name="','" id="','" value='," form="," />\n                ","\n            </div>\n        "]);return lr=function(){return t},t}function cr(){var t=m(['\n                    <label class="cl-po--swatch-item ','">\n                        <input type="checkbox" class="cl-po--input ','" id="',"-",'"  .value='," @change=","\n                               .checked="," form=",'>\n                        <div class="cl-po--swatch cl-po--swatch-img ','" data-tippy-content="','" data-tippy-placement="bottom">\n                            ',"\n                        </div>\n                        ","\n                    </label>\n                    ","\n                "]);return cr=function(){return t},t}function ur(){var t=m(['<img src="','" />']);return ur=function(){return t},t}function pr(){var t=m(['<span class="cl-po--swatch-text">',"</span>"]);return pr=function(){return t},t}function dr(){var t=m(['<div class="cl-po--break" data-index=',"></div>"]);return dr=function(){return t},t}function fr(){var t=m(['\n            <div class="cl-po--swatch-container">\n                ',"\n            </div>\n        "]);return fr=function(){return t},t}function hr(){var t=m(['\n                    <label class="cl-po--swatch-item ','">\n                        <input type="radio" class="cl-po--input ','" id="',"-",'" name="','" .value='," @change=","\n                               .checked="," ?required="," form=",'>\n                        <div class="cl-po--swatch cl-po--swatch-img  ','" data-tippy-content="','" data-tippy-placement="bottom"\n                             @click=',">\n                            ","\n                        </div>\n                        ","\n                    </label>\n                    ","\n                "]);return hr=function(){return t},t}function vr(){var t=m(['<img src="','" />']);return vr=function(){return t},t}function mr(){var t=m(['<span class="cl-po--swatch-text">',"</span>"]);return mr=function(){return t},t}function gr(){var t=m(['<div class="cl-po--break" data-index=',"></div>"]);return gr=function(){return t},t}function yr(){var t=m(['\n            <div class="cl-po--swatch-container">\n                <input type="hidden" name="','" id="','" value='," form="," />\n                ","\n            </div>\n        "]);return yr=function(){return t},t}function _r(){var t=m(['\n                    <label class="cl-po--swatch-item ','" >\n                        <input type="checkbox" class="cl-po--input ','" id="',"-",'" .value='," @change=","\n                               .checked="," form=",'>\n                        <div class="cl-po--swatch cl-po--swatch-button ','" style=',' data-tippy-content="','" data-tippy-placement="bottom">\n                            ',"\n                        </div>\n                    </label>\n                    ","\n                "]);return _r=function(){return t},t}function wr(){var t=m(['<div class="cl-po--break" data-index=',"></div>"]);return wr=function(){return t},t}function br(){var t=m(['\n            <div class="cl-po--swatch-container">\n                ',"\n            </div>\n          \n        "]);return br=function(){return t},t}function xr(){var t=m(['\n                    <label class="cl-po--swatch-item ','" >\n                        <input type="radio" class="cl-po--input ','" id="',"-",'" name="','" .value='," @change=","\n                               .checked="," ?required="," form=",'>\n                        <div class="cl-po--swatch cl-po--swatch-button ','" style=',' data-tippy-content="','" data-tippy-placement="bottom"\n                             @click=',">\n                            ","\n                        </div>\n                    </label>\n                    ","\n                "]);return xr=function(){return t},t}function kr(){var t=m(['<div class="cl-po--break" data-index=',"></div>"]);return kr=function(){return t},t}function Er(){var t=m(["\n    ","\n"]);return Er=function(){return t},t}function Cr(){var t=m(['\n        <label class="cl-po--radio-item" >\n            <input type="radio" class="cl-po--input ','" id="',"-",'" name="','" .value='," @change=","\n                   .checked="," ?required="," form=",">\n            ","\n        </label>\n    "]);return Cr=function(){return t},t}function Pr(){var t=m(['\n        <input type="hidden" name="','" id="','" value='," form="," />\n        ","\n    "]);return Pr=function(){return t},t}function Or(){var t=m(['\n        <label class="cl-po--checkbox-item" >\n            <input type="checkbox" class="cl-po--input ','" id="',"-",'" .value='," @change=","\n                   .checked="," form=",">\n            ","\n        </label>\n    "]);return Or=function(){return t},t}function Sr(){var t=m(['\n    <select class="cl-po--input ','" id="','" .value=',' name="','" @change='," ?required="," form=",">\n        ","\n        \n        ","\n    </select>\n"]);return Sr=function(){return t},t}function Tr(){var t=m(['\n           <option value="" selected></option>']);return Tr=function(){return t},t}function Lr(){var t=m(["            \n            <option .value="," ?selected="," > ","</option>\n        "]);return Lr=function(){return t},t}function Ir(){var t=m(['\n        <div class="cl-po--font-selector">\n            ',"\n        </div>\n    "]);return Ir=function(){return t},t}function Mr(){var t=m(['\n        <select class="cl-po--input ','" id="','" name="','" @change='," ?required="," form=",">\n        </select>\n    "]);return Mr=function(){return t},t}function Fr(){var t=m(['\n    <div class="cl-po--collapse ','" @click=',">",'</div>\n    <div class="cl-po--panel ','">\n        ',"\n    </div>\n"]);return Fr=function(){return t},t}function Ar(){var t=m(['\n            <div class="cl-po--group" >\n                ',"\n            </div>"]);return Ar=function(){return t},t}function Rr(){var t=m(["\n                    ","\n                "]);return Rr=function(){return t},t}function jr(){var t=m(["\n    ","\n"]);return jr=function(){return t},t}function Dr(){var t=m(['  \n        <div class="cl-po--upload ','">\n            <div class="cl-po--upload-wrap">\n                <label class="cl-po--input cl-po--upload-button">\n                 <input type="file" @change='," \n                    ?required="," ?multiple=","  accept="," >\n                 <span>","</span>\n                </label>\n                ",'\n            </div>\n            <progress class="cl-po--preview-progress" style="display:none;"></progress>\n            <div class="cl-po--upload-files">\n             ',"\n            </div>\n        </div>\n    "]);return Dr=function(){return t},t}function Nr(){var t=m(['\n                    <label class="cl-po--input cl-po--upload-button crop ','" @click=','>\n                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><path fill="none" d="M0 0h24v24H0z"/><path d="M15 17v2H6a1 1 0 0 1-1-1V7H2V5h3V2h2v15h8zm2 5V7H9V5h9a1 1 0 0 1 1 1v11h3v2h-3v3h-2z" /></svg>\n                        ',"\n                    </label>\n                "]);return Nr=function(){return t},t}function Vr(){var t=m(['<span class="cl-po--crop-label">',"</span>"]);return Vr=function(){return t},t}function qr(){var t=m(["\n                   <div>",' <span class="cl-po--remove" @click=',">&times;</span></div>\n             "]);return qr=function(){return t},t}function Br(){var t=m(['\n            <div class="cl-po--upload-lift ','">\n                <div class="cl-po--upload-lift-','"></div>\n                ',"\n            </div>"]);return Br=function(){return t},t}function Hr(){var t=m(['\n                    <label class="cl-po--input cl-po--upload-lift-crop" @click=','>\n                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="20" height="20"><path fill="none" d="M0 0h24v24H0z"/><path d="M15 17v2H6a1 1 0 0 1-1-1V7H2V5h3V2h2v15h8zm2 5V7H9V5h9a1 1 0 0 1 1 1v11h3v2h-3v3h-2z" /></svg>\n                    </label>\n                ']);return Hr=function(){return t},t}function Ur(){var t=m(["\n    ","\n"]);return Ur=function(){return t},t}function zr(){var t=m(["\n            \n             ","\n    "]);return zr=function(){return t},t}function Wr(){var t=m(['\n                 <div class="cl-po--option" data-option="','">\n                    ',"\n                    \n                    ","\n                     \n                    ","\n                     \n                    ","\n                   \n                </div>\n             "]);return Wr=function(){return t},t}function Yr(){var t=m(['\n                    <label class="cl-po--label" for="','">'," "," ","    ","</label>\n                    "]);return Yr=function(){return t},t}function Xr(){var t=m(['<span class="cl-po--value">&nbsp;',"</span>"]);return Xr=function(){return t},t}function Gr(){var t=m(['<span class="cl-po--price">&nbsp;',"</span>"]);return Gr=function(){return t},t}function $r(){var t=m(['<span class="cl-po--info" data-tippy-content="','"></span>']);return $r=function(){return t},t}function Qr(){var t=m(["\n                      ","\n                    "]);return Qr=function(){return t},t}function Jr(){var t=m(['\n                    <div class="cl-po--help">',"</div>\n                    "]);return Jr=function(){return t},t}function Kr(){var t=m(['\n                    <div class="cl-po--errors">\n                        ',"\n                    </div>\n                    "]);return Kr=function(){return t},t}function Zr(){var t=m(['\n                            <div class="cl-po--error" @click=',">","</div>\n                        "]);return Zr=function(){return t},t}function to(){var t=m(["<span></span>"]);return to=function(){return t},t}function eo(){var t=m(['\n<div class="cl-po--options">\n\n',' \n    \n    <input type="hidden" name="properties[_cl_options]" value='," form=",">\n</div>\n"]);return eo=function(){return t},t}function no(){var t=m(["\n        ","\n        \n        ","\n    "]);return no=function(){return t},t}function io(){var t=m(['  \n            <div class="cl-editor-mode">\n                <p data-live-price="','" ></p>\n                <button class="cl-po--swatch cl-po--swatch-button cl-po--small" @click="','">\n                    Add to cart (validation test)\n                </button>\n            </div>\n            ']);return io=function(){return t},t}ii=function(t){return t};var ro,oo,ao,so,lo,co,uo,po,fo,ho,vo,mo,go,yo,_o,wo,bo,xo,ko,Eo,Co,Po,Oo,So,To,Lo,Io,Mo,Fo,Ao,Ro,jo,Do,No,Vo,qo,Bo,Ho,Uo,zo,Wo,Yo,Xo,Go,$o,Qo,Jo,Ko,Zo,ta,ea,na,ia,ra,oa,aa,sa,la,ca,ua,pa,da,fa,ha,va,ma,ga,ya,_a,wa,ba,xa,ka,Ea=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"200x";return"small"===t?"100x":"medium"===t?"200x":"large"===t?"400x":e},Ca=function(t,e){if(function(t){return t&&-1!==t.indexOf("https://cdn.shopify.com/")}(t)){var n=t.substring(t.lastIndexOf(".")+1);return"svg"===n?t:t.replace("."+n,"")+"_"+e+"."+n}return t},Pa=function(t,e){if(t){var n={};for(var i in n.used=e.value.length,n.min=e.params.min?e.params.min:0,n.max=e.params.max?e.params.max:1e3,n.left=n.max-n.used,n)n.hasOwnProperty(i)&&(t=t.replace(new RegExp("{"+i+"}","g"),n[i]));return t}},Oa=function(t){return t?t.replace(/\\n/g,"\n"):t},Sa=function(t){return t.replace(/(<([^>]+)>)/gi,"")},Ta=function(t,e){return e?e.replace(new RegExp("{price}","g"),t):"(+ ".concat(t,")")},La=function(t){return t?t.text?t.text:t.value||"":""},Ia=function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=La(e);if(t.params.valuePriceText){var o=Ma(t,e,n);o&&(r+=" "+o)}return i&&(r=Sa(r)),r},Ma=function(t,e,n){if(e.price&&n)return Ta(Fa(t,e,n),t.params.priceTemplate)},Fa=function(t,e,n){if(e.price&&n){var i=e.price;return vi.currencyConvert&&!e.priceVariant&&(i=mi(i)),di(100*i,n)}return""},Aa=function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r="";if(t.params.imgTooltip&&(r+='<img src="'.concat(Ca(e.img,"600x"),'" style="max-width:100%;max-height:300px; display: block; margin:auto; margin-bottom:5px;" />').concat(r)),t.params.imgText||(r+=Ia(t,e,n,i)),""!==r.trim())return r},Ra={mode:"both",enter:{active:"cl-po--fade-enter-active",from:"cl-po--fade-enter-from",to:"cl-po--fade-enter-to"},leave:{active:"cl-po--fade-leave-active",from:"cl-po--fade-leave-from",to:"cl-po--fade-leave-to"},duration:500},ja=function(){var t=document.createElement("input");return t.type="color",t.value="!","color"===t.type&&"!"!==t.value},Da=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e["cl-po--invalid"]=t.errors&&t.errors.length>0,t._editor&&t._layer.params.collapse&&(e["cl-po--b-radius-0"]=!0),e},Na=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t.params.size?n["cl-po--"+t.params.size]=!0:e&&(n["cl-po--"+e]=!0),t.params.shape&&(n["cl-po--"+t.params.shape]=!0),n},Va=function(t,e,n,i){e.params.toggle&&e.value===n.value&&(t.preventDefault(),t.stopImmediatePropagation(),e.value="",i(e))},qa=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.params.minWidth&&t.params.minWidth>0&&(e.minWidth=t.params.minWidth+"px"),e},Ba=function(t,e){var n=t.params.debounce||300;return 0===n?e:E.debounced(n,e)},Ha=function(t){return t.params.name?t.params.name:"properties[".concat(t.name,"]")},Ua=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"noop";return t.params.autocomplete?t.params.autocomplete:e},za=function(t,e,n){return t.target.value&&("uppercase"===e.params.textTransform?t.target.value=t.target.value.toUpperCase():"lowercase"===e.params.textTransform&&(t.target.value=t.target.value.toLowerCase())),Wa(t,e,n)},Wa=function(t,e,n){return e.value=t.target.value,n(e)},Ya=function(t){var e=[];return t._layer.params.editor.font&&e.push("font:"+(t._editor.fontFamily||"")),t._layer.params.editor.style&&(e.push("weight:"+(t._editor.fontWeight||"normal")),e.push("style:"+(t._editor.fontStyle||"normal"))),t._layer.params.editor.align&&e.push("align:"+(t._editor.textAlign||"left")),t._layer.params.editor.size&&e.push("size:"+(t._editor.fontSize||"normal")),t._layer.params.editor.color&&e.push("color:"+(t._editor.color||"#000000")),e.join(",")},Xa=function(t,e,n){return{multiSelect:!0,onValidate:function(t){var e=t.value?t.value.split(",").length:0;return t.params.minSelect&&e<t.params.minSelect?(t.errors.push(S.get("product.options.validity.selectMin",{min:t.params.minSelect})),!1):t.params.maxSelect&&e>t.params.maxSelect?(t.errors.push(S.get("product.options.validity.selectMax",{max:t.params.maxSelect})),!1):!(t.required&&!t.value)||(t.errors.push(S.get("product.options.validity.valueMissing")),!1)},onChange:function(t,e){var i=document.querySelector("#"+e.id);if(i){for(var r=document.querySelectorAll('[id^="'+e.id+'"]'),o=[],a=0;a<r.length;a++){var s=r[a];s!==i&&s.checked&&o.push(s.value)}var l=o.join(",");i.value=l,e.value=l,n(e)}},isSelected:function(t,e){if(String(e.value).trim()===String(t.value).trim())return!0;if(t.value&&-1!==t.value.indexOf(e.value)&&-1!==t.value.split(",").indexOf(e.value))return!0;return!1}}};Ei.templates.hidden=function(t,e,n){return bt(Ds||(Ds=ii(Zn(),0,0,0,0)),t.id,Ha(t),jn(t.value),Rn(e.productFormLink))};var Ga=function(t){return bt(Vs||(Vs=ii(ti(),0)),t._layer.params.collapseLabel?bt(Ns||(Ns=ii(Ii(),0)),t._layer.params.collapseLabel):null)};Ei.templates.text=function(t,e,n){return bt(Hs||(Hs=ii(Mi(),0,0,0,0,0,0,0,0,0,0,0,0,0,0)),Tn(Da(t)),t.id,Ha(t),jn(t.value),Ba(t,(function(e){return za(e,t,n)})),t.required,Rn(t.params.min),Rn(t.params.max),Rn(t.params.pattern||void 0),Rn(t.params.placeholder),Ua(t),Rn(e.productFormLink),In({textTransform:t.params.textTransform}),t._editor?t._layer.params.collapse?bt(qs||(qs=ii(Fi(),0)),Qa(Ga(t),Ei.templates.text_editor(t,e,n),!1,"cl-po--edit")):bt(Bs||(Bs=ii(Ai(),0)),Ei.templates.text_editor(t,e,n)):null)},Ei.templates.textarea=function(t,e,n){return bt(Is||(Is=ii(Ri(),0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)),Tn(Da(t)),t.id,Ha(t),jn(Oa(t.value)),Ba(t,(function(e){return za(e,t,n)})),t.params.textUsage?function(e){return function(t,e){var n=t.target;if(n){var i=n.parentNode.querySelector(".cl-po--text-help");i&&(e.value=n.value,i.innerHTML=Pa(e.params.textHelp,e))}}(e,t)}:null,t.required,Rn(t.params.min),Rn(t.params.max),Rn(t.params.rows),Rn(Oa(t.params.placeholder)),In({textTransform:t.params.textTransform}),Ua(t),Rn(e.productFormLink),t._editor?t._layer.params.collapse?bt(Ss||(Ss=ii(ji(),0)),Qa(Ga(t),Ei.templates.text_editor(t,e,n),!1,"cl-po--edit")):bt(Ts||(Ts=ii(Di(),0)),Ei.templates.text_editor(t,e,n)):null,t.params.textUsage?bt(Ls||(Ls=ii(Ni()))):null)},Ei.templates.text_editor=function(t,e,n){return bt(uo||(uo=ii(Vi(),0,0,0,0,0,0)),Ei.templates.hidden({id:t.id+"_editor",name:"_"+t.name+"_editor",params:{},value:Ya(t)},e),t._layer.params.editor.font?bt(ro||(ro=ii(qi(),0)),Ei.templates.font({id:t.id+"_font",name:t.name+"_font",params:{name:t.name+"_font"},value:t._editor.fontFamily},e,(function(e){t._editor.fontFamily=e.value,n(t)}))):null,t._layer.params.editor.style?bt(oo||(oo=ii(Bi(),0,0,0,0,0,0)),(function(e){t._editor.fontWeight="bold"===t._editor.fontWeight?"normal":"bold",n(t)}),"bold"===t._editor.fontWeight?"selected":"",S.get("product.options.text.style.bold"),(function(e){t._editor.fontStyle="italic"===t._editor.fontStyle?"normal":"italic",n(t)}),"italic"===t._editor.fontStyle?"selected":"",S.get("product.options.text.style.italic")):null,t._layer.params.editor.align?bt(ao||(ao=ii(Hi(),0,0,0,0,0,0,0,0,0)),(function(e){t._editor.textAlign="left",n(t)}),"left"===t._editor.textAlign?"selected":"",S.get("product.options.text.align.left"),(function(e){t._editor.textAlign="center",n(t)}),"center"===t._editor.textAlign?"selected":"",S.get("product.options.text.align.center"),(function(e){t._editor.textAlign="right",n(t)}),"right"===t._editor.textAlign?"selected":"",S.get("product.options.text.align.right")):null,t._layer.params.editor.size?bt(so||(so=ii(Ui(),0,0,0)),(function(e){t._editor.fontSize-=t._layer.params.fontSizeStep||1,n(t)}),S.get("product.options.text.fontSize"),(function(e){t._editor.fontSize+=t._layer.params.fontSizeStep||1,n(t)})):null,t._layer.params.editor.color?bt(co||(co=ii(zi(),0,0)),Ei.templates.color({id:t.id+"_color",name:t.name+"_color",params:{name:t.name+"_color"},value:t._editor.color||"#000000"},e,(function(e){t._editor.color=e.value,n(t)})),ja()?bt(lo||(lo=ii(Wi(),0)),Ei.templates.color_input({id:t.id+"_color",name:t.name+"_color",params:{name:t.name+"_color"},value:t._editor.color||"#000000"},e,(function(e){t._editor.color=e.value,n(t)}))):null):null)},Ei.templates.date=function(t,e,n){var i=void 0===t._controller;if(t._controller=t._controller||{setup:function(){var n;if(t._controller.native=((n=document.createElement("input")).setAttribute("type","date"),n.setAttribute("value","a"),"a"!==n.value),t._controller.native)t._controller.ready=Promise.resolve();else{var i=[e.assets+"/static/lib/dateinput/dateinput.min.js"];t._controller.ready=Ti.loadOnce(i,"option-date",{async:!1})}},onValidate:function(){var e=t._controller.dateEl,n=e.checkValidity(),i=!1,r=!1;if(n&&!t._controller.native){if(e.min){var o=new Date(e.min+"T00:00:00");e.valueAsDate<o&&(n=!1,i=!0)}if(e.max){var a=new Date(e.max+"T00:00:00");e.valueAsDate>a&&(n=!1,r=!0)}}if(!n){if(e.validity.rangeUnderflow||i){var s=e.min,l=new Date(s+"T00:00:00");l.setDate(l.getDate()-1),s=t._controller.format(l,t.params.dateFormat||"yyyy-mm-dd"),t.errors.push(S.get("product.options.validity.dateMin",{min:s}))}else if(e.validity.rangeOverflow||r){var c=e.max,u=new Date(c+"T00:00:00");u.setDate(u.getDate()+1),c=t._controller.format(u,t.params.dateFormat||"yyyy-mm-dd"),t.errors.push(S.get("product.options.validity.dateMax",{max:c}))}else t.errors.push(S.get("product.options.validity.valueMissing"));return!1}return!0},onChange:function(t,e){e._controller.mapDateValue(),n(e)},mapDateValue:function(){t._controller.dateEl.value?t.params.dateFormat?t._controller.el.value=t._controller.format(t._controller.dateEl.valueAsDate,t.params.dateFormat):t._controller.el.value=t._controller.dateEl.value:t._controller.el.value="",t.value=t._controller.el.value},mapOptionValue:function(){if(t.value&&t.value!==t._controller.el.value){var e,n,i=t.params.dateFormat;if(i&&"yyyy-mm-dd"!==i){if(-1!==i.indexOf("/")?n=i.startsWith("yyyy")?/(?<year>\d{4})\/(?<month>\d{2})\/(?<day>\d{2})/:/(?<day>\d{2})\/(?<month>\d{2})\/(?<year>\d{4})/:-1!==i.indexOf(".")&&(n=i.startsWith("dd")?/(?<day>\d{2})\.(?<month>\d{2})\.(?<year>\d{4})/:/(?<month>\d{2})\.(?<day>\d{2})\.(?<year>\d{4})/),n){var r=n.exec(t.value);r&&(e=new Date(r.groups.year,r.groups.month-1,r.groups.day))}}else e=new Date(t.value+"T00:00:00");if(e)return t._controller.dateEl.valueAsDate=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate())),!0}return!1},format:function(t,e){return e=(e=(e=e.replace("yyyy",t.getFullYear())).replace("mm",("0"+(t.getMonth()+1)).slice(-2))).replace("dd",("0"+t.getDate()).slice(-2))},init:function(t,e){e&&(t._controller.options=e),t._controller.ready.then((function(){if(t._controller.el=document.querySelector("#"+t.id),t._controller.dateEl=document.querySelector("#"+t.id+"-date"),!t._controller.native){if(window.navigator&&window.navigator.language){var e=navigator.language,n=e.substr(0,2);t._controller.dateEl.setAttribute("lang",e),"en"!==n&&t._controller.dateEl.setAttribute("data-first-day","mo")}t.params.dateFormat&&t._controller.dateEl.setAttribute("data-date-format",t.params.dateFormat)}t._controller.mapOptionValue(),t._controller.initMinMax(t)}))},initMinMax:function(t){var i=!isNaN(t.params.maxDays)&&null!=t.params.maxDays,r=!isNaN(t.params.minDays)&&null!=t.params.minDays;if(r||i){var o=function(e){i&&function(e){if(e.setDate(e.getDate()+t.params.maxDays),t.params.maxDate){var n=new Date(t.params.maxDate+"T00:00:00");e>n&&(e=n)}t._controller.dateEl.max=t._controller.format(e,"yyyy-mm-dd"),t._controller.dateEl.valueAsDate&&t._controller.dateEl.valueAsDate>e&&(t._controller.dateEl.valueAsDate=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate())),t._controller.mapDateValue())}(new Date(e.getTime())),r&&function(e){if(e.setDate(e.getDate()+t.params.minDays),t.params.minDate){var n=new Date(t.params.minDate+"T00:00:00");e<n&&(e=n)}t._controller.dateEl.min=t._controller.format(e,"yyyy-mm-dd"),(!t.value||t._controller.dateEl.valueAsDate&&t._controller.dateEl.valueAsDate<e)&&(t._controller.dateEl.valueAsDate=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate())),t._controller.mapDateValue())}(new Date(e.getTime()))},a=new Date;if(t.params.optionDate){if(t._controller.options)for(var s=0;s<t._controller.options.length;s++){var l=t._controller.options[s];if(l.name===t.params.optionDate&&l._controller&&l._controller.dateEl){a=l._controller.dateEl.valueAsDate;break}}t._controller.optionChanged&&e.productForm.removeEventListener("option:changed",t._controller.optionChanged),t._controller.optionChanged=function(e){var i=e.detail;i.name===t.params.optionDate&&i._controller&&i._controller.dateEl&&(o(i._controller.dateEl.valueAsDate),n(t))},e.productForm.addEventListener("option:changed",t._controller.optionChanged)}o(a)}else if(t._controller.dateEl.min){var c=new Date(t._controller.dateEl.min+"T00:00:00");(!t.value||t._controller.dateEl.valueAsDate&&t._controller.dateEl.valueAsDate<c)&&(t._controller.dateEl.valueAsDate=new Date(Date.UTC(c.getFullYear(),c.getMonth(),c.getDate())),t._controller.mapDateValue())}}},e.productForm)if(i){t._controller.setup();var r=function(n){var i=n.detail;e.productForm.removeEventListener("options:rendered",r),t._controller.init(t,i.config.options)};e.productForm.addEventListener("options:rendered",r)}else e.editorMode?t._controller.init(t):t._controller.mapOptionValue()&&t._controller.initMinMax(t);return bt(po||(po=ii(Yi(),0,0,0,0,0,0,0,0,0,0)),Ha(t),t.id,jn(t.value),Rn(e.productFormLink),Tn(Da(t)),t.id,(function(e){return t._controller.onChange(e,t)}),t.required,Rn(null!=t.params.minDate?t.params.minDate:void 0),Rn(null!=t.params.maxDate?t.params.maxDate:void 0))},Ei.templates.number=function(t,e,n){return bt(fo||(fo=ii(Xi(),0,0,0,0,0,0,0,0,0,0,0)),Tn(Da(t)),t.id,Ha(t),jn(t.value),Ba(t,(function(e){return Wa(e,t,n)})),t.required,Rn(t.params.min),Rn(t.params.max),Rn(t.params.placeholder),Ua(t),Rn(e.productFormLink))},Ei.templates.dimension=function(t,e,n){var i=void 0===t._controller;if(t._controller=t._controller||{x:0,y:0,xInput:"",yInput:"",xEl:null,yEl:null,onValidate:function(t){return t.required&&!t.value?(t.errors.push(S.get("product.options.validity.valueMissing")),!1):(t._controller.validateDimension(t,t.errors),!t.errors.length)},validateDimension:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=t._controller.x,o=t._controller.y;if(t.params.bigX&&r<o){var a=r;r=o,o=a}var s=function(t){return t&&"#"===t[0]?t.substring(1):t};!n&&t.params.minX&&r<t.params.minX&&e.push(S.get(s(t.params.minXKey)||"{label} must be at least {min} {addon}",{label:t.params.labelX,min:t.params.minX,addon:t.params.addonX})),!i&&t.params.minY&&o<t.params.minY&&e.push(S.get(s(t.params.minYKey)||"{label} must be at least {min} {addon}",{label:t.params.labelY,min:t.params.minY,addon:t.params.addonY})),t.params.maxX&&r>t.params.maxX&&e.push(S.get(s(t.params.maxXKey)||"{label} must be at most {max} {addon}",{label:t.params.labelX,max:t.params.maxX,addon:t.params.addonX})),t.params.maxY&&o>t.params.maxY&&e.push(S.get(s(t.params.maxYKey)||"{label} must be at most {max} {addon}",{label:t.params.labelY,max:t.params.maxY,addon:t.params.addonY}))},optionValue:function(t){return(t.params.valueTemplate||"{x}x{y}").replace(new RegExp("{x}","g"),t._controller.x).replace(new RegExp("{y}","g"),t._controller.y).replace(new RegExp("{area}","g"),t._controller.area.toFixed(2))},onChange:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e._controller;if(i||(r.xEl=r.xEl||document.querySelector("#"+e.id+"-x"),r.yEl=r.yEl||document.querySelector("#"+e.id+"-y"),r.xInput=r.xEl.value,r.yInput=r.yEl.value),r.x=parseFloat(r.xInput)||0,r.y=parseFloat(r.yInput)||0,isNaN(e.params.rounding)||null===e.params.rounding||(0!==r.x&&(r.xInput=r.x.toFixed(e.params.rounding),r.x=parseFloat(r.xInput)),0!==r.y&&(r.yInput=r.y.toFixed(e.params.rounding),r.y=parseFloat(r.yInput))),e.params.areaCalc){var o=e.params.areaCalc.replace(new RegExp("{x}","g"),r.x).replace(new RegExp("{y}","g"),r.y);try{r.area=Function('"use strict";return ('+o+")")(),r.area||(r.area=0)}catch(t){P.error("failed to calculate area with areaCalc: ",o,t)}}else r.area=r.x*r.y;if(r.errors=[],r.validateDimension(e,r.errors,!r.xInput,!r.yInput),e.value=r.optionValue(e),e.params.priceFormula){e.values||(e.values=[]);var a=e.params.priceFormula.replace(new RegExp("{x}","g"),r.x).replace(new RegExp("{y}","g"),r.y).replace(new RegExp("{area}","g"),r.area),s=0;try{(s=Function('"use strict";'+a)())||(s=0)}catch(t){P.error("failed to calculate price with priceFormula: ",a,t)}var l={value:e.value,text:"",price:s,_calc:!0};e.values.length&&e.values[0]._calc?e.values[0]=l:e.values.unshift(l)}n(e)},restore:function(t){if(t.value&&t.value!==t._controller.optionValue(t)){var e=(t.params.valueTemplate||"{x}x{y}").replace(".","\\.").replace("*","\\*").replace(new RegExp("{x}","g"),"(?<x>.*)").replace(new RegExp("{y}","g"),"(?<y>.*)").replace(new RegExp("{area}","g"),"(?<area>.*)"),n=new RegExp(e,"g").exec(t.value);n&&n.groups&&(void 0!==n.groups.x&&(t._controller.xInput=n.groups.x),void 0!==n.groups.y&&(t._controller.yInput=n.groups.y),t._controller.onChange(null,t,!0))}},init:function(t,e){t.params.valueX&&(t._controller.xInput=String(t.params.valueX)),t.params.valueY&&(t._controller.yInput=String(t.params.valueY)),(t._controller.xInput||t._controller.yInput)&&t._controller.onChange(null,t,!0)}},i){var r=function(){e.productForm.removeEventListener("options:rendered",r),t._controller.init(t)};e.productForm.addEventListener("options:rendered",r)}else t.value&&!t._controller.xEl&&t._controller.restore(t),t._controller.errors&&t._controller.errors.length&&(t.errors=t._controller.errors);return bt(yo||(yo=ii(Gi(),0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)),Ha(t),t.id,t.value,Rn(e.productFormLink),t.params.labelX?bt(ho||(ho=ii($i(),0,0)),t.id,t.params.labelX):null,Tn(Da(t)),t.id,t.name,jn(t._controller.xInput),Ba(t,(function(e){return t._controller.onChange(e,t)})),t.required,Rn(e.productFormLink),t.params.addonX?bt(vo||(vo=ii(Qi(),0)),t.params.addonX):null,t.params.labelY?bt(mo||(mo=ii(Ji(),0,0)),t.id,t.params.labelY):null,Tn(Da(t)),t.id,t.name,jn(t._controller.yInput),Ba(t,(function(e){return t._controller.onChange(e,t)})),t.required,Rn(e.productFormLink),t.params.addonY?bt(go||(go=ii(Ki(),0)),t.params.addonY):null)},Ei.templates.color=function(t,e,n){return bt(wo||(wo=ii(Zi(),0)),ja()?bt(_o||(_o=ii(tr(),0,0,0,0,0,0,0,0,0,0)),Tn(Da(t)),t.id,Ha(t),jn(t.value),(function(e){return Wa(e,t,n)}),t.required,Rn(t.params.min),Rn(t.params.max),Rn(t.params.placeholder),Rn(e.productFormLink)):Ei.templates.color_input(t,e,n))},Ei.templates.color_input=function(t,e,n){return bt(bo||(bo=ii(er(),0,0,0,0,0,0,0,0,0)),Tn(Da(t)),t.id,Ha(t),jn(t.value),(function(e){return Wa(e,t,n)}),t.required,Rn(t.params.placeholder),Ua(t,"color"),Rn(e.productFormLink))},Ei.templates["color-swatch"]=function(t,e,n){return t.params.multiSelect?(t._controller=t._controller||Xa(0,0,n),bt(Eo||(Eo=ii(nr(),0,0,0,0,0)),Ha(t),t.id,t.value,Rn(e.productFormLink),Pn(t.values||[],(function(n,i){return bt(ko||(ko=ii(ir(),0,0,0,0,0,0,0,0,0,0,0,0)),Tn({grow:t.params.grow}),Tn(Da(t)),t.id,i,n.value,(function(e){return t._controller.onChange(e,t)}),jn(t._controller.isSelected(t,n)),Rn(e.productFormLink),Tn(Na(t,"small")),In({backgroundColor:n.color}),Ia(t,n,vi.moneyFormat),t.params.items&&(i+1)%t.params.items==0?bt(xo||(xo=ii(rr(),0)),i):null)})))):bt(Oo||(Oo=ii(or(),0)),Pn(t.values||[],(function(i,r){return bt(Po||(Po=ii(ar(),0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)),Tn({grow:t.params.grow}),Tn(Da(t)),t.id,r,Ha(t),i.value,(function(e){return Wa(e,t,n)}),jn(t.value==i.value),t.required,Rn(e.productFormLink),Tn(Na(t,"small")),In({backgroundColor:i.color}),Ia(t,i,vi.moneyFormat),(function(e){return Va(e,t,i,n)}),t.params.items&&(r+1)%t.params.items==0?bt(Co||(Co=ii(sr(),0)),r):null)})))},Ei.templates["color-img-swatch"]=function(t,e,n){return Ei.templates["img-swatch"](t,e,n)},Ei.templates["img-swatch"]=function(t,e,n){return t.params.multiSelect?(t._controller=t._controller||Xa(0,0,n),bt(Mo||(Mo=ii(lr(),0,0,0,0,0)),Ha(t),t.id,t.value,Rn(e.productFormLink),Pn(t.values||[],(function(n,i){return bt(Io||(Io=ii(cr(),0,0,0,0,0,0,0,0,0,0,0,0,0)),Tn({grow:t.params.grow}),Tn(Da(t)),t.id,i,n.value,(function(e){return t._controller.onChange(e,t)}),jn(t._controller.isSelected(t,n)),Rn(e.productFormLink),Tn(Na(t,"large")),Rn(Aa(t,n,vi.moneyFormat)),n.img?bt(So||(So=ii(ur(),0)),Ca(n.img,Ea(t.params.size||"large"))):null,t.params.imgText?bt(To||(To=ii(pr(),0)),yn(Ia(t,n,vi.moneyFormat))):null,t.params.items&&(i+1)%t.params.items==0?bt(Lo||(Lo=ii(dr(),0)),i):null)})))):bt(Do||(Do=ii(fr(),0)),Pn(t.values||[],(function(i,r){return bt(jo||(jo=ii(hr(),0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)),Tn({grow:t.params.grow}),Tn(Da(t)),t.id,r,Ha(t),i.value,(function(e){return Wa(e,t,n)}),jn(t.value==i.value),t.required,Rn(e.productFormLink),Tn(Na(t,"large")),Rn(Aa(t,i,vi.moneyFormat)),(function(e){return Va(e,t,i,n)}),i.img?bt(Fo||(Fo=ii(vr(),0)),Ca(i.img,Ea(t.params.size||"large"))):null,t.params.imgText?bt(Ao||(Ao=ii(mr(),0)),yn(Ia(t,i,vi.moneyFormat))):null,t.params.items&&(r+1)%t.params.items==0?bt(Ro||(Ro=ii(gr(),0)),r):null)})))},Ei.templates["button-swatch"]=function(t,e,n){return t.params.multiSelect?(t._controller=t._controller||Xa(0,0,n),bt(qo||(qo=ii(yr(),0,0,0,0,0)),Ha(t),t.id,t.value,Rn(e.productFormLink),Pn(t.values||[],(function(n,i){return bt(Vo||(Vo=ii(_r(),0,0,0,0,0,0,0,0,0,0,0,0,0)),Tn({grow:t.params.grow}),Tn(Da(t)),t.id,i,n.value,(function(e){return t._controller.onChange(e,t)}),jn(t._controller.isSelected(t,n)),Rn(e.productFormLink),Tn(Na(t,"small")),In(qa(t)),Rn(t.params.valuePriceTooltip?Ma(t,n,vi.moneyFormat):void 0),yn(Ia(t,n,vi.moneyFormat)),t.params.items&&(i+1)%t.params.items==0?bt(No||(No=ii(wr(),0)),i):null)})))):bt(Uo||(Uo=ii(br(),0)),Pn(t.values||[],(function(i,r){return bt(Ho||(Ho=ii(xr(),0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)),Tn({grow:t.params.grow}),Tn(Da(t)),t.id,r,Ha(t),i.value,(function(e){return Wa(e,t,n)}),jn(t.value==i.value),t.required,Rn(e.productFormLink),Tn(Na(t,"small")),In(qa(t)),Rn(t.params.valuePriceTooltip?Ma(t,i,vi.moneyFormat):void 0),(function(e){return Va(e,t,i,n)}),yn(Ia(t,i,vi.moneyFormat)),t.params.items&&(r+1)%t.params.items==0?bt(Bo||(Bo=ii(kr(),0)),r):null)})))},Ei.templates.radio=function(t,e,n){return bt(Wo||(Wo=ii(Er(),0)),Pn(t.values||[],(function(i,r){return bt(zo||(zo=ii(Cr(),0,0,0,0,0,0,0,0,0,0)),Tn(Da(t)),t.id,r,Ha(t),i.value,(function(e){return Wa(e,t,n)}),jn(t.value==i.value),t.required,Rn(e.productFormLink),yn(Ia(t,i,vi.moneyFormat)))})))},Ei.templates.checkbox=function(t,e,n){return t._controller=t._controller||Xa(0,0,n),bt(Xo||(Xo=ii(Pr(),0,0,0,0,0)),Ha(t),t.id,t.value,Rn(e.productFormLink),Pn(t.values||[],(function(n,i){return bt(Yo||(Yo=ii(Or(),0,0,0,0,0,0,0,0)),Tn(Da(t)),t.id,i,n.value,(function(e){return t._controller.onChange(e,t)}),jn(t._controller.isSelected(t,n)),Rn(e.productFormLink),yn(Ia(t,n,vi.moneyFormat)))})))},Ei.templates.select=function(t,e,n){return bt(Qo||(Qo=ii(Sr(),0,0,0,0,0,0,0,0,0)),Tn(Da(t)),t.id,jn(t.value),Ha(t),(function(e){return Wa(e,t,n)}),t.required,Rn(e.productFormLink),t.value?null:bt(Go||(Go=ii(Tr()))),Pn(t.values||[],(function(e,n){return bt($o||($o=ii(Lr(),0,0,0)),e.value,t.value==e.value,Ia(t,e,vi.moneyFormat,!0))})))},Ei.templates.font=function(t,e,n){var i;i=t.params.fontFamilies&&t.params.fontFamilies.length?t.params.fontFamilies:I.fonts.map((function(t){return t.name})),t.values=i.map((function(t){return{value:t,text:" ",img:I.fontPreview(t)}}));var r="dropdown";return t.params.fontSwatch&&(t.params.grow=!0,t.params.items=t.params.fontSwatchItems||3,r="img-swatch"),bt(Jo||(Jo=ii(Ir(),0)),Ei.templates[r](t,e,n))},Ei.templates.dropdown=function(t,e,n){var i=void 0===t._controller;if(t._controller=t._controller||{setup:function(){var n=[e.assets+"/static/lib/choicesjs/choices.min.css",e.assets+"/static/lib/choicesjs/choices.min.js"];t._controller.ready=Ti.loadOnce(n,"option-dropdown",{async:!1})},mapValues:function(t){var e=t.values?t.values.map((function(e){return{value:e.value,label:Ia(t,e,vi.moneyFormat),customProperties:e.img,selected:t.value==e.value}})):[];return t.value||e.unshift({value:"",label:"",selected:!0}),e},init:function(t){t._controller.ready.then((function(){t._controller.selectEl=document.querySelector("#"+t.id);var e=function(t){var e='<span class="o--text">'.concat(t.label,"</span>");return t.customProperties?'<img src="'.concat(Ca(t.customProperties,"200x"),'" class="o--img"/> ').concat(e):e};t._controller.instance=new Choices(t._controller.selectEl,{choices:t._controller.mapValues(t),itemSelectText:"",searchEnabled:!1,searchChoices:!1,shouldSort:!1,callbackOnCreateTemplates:function(t){var n=this;return{item:function(t,i,r){var o=Choices.defaults.templates.item.apply(n,[t,i,r]);return o.innerHTML=e(i),o},choice:function(t,i,r){var o=Choices.defaults.templates.choice.apply(n,[t,i,r]);return o.innerHTML=e(i),o}}}})}))},updateChoices:function(t){t._controller.instance&&t._controller.instance.setChoices(t._controller.mapValues(t),"value","label",!0)},update:function(t){t._controller.instance&&t._controller.selectEl&&t.value!==t._controller.selectEl.value&&t._controller.instance.setChoiceByValue(t.value)}},e.productForm)if(i){t._controller.setup();var r=function(){e.productForm.removeEventListener("options:rendered",r),t._controller.init(t)};e.productForm.addEventListener("options:rendered",r)}else e.editorMode?t._controller.updateChoices(t):t._controller.update(t);return bt(Ko||(Ko=ii(Mr(),0,0,0,0,0,0)),Tn(Da(t)),t.id,Ha(t),(function(e){return Wa(e,t,n)}),t.required,Rn(e.productFormLink))};var $a=function(t){var e=t.currentTarget,n=-1!==e.className.indexOf("open"),i=e.nextElementSibling;n||(i.style.maxHeight=i.scrollHeight+100+"px",setTimeout((function(){i.style.maxHeight&&(i.style.maxHeight=null)}),500)),e.classList.toggle("cl-po--open")},Qa=function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return bt(Zo||(Zo=ii(Fr(),0,0,0,0,0)),n?i+" cl-po--open":i,(function(t){return $a(t)}),t,i,e)};Ei.templates.group=function(t,e,n,i){var r=bt(ea||(ea=ii(Ar(),0)),t.options&&t.options.length>0?bt(ta||(ta=ii(Rr(),0)),Ja(t.options,e,n,i)):null);return t.params.collapse?Qa(yn(t.params.collapseLabel),r,t.params.collapseOpen):r},Ei.templates.html=function(t,e,n){return bt(na||(na=ii(jr(),0)),yn(t.params.html))},Ei.templates.upload=function(t,e,n){var i=void 0===t._controller;return t._controller=t._controller||Li.getInstance().controller(),i||t._controller.update(t,e.productForm),bt(aa||(aa=ii(Dr(),0,0,0,0,0,0,0,0)),Tn(Da(t)),(function(i){return t._controller.onChange(i,t,e.productForm,n)}),t.required,t.params.multiple,Rn(t.params.accept),Rn(t.params.button||"Choose file"),t.value&&t._layer&&t._layer.params.crop?bt(ra||(ra=ii(Nr(),0,0,0)),Tn({"has-label":t._layer.params.cropLabel}),(function(n){return t._controller.crop(t,e.productForm)}),t._layer.params.cropLabel?bt(ia||(ia=ii(Vr(),0)),t._layer.params.cropLabel):null):null,Pn(t._controller.files,(function(i){return bt(oa||(oa=ii(qr(),0,0)),i.name,(function(r){return t._controller.remove(t,e.productForm,i,n)}))})))},Ei.templates["upload-lift"]=function(t,e,n){if(t.params.uuid){t._controller&&(t._controller.field&&t._controller.field.config.uuid!==t.params.uuid?(t._controller.field.destroy(),delete t._controller):e.editorMode&&!t._controller.field&&delete t._controller);var i=void 0===t._controller;return t._controller=t._controller||Li.getInstance().controllerLift(t,e.product,e.productForm,n),i||t._controller.update(t,e.productForm),t._controller.option=t,bt(la||(la=ii(Br(),0,0,0)),Tn(Da(t)),t.id,t.value&&t._layer&&t._layer.params.crop?bt(sa||(sa=ii(Hr(),0)),(function(n){return t._controller.crop(t,e.productForm)})):null)}return null};var Ja=function(t,e,n,i){return bt(wa||(wa=ii(Ur(),0)),Pn(t,(function(t){return t.name}),(function(t,r){return bt(_a||(_a=ii(zr(),0)),Fn(t.visible?bt(ya||(ya=ii(Wr(),0,0,0,0,0)),t.name,t.label?bt(da||(da=ii(Yr(),0,0,0,0,0)),t.id,yn(t.label),t.value&&t.params.labelValueText?bt(ca||(ca=ii(Xr(),0)),La(function(t){if(t.values){for(var e=0;e<t.values.length;e++){var n=t.values[e];if(n.value==t.value)return n}return null}}(t))):null,t._priceText?bt(ua||(ua=ii(Gr(),0)),yn(Ta(t._priceText,t.params.priceTemplate))):null,t.params.info?bt(pa||(pa=ii($r(),0)),t.params.info):null):null,Ei.templates[t.type]?bt(fa||(fa=ii(Qr(),0)),Ei.templates[t.type](t,e,n,i)):null,t.params.help?bt(ha||(ha=ii(Jr(),0)),yn(t.params.help)):null,pi(t.errors&&t.errors.length>0?$n(bt(ma||(ma=ii(Kr(),0)),Pn(t.errors,(function(e,n){return bt(va||(va=ii(Zr(),0,0)),(function(n){return i(n,t,e)}),e)}))),"".concat(t.id,"-errors")):$n(bt(ga||(ga=ii(to()))),"noop"),Ra)):null))})))},Ka=function(t,e,n,i,r){return bt(ka||(ka=ii(eo(),0,0,0)),t.length>0?bt(xa||(xa=ii(no(),0,0)),Ja(t,e,n,i),e.editorMode?bt(ba||(ba=ii(io(),0,0)),e.product.id,(function(t){return r(t)})):null):null,e.uuid,Rn(e.productFormLink))},Za={};function Zn(){var t=m(['\n<div class="cl-po--preview"> \n    <canvas class="cl-po--canvas"></canvas>\n</div>\n']);return Zn=function(){return t},t}!function(t){var e=t.HTMLCanvasElement&&t.HTMLCanvasElement.prototype,n=t.Blob&&function(){try{return Boolean(new Blob)}catch(t){return!1}}(),i=n&&t.Uint8Array&&function(){try{return 100===new Blob([new Uint8Array(100)]).size}catch(t){return!1}}(),r=t.BlobBuilder||t.WebKitBlobBuilder||t.MozBlobBuilder||t.MSBlobBuilder,o=/^data:((.*?)(;charset=.*?)?)(;base64)?,/,a=(n||r)&&t.atob&&t.ArrayBuffer&&t.Uint8Array&&function(t){var e,a,s,l,c,u,p,d,f;if(!(e=t.match(o)))throw new Error("invalid data URI");for(a=e[2]?e[1]:"text/plain"+(e[3]||";charset=US-ASCII"),s=!!e[4],l=t.slice(e[0].length),c=s?atob(l):decodeURIComponent(l),u=new ArrayBuffer(c.length),p=new Uint8Array(u),d=0;d<c.length;d+=1)p[d]=c.charCodeAt(d);return n?new Blob([i?p:u],{type:a}):((f=new r).append(u),f.getBlob(a))};t.HTMLCanvasElement&&!e.toBlob&&(e.mozGetAsFile?e.toBlob=function(t,n,i){var r=this;setTimeout((function(){i&&e.toDataURL&&a?t(a(r.toDataURL(n,i))):t(r.mozGetAsFile("blob",n))}))}:e.toDataURL&&a&&(e.msToBlob?e.toBlob=function(t,n,i){var r=this;setTimeout((function(){(n&&"image/png"!==n||i)&&e.toDataURL&&a?t(a(r.toDataURL(n,i))):t(r.msToBlob(n))}))}:e.toBlob=function(t,e,n){var i=this;setTimeout((function(){t(a(i.toDataURL(e,n)))}))})),"function"==typeof define&&define.amd?define((function(){return a})):Za?Za=a:t.dataURLtoBlob=a}(window);ii=function(t){return t};var ts=function(t,e){return bt(Ds||(Ds=ii(Zn())))};function Zn(){var t=m(['\n<div class="cl-po--preview-crop">\n    <button type="button" @click=','>\n        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="30" height="30"><path d="M12 10.586l4.95-4.95 1.414 1.414-4.95 4.95 4.95 4.95-1.414 1.414-4.95-4.95-4.95 4.95-1.414-1.414 4.95-4.95-4.95-4.95L7.05 5.636z"/></svg>\n    </button>\n    <div>\n        <button type="button" @click=',' >\n            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="30" height="30"><path d="M18.031 16.617l4.283 4.282-1.415 1.415-4.282-4.283A8.96 8.96 0 0 1 11 20c-4.968 0-9-4.032-9-9s4.032-9 9-9 9 4.032 9 9a8.96 8.96 0 0 1-1.969 5.617zm-2.006-.742A6.977 6.977 0 0 0 18 11c0-3.868-3.133-7-7-7-3.868 0-7 3.132-7 7 0 3.867 3.132 7 7 7a6.977 6.977 0 0 0 4.875-1.975l.15-.15zM7 10h8v2H7v-2z"/></svg>\n        </button>\n        <button type="button" @click=',' >\n            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="30" height="30"><path d="M18.031 16.617l4.283 4.282-1.415 1.415-4.282-4.283A8.96 8.96 0 0 1 11 20c-4.968 0-9-4.032-9-9s4.032-9 9-9 9 4.032 9 9a8.96 8.96 0 0 1-1.969 5.617zm-2.006-.742A6.977 6.977 0 0 0 18 11c0-3.868-3.133-7-7-7-3.868 0-7 3.132-7 7 0 3.867 3.132 7 7 7a6.977 6.977 0 0 0 4.875-1.975l.15-.15zM10 10V7h2v3h3v2h-3v3h-2v-3H7v-2h3z"/></svg>\n        </button>\n        <button type="button" @click=',' >\n            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="30" height="30"><path fill="none" d="M0 0h24v24H0z"/><path d="M20 10.586l1.828-1.829 1.415 1.415L19 14.414l-4.243-4.242 1.415-1.415L18 10.586V8a3 3 0 0 0-3-3h-4V3h4a5 5 0 0 1 5 5v2.586zM13 9a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V10a1 1 0 0 1 1-1h10zm-1 2H4v8h8v-8z"/></svg>\n        </button>\n    </div>\n    <button type="button" @click=',' style="background:#31cc01;margin-right:1px;">\n        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="30" height="30"><path fill="white" d="M10 15.172l9.192-9.193 1.415 1.414L10 18l-6.364-6.364 1.414-1.414z"/></svg>\n    </button>\n    <svg class="icon-crop cursor" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">\n        <path class="cursor-x-y" d="M56 49v-3l4 4-4 4v-3h-5v5h3l-4 4-4-4h3v-5h-5v3l-4-4 4-4v3h5v-5h-3l4-4 4 4h-3v5z" />\n    </svg>\n    <svg class="icon-crop touch"  xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200">\n        <path class="hand-x-y" d="M139.93,113.56l-41.12-6.93V76.08a9.25,9.25,0,0,0-9.25-9.25h0a9.25,9.25,0,0,0-9.25,9.25v57.36L71,122.65c-3.61-3.61-8.44-3.89-13.08,0,0,0-7.24,5.84-3.83,9.25l34,34h42.63a9.25,9.25,0,0,0,9.07-7.43l6.82-34.09A9.28,9.28,0,0,0,139.93,113.56Z"/>\n    </svg>\n</div>\n']);return Zn=function(){return t},t}ii=function(t){return t};var es=function(t,e,n,i){return bt(Ds||(Ds=ii(Zn(),0,0,0,0,0)),(function(t){return n()}),(function(e){return t(!1)}),(function(e){return t(!0)}),(function(t){return e(90)}),(function(t){return i()}))},ns=function(){"use strict";function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,t);var r={};this.settings=E.extend(r,e||{}),this.data=n}return o(t,[{key:"evaluateConditions",value:function(t,e,n){var i=1===e?"OR":"AND",r=P.getLevel();r<=P.levels.TRACE&&P.debug("====> evaluating conditions for: "+n+" in mode "+i,t);var o=!1;if(t.length)for(var a=0;a<t.length;a++){var s=t[a];if(o=this.evaluateCondition(s,this.data),r<=P.levels.TRACE&&P.debug("evaluated condition: ",s,o),1===e){if(o)break}else if(!o)break}else o=!0;return P.debug("======> evaluated conditions for: "+n+" in mode "+i,o),!!o}},{key:"evaluateCondition",value:function(t,e){return"options"===t.data?this.evaluateOptionCondition(t,e.options):"product"===t.data?this.evaluateProductCondition(t,e.product):"variant"===t.data&&this.evaluateVariantCondition(t,e.variant)}},{key:"evaluateOptionCondition",value:function(t,e){for(var n=0;n<e.length;n++){var i=e[n];if(i.name===t.field){if(t.value&&-1!==t.value.indexOf(","))for(var r=t.value.split(","),o=0;o<r.length;o++){var a=r[o];if(this.evaluateOperation(t.operator,a,i.value))return!0}if(t.value&&i.value&&i._controller&&i._controller.multiSelect&&-1!==i.value.indexOf(",")){for(var s=i.value.split(","),l=0;l<s.length;l++){var c=s[l];if(this.evaluateOperation(t.operator,t.value,c))return!0}return!1}return this.evaluateOperation(t.operator,t.value,i.value)}if(i.options&&i.options.length>0&&this.evaluateOptionCondition(t,i.options))return!0}return!1}},{key:"evaluateVariantCondition",value:function(t,e){if(e)switch(t.field){case"variant":if(t.variants)for(var n=0;n<t.variants.length;n++)if(t.variants[n]&&t.variants[n].id.toString()===e.id.toString())return!0;break;case"variant_title":if(this.evaluateOperation(t.operator,t.value,e.title))return!0}return!1}},{key:"evaluateProductCondition",value:function(t,e){switch(t.field){case"product":for(var n=0;n<t.products.length;n++)if(t.products[n]&&t.products[n].id.toString()===e.id.toString())return!0;break;case"product_handle":if(this.evaluateOperation(t.operator,t.value,e.handle))return!0;break;case"product_title":if(this.evaluateOperation(t.operator,t.value,e.title))return!0;break;case"product_type":if(e.type&&this.evaluateOperation(t.operator,t.value,e.type))return!0;if(e.product_type&&this.evaluateOperation(t.operator,t.value,e.product_type))return!0;break;case"product_vendor":if(this.evaluateOperation(t.operator,t.value,e.vendor))return!0;break;case"product_tags":var i=void 0;i=Array.isArray(e.tags)?e.tags:e.tags.indexOf(", ")>=0?e.tags.split(", "):[e.tags];for(var r=0;r<t.tags.length;r++)for(var o=0;o<i.length;o++)if(t.tags[r].toString().toLowerCase().trim()===i[o].toString().toLowerCase().trim())return!0}return!1}},{key:"evaluateOperation",value:function(t,e,n){if(void 0!==n){switch(t){case"equals":return n.toString().toLowerCase().trim()===e.toString().toLowerCase().trim();case"!equals":return n.toString().toLowerCase().trim()!==e.toString().toLowerCase().trim();case"contains":return n.toString().toLowerCase().trim().indexOf(e.toString().toLowerCase().trim())>-1;case"!contains":return-1===n.toString().toLowerCase().trim().indexOf(e.toString().toLowerCase().trim());case"empty":return!n;case"!empty":return!!n;case"=":return parseFloat(n)===parseFloat(e);case"!=":return parseFloat(n)!==parseFloat(e);case">":return parseFloat(n)>parseFloat(e);case">=":return parseFloat(n)>=parseFloat(e);case"<":return parseFloat(n)<parseFloat(e);case"<=":return parseFloat(n)<=parseFloat(e)}return!1}}}]),t}();ns.MODE={OR:1,AND:2};var is=ns,rs=function(){"use strict";function t(){i(this,t)}return o(t,null,[{key:"getProductOption",value:function(t,e){for(var n=0;n<e.length;n++){var i=e[n];if(i.name===t)return i;if(i.options&&i.options.length>0){var r=this.getProductOption(t,i.options);if(null!=r)return r}}return null}},{key:"hasEditLayer",value:function(e,n){return e&&n&&n!==t.editLayer}},{key:"isEditLayer",value:function(t,e,n){return!!e&&(!n||!(t.name!==n&&!t.name.startsWith(n+"_")))}},{key:"isCropLayer",value:function(t,e,n){return!(!e||t.name!==n)}},{key:"hasRefRect",value:function(t){return t.params.refRect&&(t.params.autoScale||t.params.autoPos)}},{key:"getRefDimensions",value:function(e,n){return t.hasRefRect(e)?{width:e.params.refWidth||n.config.width-100,height:e.params.refHeight||n.config.height-100}:{width:n.config.width,height:n.config.height}}},{key:"getRefCoordinates",value:function(e,n){return t.hasRefRect(e)?{x:void 0!==e.params.refX?e.params.refX:50,y:void 0!==e.params.refY?e.params.refY:50}:e.params.autoPos?{x:0,y:0}:{x:0|e.params.x,y:0|e.params.y}}}]),t}();rs.editLayer="_";var os=rs,as=function(){"use strict";function t(){i(this,t)}return o(t,[{key:"render",value:function(t,e,n){}},{key:"_getOptions",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.params,i={visible:!0,selectable:!1,evented:!1,lockUniScaling:!0,lockRotation:!0,lockScalingX:!0,lockScalingY:!0,lockMovementX:!0,lockMovementY:!0,hasControls:!1,lockScalingFlip:!0};if(i.visible=!0,i.centeredRotation=!0,n.autoRotate?i.angle=0:void 0!==n.angle&&(i.angle=n.angle%360),n.autoPos&&!t._interactive?(i.left=0,i.top=0):(void 0!==n.x&&(i.left=n.x),void 0!==n.y&&(i.top=n.y)),n.autoScale&&!t._interactiveScaled?(i.scaleX=1,i.scaleY=1):(void 0!==n.scaleX&&(i.scaleX=n.scaleX),void 0!==n.scaleY&&(i.scaleY=n.scaleY)),void 0!==n.width&&(i.width=n.width),void 0!==n.height&&(i.height=n.height),os.isEditLayer(t,e.editorMode,e.editLayer)&&!e.cropMode){if(!os.hasRefRect(t)){i.lockMovementX=!0===t.params.autoPos,i.lockMovementY=!0===t.params.autoPos,i.lockScalingX=!0===t.params.autoScale,i.lockScalingY=!0===t.params.autoScale;var r=!t.params.autoPos||!t.params.autoScale;i.hasControls=r,i.selectable=r,i.evented=r,i.lockRotation=!1}}else if(os.isCropLayer(t,e.cropMode,e.cropLayer)){i.lockMovementX=!1,i.lockMovementY=!1,n.interactive=!1;var o=!1;i.lockScalingX=!o,i.lockScalingY=!o,i.hasControls=o,i.selectable=!0,i.evented=!0,i.borderColor="rgb(178,204,255)",i.borderScaleFactor=1}else t.params.interactive&&!e.cropMode&&(e.editorMode&&os.hasEditLayer(e.editorMode,e.editLayer)||(i.lockMovementX=!1,i.lockMovementY=!1,"upload"!==t.type||n.autoScaleOverlay||void 0!==n.resizable||(n.resizable=!0),n.rotatable&&(i.lockRotation=!1),n.resizable&&(i.lockScalingX=!1,i.lockScalingY=!1),i.hasControls=n.resizable||n.rotatable,i.hasControls&&(i.transparentCorners=!1,i.cornerStyle="circle",i.cornerSize=fabric.isTouchSupported?40:20,i.cornerColor=t.params.interactiveColor||"rgb(178,204,255)"),i.selectable=!0,i.evented=!0,i.borderColor=t.params.interactiveColor||"rgb(178,204,255)"));if(os.hasRefRect(t)&&"text"!==t.type&&"textbox"!==t.type&&isNaN(e.canvasRotate)){var a=this._getRefRect(t,e);a.set("absolutePositioned",!0),i.clipPath=a}return i._layer=t,i}},{key:"_isEditorMode",value:function(t,e){return!!e.editorMode&&(!e.editLayer||!(t.name!==e.editLayer&&!t.name.startsWith(e.editLayer+"_")))}},{key:"_printObject",value:function(t){P.debug("width/height =",t.width,t.height),P.debug("scaled width/height =",t.getScaledWidth(),t.getScaledHeight()),P.debug("left/top = ",t.left,t.top),P.debug("boundingRect = ",t.getBoundingRect()),P.debug("boundingRectAbsolute = ",t.getBoundingRect(!0)),P.debug("boundingRectCalc = ",t.getBoundingRect(!1,!0)),P.debug("boundingRectAbsoluteCalc = ",t.getBoundingRect(!0,!0))}},{key:"_applyAutoParams",value:function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.params,r=os.getRefCoordinates(e,n),o=os.getRefDimensions(e,n),a=this._getDimensions(t),s={width:t.width,height:t.height};if(i.autoScale&&!e._interactiveScaled){var l=i.autoScaleRatio,c=i.autoScaleMax,u=i.autoScaleOverlay||!1;"text"===e.type&&(l=!0);var p=1,d=o.width/s.width,f=o.height/s.height;(c||a.height>o.height||a.width>o.width)&&(l?(u?(p=Math.max(d,f),i.interactive&&(d>f?t.lockMovementX=!0:t.lockMovementY=!0)):p=Math.min(d,f),t.scaleX=p,t.scaleY=p):(t.scaleY=f,t.scaleX=d),t.setCoords(),a=this._getDimensions(t)),1!==p&&e.type}if(i.autoPos&&!e._interactive)if(i.autoCenter)this._center(t,a,r,o);else{if(i.autoCenterH)this._centerHorizontal(t,a,r,o);else if(t.left=r.x,"text"===e.type&&!i.textBox)if("center"===i.textAlign)this._centerHorizontal(t,a,r,o);else if("right"===i.textAlign){var h=r.x+o.width-a.width;t.left=parseFloat(h.toFixed(2))}i.autoCenterV?this._centerVertical(t,a,r,o):t.top=r.y}}},{key:"_getDimensions",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e?{height:t.getScaledWidth(),width:t.getScaledHeight()}:{width:t.getScaledWidth(),height:t.getScaledHeight()}}},{key:"_center",value:function(t,e,n,i){this._centerHorizontal(t,e,n,i),this._centerVertical(t,e,n,i)}},{key:"_centerHorizontal",value:function(t,e,n,i){var r=n.x+i.width/2-e.width/2;t.left=parseFloat(r.toFixed(2))}},{key:"_centerVertical",value:function(t,e,n,i){var r=n.y+i.height/2-e.height/2;t.top=parseFloat(r.toFixed(2))}},{key:"_addRefRect",value:function(t,e,n,i){if(os.isEditLayer(e,n.editorMode,n.editLayer)&&!n.cropMode)if(os.hasRefRect(e)){var r=this._getRefRect(e,n);i.add(r),i.uniformScaling=!1}else i.uniformScaling=!0}},{key:"_getRefRect",value:function(t,e){var n=t._objectRef||new fabric.Rect,i={visible:!0,lockUniScaling:!1,lockRotation:!0,lockMovementX:!1,lockMovementY:!1,lockScalingX:!1,lockScalingY:!1,hasControls:!0,lockScalingFlip:!0,selectable:!0,evented:!0};return i.left=void 0!==t.params.refX?t.params.refX:50,i.top=void 0!==t.params.refY?t.params.refY:50,i.width=t.params.refWidth||e.config.width-100,i.height=t.params.refHeight||e.config.height-100,i.scaleX=1,i.scaleY=1,i.fill="#139cf6",i.opacity=.5,i._layerRef=t,n.setOptions(i),t._objectRef=n,n}}]),t}(),ss=as,ls=function(t){var e=t.Image.filters,n=t.util.createClass;e.SwapColor=n(e.BaseFilter,{type:"SwapColor",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec4 colorSource;\nuniform vec4 colorDestination;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec3 delta = abs(colorSource.rgb - color.rgb);\ngl_FragColor = length(delta) < 0.02 ? colorDestination.rgba : color;\n}",colorSource:"rgb(255, 0, 0)",colorDestination:"rgb(0, 255, 0)",applyTo2d:function(e){var n,i=e.imageData.data,r=i.length,o=new t.Color(this.colorSource).getSource(),a=new t.Color(this.colorDestination).getSource();for(n=0;n<r;n+=4)i[n]===o[0]&&i[n+1]===o[1]&&i[n+2]===o[2]&&(i[n]=a[0],i[n+1]=a[1],i[n+2]=a[2])},getUniformLocations:function(t,e){return{uColorSource:t.getUniformLocation(e,"colorSource"),uColorDestination:t.getUniformLocation(e,"colorDestination")}},sendUniformData:function(e,n){var i=new t.Color(this.colorSource).getSource(),r=new t.Color(this.colorDestination).getSource();i[0]/=255,i[1]/=255,i[2]/=255,r[0]/=255,r[1]/=255,r[2]/=255,e.uniform4fv(n.uColorSource,i),e.uniform4fv(n.uColorDestination,r)},isNeutralState:function(){return this.colorSource===this.colorDestination},toObject:function(){return t.util.object.extend(this.callSuper("toObject"),{colorSource:this.colorSource,colorDestination:this.colorDestination})}}),t.Image.filters.SwapColor.fromObject=t.Image.filters.BaseFilter.fromObject},cs=function(t){"use strict";d(n,t);var e=w(n);function n(){return i(this,n),e.apply(this,arguments)}return o(n,[{key:"render",value:function(t,e,n){var i=this;t._object&&t._object.clipPath&&delete t._object.clipPath;var r=f({},t.params);if(t.params.optionColor){var o=os.getProductOption(t.params.optionColor,e.options);if(o&&o.value)if("color"===o.type)r.color=o.value;else if(o.values&&o.values.length){var a=o.values.filter((function(t){return t.value===o.value}));a.length&&(r.color=a[0].color)}}return t.params.crop&&"upload"===t.type&&(r.autoScaleOverlay=!0),this._getImage(t,e,n,r).then((function(o){if(i._addRefRect(o,t,e,n),null==o)return o;var a=i._getOptions(t,e,r);return o.set(a),a.hasControls&&!os.isEditLayer(t,e.editorMode,e.editLayer)&&o.setControlsVisibility({mt:!1,mb:!1,ml:!1,mr:!1,bl:!a.lockScalingX,br:!a.lockScalingX,tl:!a.lockScalingY,tr:!a.lockScalingY,mtr:!a.lockRotation}),i._applyAutoParams(o,t,e,r),n.add(o),t._object=o,t._object}))}},{key:"_getOptions",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.params,r=u(l(n.prototype),"_getOptions",this).call(this,t,e,i);return i.opacity&&(r.opacity=i.opacity),r}},{key:"_getImage",value:function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.params,r=this;return t._object?(i.color&&i.color!==t._color&&(this._colorize(t._object,i.color),t._color=i.color),Promise.resolve(t._object)):new Promise((function(e,n){var o=r;i.url&&-1!==i.url.indexOf(".svg")?fabric.loadSVGFromURL(i.url,(function(n,r){void 0===n&&(P.warn("layer url not found: ",i.url),e(null));var a=fabric.util.groupSVGElements(n,r);i.color&&(o._colorize(a,i.color),t._color=i.color),e(a)}),null,{crossOrigin:"anonymous"}):fabric.Image.fromURL(i.url,(function(n){if(void 0===n)return P.warn("layer url not found: ",i.url),void e(null);i.color&&"overlay"===t.type&&(o._colorize(n,i.color),t._color=i.color),e(n)}),{crossOrigin:"anonymous"})}))}},{key:"_colorize",value:function(t,e){if("group"===t.type)for(var n=t.getObjects(),i=0;i<n.length;i++){n[i].set("fill",e)}else if("path"===t.type||"circle"===t.type)t.set("fill",e);else if("image"===t.type&&t.width&&t.height){var r=void 0;t.filters&&t.filters.length?r=t.filters[0]:(void 0===fabric.Image.filters.SwapColor&&ls(fabric),(r=new fabric.Image.filters.SwapColor).colorSource="#fff",t.filters=[r]),r.colorDestination=e,t.applyFilters()}}}]),n}(ss),us=cs,ps=function(t){"use strict";d(n,t);var e=w(n);function n(){return i(this,n),e.apply(this,arguments)}return o(n,[{key:"render",value:function(t,e,n){var i;i=t.params.textBox?t._object&&"textbox"===t._object.type?t._object:new fabric.Textbox("",{editable:!1}):t._object&&"text"===t._object.type?t._object:new fabric.Text("");var r=t.params.text||"",o=f({},t.params);if(t.params.option){var a=os.getProductOption(t.params.option,e.options);if(a){a.value&&(r=a.value),a._layer=t;var s=!1;t.params.textEditor?(t._editor?o=E.extend(t.params,a._editor):t._editor=E.extend({},t.params),a._editor&&a._editor===t._editor||(a._editor=t._editor,o=E.extend(t.params,a._editor),s=!0)):a._editor&&(delete a._editor,s=!0),s&&e.productForm&&e.productForm.dispatchEvent(new CustomEvent("options:render",{detail:a,cancelable:!0,bubbles:!0}))}}if(t.params.optionFont){var l=os.getProductOption(t.params.optionFont,e.options);l&&l.value&&(o.fontFamily=l.value)}if(t.params.optionColor){var c=os.getProductOption(t.params.optionColor,e.options);if(c&&c.value)if("color"===c.type)o.color=c.value;else if(c.values&&c.values.length){var u=c.values.filter((function(t){return t.value===c.value}));if(u.length){var p=u[0];p.color&&(o.color=p.color),p.img&&o.textPattern&&!o.urlPattern&&(o.urlPattern=p.img)}}}if(t.params.textShadow&&t.params.optionTextShadowColor){var d=os.getProductOption(t.params.optionTextShadowColor,e.options);if(d&&d.value)if("color"===d.type)o.textShadowColor=d.value;else if(d.values&&d.values.length){var h=d.values.filter((function(t){return t.value===d.value}));h.length&&(o.textShadowColor=h[0].color)}}if(o.textVertical){for(var v=[],m=0;m<r.length;m++)v.push(r.charAt(m));r=v.join("\n")}var g=this._getOptions(t,e,o);return g.text=r.replace(/\\n/g,"\n"),i.set(g),g.hasControls&&!os.isEditLayer(t,e.editorMode,e.editLayer)&&i.setControlsVisibility({mt:!1,mb:!1,ml:!1,mr:!1,bl:!g.lockScalingX,br:!g.lockScalingX,tl:!g.lockScalingY,tr:!g.lockScalingY,mtr:!g.lockRotation}),this._applyAutoParams(i,t,e,o),this._addRefRect(i,t,e,n),n.add(i),t._object=i,o.textPattern&&o.urlPattern?this._applyTextPattern(i,t,o):Promise.resolve(t._object)}},{key:"_getOptions",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.params,r=u(l(n.prototype),"_getOptions",this).call(this,t,e,i);if(r.fill=i.color||"#000000",r.fontSize=i.fontSize||10,r.fontFamily=i.fontFamily||"Arial",r.fontStyle=i.fontStyle?i.fontStyle:"normal",r.fontWeight=i.fontWeight?i.fontWeight:"normal",r.textAlign=i.textAlign?i.textAlign:"left",r.lineHeight=i.lineHeight?i.lineHeight:1.16,i.fontSizeFactor&&(r.fontSize*=i.fontSizeFactor),r.charSpacing=i.letterSpacing?100*i.letterSpacing:0,r.shadow=i.textShadow?new fabric.Shadow({color:i.textShadowColor?i.textShadowColor:"#000000",blur:i.textShadowBlur?i.textShadowBlur:1,offsetX:i.textShadowOffsetX?i.textShadowOffsetX:.5,offsetY:i.textShadowOffsetY?i.textShadowOffsetY:.5}):void 0,t.params.textBox&&(os.hasRefRect(t)&&(i.refWidth||i.refHeight)?(r.width=i.refWidth,r.height=i.refHeight):(r.width=e.config.width,r.height=e.config.height)),t.params.textPath){var o=t.params.path||"",a=t.params.pathSide||"left",s=os.getRefDimensions(t,e);if("path"===t.params.pathShape)o&&(r.path=new fabric.Path(o,{fill:!1}));else if("circle_top"===t.params.pathShape){var c=Math.min(s.width,s.height)/2;o=this._describeEllipse([0,0],[c,c],[90,359.9],0),a="left",r.path=new fabric.Path(o,{fill:!1}),r.path.width+=2*r.fontSize,r.path.height+=2*r.fontSize}else if("circle_bottom"===t.params.pathShape){var p=Math.min(s.width,s.height)/2;o=this._describeEllipse([0,0],[p,p],[270,359.9],0),a="right",r.path=new fabric.Path(o,{fill:!1})}else"ellipse_top"===t.params.pathShape?(o=this._describeEllipse([0,0],[s.width/2,s.height/2],[90,359.9],0),a="left",r.path=new fabric.Path(o,{fill:!1}),r.path.width+=2*r.fontSize,r.path.height+=2*r.fontSize):"ellipse_bottom"===t.params.pathShape&&(o=this._describeEllipse([0,0],[s.width/2,s.height/2],[270,359.9],0),a="right",r.path=new fabric.Path(o,{fill:!1}));r.path&&(r.pathStartOffset=i.letterSpacing?3*i.letterSpacing:0,r.pathSide=a,os.isEditLayer(t,e.editorMode,e.editLayer)&&!e.cropMode&&r.path.setOptions({stroke:"rgb(178,204,255)",strokeWidth:2}))}return r}},{key:"_applyTextPattern",value:function(t,e,n){return e._pattern&&e._pattern._url===n.urlPattern?(t.set("fill",e._pattern),Promise.resolve(e._object)):new Promise((function(i,r){fabric.Image.fromURL(n.urlPattern,(function(r){if(void 0===r)return P.warn("text layer urlPattern not found: ",n.url),void i(null);e._pattern=new fabric.Pattern({source:r._element,repeat:"repeat"}),e._pattern._url=n.urlPattern,t.set("fill",e._pattern),i(e._object)}),{crossOrigin:"anonymous"})}))}},{key:"_degreeToRadian",value:function(t){return t*Math.PI/180}},{key:"_describeEllipse",value:function(t,e,n,i){var r=v(t),o=r[0],a=r[1],s=v(e),l=s[0],c=s[1],u=v(n),p=u[0],d=u[1];p=this._degreeToRadian(p),d=this._degreeToRadian(d),i=this._degreeToRadian(i);var f=function(t,e){var n=v(t),i=v(n[0]),r=i[0],o=i[1],a=v(n[1]),s=a[0],l=a[1],c=v(e),u=c[0],p=c[1];return[r*u+o*p,s*u+l*p]},h=function(t,e){var n=v(t),i=n[0],r=n[1],o=v(e);return[i+o[0],r+o[1]]};d%=2*Math.PI;var m,g=(m=i,[[Math.cos(m),-Math.sin(m)],[Math.sin(m),Math.cos(m)]]),y=v(h(f(g,[l*Math.cos(p),c*Math.sin(p)]),[o,a])),_=y[0],w=y[1],b=v(h(f(g,[l*Math.cos(p+d),c*Math.sin(p+d)]),[o,a])),x=b[0],k=b[1],E=d>Math.PI?1:0,C=d>0?1:0;return"M "+_+" "+w+" A "+[l,c,i/(2*Math.PI)*360,E,C,x,k].join(" ")}}]),n}(ss),ds=ps,fs=function(t){"use strict";d(n,t);var e=w(n);function n(){return i(this,n),e.apply(this,arguments)}return o(n,[{key:"render",value:function(t,e,n){if(t.params.maskLayers&&t.params.maskLayers.length>0){var i=this;n.clipPath&&delete n.clipPath;var r=[];return n.forEachObject((function(o){o._layer&&-1!==t.params.maskLayers.indexOf(o._layer.name)&&r.push(i._getClipPath(t,e,n,o).then((function(t){t?o.clipPath=t:delete o.clipPath,o.dirty=!0})))})),Promise.all(r)}return this._getClipPath(t,e,n).then((function(i){return i?(e.mask=!0,n.clipPath=i,t._object=i):(delete n.clipPath,delete t._object),i}))}},{key:"_getClipPath",value:function(t,e,n,i){var r=this._getOptions(t,e),o=null;if(t.params.shape)switch(t.params.shape){case"circle":if(t._object&&"circle"!==t._object.type&&delete t._object,o=t._object||new fabric.Circle,t.params.radius)r.radius=t.params.radius;else if(!t.params.maskLayers||0===t.params.maskLayers.length){var a=e.config.width;r.radius=a/2}i&&(t.params.radius||(r.radius=i.width/2),r.left=-r.radius,r.top=-r.radius),o.setOptions(r);break;case"triangle":t._object&&"triangle"!==t._object.type&&delete t._object,o=t._object||new fabric.Triangle,t.params.maskLayers&&0!==t.params.maskLayers.length||(r.width=e.config.width,r.height=e.config.height),i&&(r.width=i.width,r.height=i.height,r.left=-r.width/2,r.top=-r.height/2),o.setOptions(r);break;case"svg":if(t.params.url){return(i&&i.clipPath&&i.clipPath._url===t.params.url?Promise.resolve(i.clipPath):n.clipPath&&n.clipPath._url===t.params.url?Promise.resolve(n.clipPath):new Promise((function(e,n){fabric.loadSVGFromURL(t.params.url,(function(n,i){if(n){var r=fabric.util.groupSVGElements(n,i);e(r)}else P.warn("svg mask not found",t.params.url),e(null)}))}))).then((function(n){if(n){r._url=t.params.url,r.width=n.width,r.height=n.height;var o=t.params.padding||3;if(t.params.maskLayers&&0!==t.params.maskLayers.length?i&&(r.scaleX=(i.width-o)/n.width,r.scaleY=(i.height-o)/n.height):(r.scaleX=(e.config.width-o)/n.width,r.scaleY=(e.config.height-o)/n.height),t.params.ratio||!0){var a=Math.min(r.scaleX,r.scaleY);r.scaleX=a,r.scaleY=a}i&&(r.left=-n.width*r.scaleX/2,r.top=-n.height*r.scaleY/2),n.setOptions(r)}return n}))}P.warn("svg mask missing url",t)}return Promise.resolve(o)}}]),n}(ss),hs=fs,vs=function(t){"use strict";d(n,t);var e=w(n);function n(){return i(this,n),e.apply(this,arguments)}return o(n,[{key:"_findProductUrl",value:function(t,e){var n=e.product;if(t.params.imgPos){var i=parseInt(t.params.imgPos);if(!isNaN(i)&&n.images.length>i-1)return n.images[i-1]}if(t.params.variant&&e.variantId)for(var r=0;r<e.product.variants.length;r++){var o=e.product.variants[r];if(o.id.toString()===e.variantId.toString()){if(o.featured_image&&o.featured_image.src)return o.featured_image.src;break}}return n.featured_image}},{key:"_getImage",value:function(t,e,n){arguments.length>3&&void 0!==arguments[3]||t.params;if(e.product){var i=this._findProductUrl(t,e);if(i)return t._object&&t._url===i?Promise.resolve(t._object):new Promise((function(e,n){fabric.Image.fromURL(i,(function(n){void 0===n&&(P.warn("product url not found: ",i),e(null)),t._url=i,e(n)}),{crossOrigin:"anonymous"})}))}else P.warn("missing product in render context");return Promise.resolve(null)}}]),n}(us),ms=vs,gs=function(t){"use strict";d(n,t);var e=w(n);function n(){return i(this,n),e.apply(this,arguments)}return o(n,[{key:"_getImage",value:function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.params;if(i.option){var r=os.getProductOption(i.option,e.options);if(r){if(r._layer=t,r.value){var o=this,a=r.value;if(r.params.multiple||-1!==a.indexOf(",")){var s=a.split(","),l=i.fileIndex||s.length;if(l-=1,!(s.length>l))return Promise.resolve(null);a=s[l]}return!t._object||t._url!==a||!isNaN(t.params.rotate)&&t._rotate!==t.params.rotate||t.params.filters&&t._filters&&t._filters.length!==t.params.filters.length?new Promise((function(n,r){var s=o;t._interactive&&(delete t._interactive,delete t._interactiveScaled);var l=function(r){if(void 0===r&&(P.warn("upload url not found: ",a),n(null)),t._url=a,t._rotate=0,t.params.autoRotate){var o=os.getRefDimensions(t,e),l=r;l.width<l.height&&o.width>o.height?t._rotate=90:l.width>l.height&&o.width<o.height&&(t._rotate=-90)}if(t.params.rotate&&(t._rotate=t.params.rotate),0!==t._rotate){var c=s;r.rotate(t._rotate),i.canvasRotate&&(e.canvasRotate=-1*t._rotate);var u={multiplier:1,format:-1!==t._url.indexOf(".png")?"png":"jpeg",quality:1},p=r.toDataURL(u);fabric.Image.fromURL(p,(function(e){c._applyFilters(e,t),n(e)}))}else s._applyFilters(r,t),n(r)};-1!==a.indexOf(".svg")?fabric.loadSVGFromURL(a,(function(t,i){void 0===t&&(P.warn("upload url not found: ",a),n(null));var r=fabric.util.groupSVGElements(t,i),o=Math.max(e.config.width/r.viewBoxWidth,e.config.height/r.viewBoxHeight),s=r.toDataURL({multiplier:Math.min(10,o),format:"png"});fabric.Image.fromURL(s,(function(t){l(t)}))}),null,{crossOrigin:"anonymous"}):fabric.Image.fromURL(a,l,{crossOrigin:"anonymous"})})):(t.params.autoRotate&&0!==t._rotate&&i.canvasRotate&&(e.canvasRotate=-1*t._rotate),Promise.resolve(t._object))}}else P.warn("no upload option found for layer",t)}else P.warn("missing option for layer",t);return Promise.resolve(null)}},{key:"_applyFilters",value:function(t,e){if(e.params.filters){t.filters||(t.filters=[]);for(var n=0;n<e.params.filters.length;n++){var i=void 0;switch(e.params.filters[n]){case"invert":(i=new fabric.Image.filters.Invert)._sort=2;break;case"grayscale":(i=new fabric.Image.filters.Grayscale)._sort=6;break;case"sepia":(i=new fabric.Image.filters.Sepia)._sort=5;break;case"removeWhite":(i=new fabric.Image.filters.RemoveColor({threshold:.2}))._sort=1}i&&t.filters.push(i)}if(t.filters.length){if(t.width>fabric.textureSize||t.height>fabric.textureSize){var r=Math.max(t.height,t.width);fabric.textureSize=r>4096?r:4096}t.filters.sort((function(t,e){return(t._sort||100)>(e._sort||100)?1:-1}))}e._filters=g(e.params.filters),t.applyFilters()}}}]),n}(us),ys=gs,_s=function(t){"use strict";d(n,t);var e=w(n);function n(){return i(this,n),e.apply(this,arguments)}return o(n,[{key:"_getImage",value:function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.params,r=i.text||"";if(i.option){var o=os.getProductOption(i.option,e.options);o&&o.value&&(r=o.value)}if(r){var a=P.getLevel();if(a<=P.levels.DEBUG&&console.time("====> QR RENDER"),t._object&&t._qrText===r)return a<=P.levels.DEBUG&&console.timeEnd("====> QR RENDER"),Promise.resolve(t._object);var s=[e.assets+"/static/lib/easyqrcodejs/easy.qrcode.min.js"],l=Ti.loadOnce(s,"qrcode",{async:!1});return l.then((function(){return new Promise((function(n,o){var s=function(e,i){a<=P.levels.DEBUG&&console.timeEnd("====> QR RENDER"),fabric.Image.fromURL(i,(function(e){if(void 0===e)return P.warn("qr image invalid"),void n(null);t._qrText=r,n(e)}))};if(t._qrDiv||(t._qrDiv=document.createElement("div")),e.editorMode&&t._qrCode&&(t._qrCode.clear(),delete t._qrCode),t._qrCode)t._qrCode._htOption.onRenderingEnd=s,t._qrCode._oDrawing._htOption.onRenderingEnd=s,t._qrCode.makeCode(r);else{var l=Math.min(e.config.width/2,1e3),c={text:r,width:l,height:l,onRenderingEnd:s};i.url&&(c.logo=i.url,c.crossOrigin="anonymous"),t._qrCode=new QRCode(t._qrDiv,c)}}))}))}return Promise.resolve(null)}}]),n}(us),ws=_s,bs=function t(){"use strict";i(this,t)};(bs.renderers={}).overlay=new us,bs.renderers.text=new ds,bs.renderers.mask=new hs,bs.renderers.product=new ms,bs.renderers.upload=new ys,bs.renderers.qrcode=new ws;var xs=bs,ks=function(){"use strict";function e(t,n,r,o,s){var l=this;i(this,e),a(this,"_syncSticky",(function(){var t={format:"png",multiplier:l.previewConfig.width/l._canvas.getWidth()};l._stickyImgEl.src=l._canvas.toDataURL(t),l._canvas.requestRenderAll()}));var c={api:"https://api.cloudlift.app",assets:"https://assets.cloudlift.app",queryParams:{},selector:".cl-preview",selectorThumbnail:"",position:"",classNamePrefix:"cl-po",product:{},variantId:null,editorMode:!1,editLayer:os.editLayer,cropMode:!1,cropLayer:"",sticky:!1,stickyMobile:"overlay",stickyMode:!1};if(this.config=t,this.previewConfig=n,this.active=!0,this.settings=E.extend(c,s||{}),this.visible={},this.visibleEditor={},this.shopifyStore=F.getInstance(),this._productForm=r,this.conditionsEngine=o,null!==this.settings.selector&&(E.isElement(this.settings.selector)?this.element=this.settings.selector:this.element=document.querySelector(this.settings.selector)),null!=this.element){var u=this;P.info("--\x3e new product-preview: ",this.element),this.resources=[this.settings.assets+"/static/lib/fabricjs/fabric.min.js"],this.ready=Ti.loadOnce(this.resources,"product-preview",{async:!1}).then((function(){return u._init()}))}else P.warn("no elements with selector found: ",this.settings.selector)}return o(e,[{key:"destroy",value:function(){this.element.removeChild(this._wrapper)}},{key:"render",value:function(){wt(ts(this.settings.product,{uuid:this.config.uuid}),this._wrapper)}},{key:"_renderContext",value:function(){return{config:this.previewConfig,options:this.config.options,product:this.settings.product,assets:this.settings.assets,productForm:this._productForm,variantId:this.settings.variantId,editorMode:this.settings.editorMode,editLayer:this.settings.editLayer,cropMode:this.settings.cropMode,cropLayer:this.settings.cropLayer,mask:!1}}},{key:"renderPreview",value:function(){var t=this;return null==this._renderQueue&&(this._renderQueue=Promise.resolve()),this._renderQueue=this._renderQueue.then((function(){return t._loadUsedFonts()})).then((function(){return function(){var e=t,n=P.getLevel();n<=P.levels.DEBUG&&console.time("====> RENDER PREVIEW "+t.previewConfig.position);var i=t._renderContext(),r=null;if(!t.static){var o=t._canvas.getActiveObject();t._canvas.discardActiveObject(),o&&(r=o._layer)}return t._rotateGroup&&t._rotateGroup.forEachObject((function(t){e._rotateGroup.remove(t)})),t._canvas.clear(),t._renderLayers(t.previewConfig.layers,i).then((function(){e._canvas.clipPath&&!i.mask&&delete e._canvas.clipPath,r?e.selectLayer(r.name,!1):os.hasEditLayer(e.settings.editorMode,e.settings.editLayer)&&e.selectLayer(e.settings.editLayer,!1),void 0!==i.canvasRotate&&(e._rotateGroup=new fabric.Group(e._canvas.getObjects()),e._rotateGroup.rotate(i.canvasRotate),e._rotateGroup.setCoords()),e._canvas.renderAll(),n<=P.levels.DEBUG&&console.timeEnd("====> RENDER PREVIEW "+e.previewConfig.position),e._responsiveCanvasHeight(),e._syncThemeGallery(),e._triggerEvent("preview:rendered",e)}))}()})),this._renderQueue}},{key:"export",value:function(e,n,i,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"jpeg",a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.8;if(this._canvas){var s=P.getLevel();s<=P.levels.DEBUG&&console.time("====> EXPORT PREVIEW");var l=!1,c=0;if(this._canvas.forEachObject((function(t){t.visible&&t._layer&&(!0===t._layer.params[r]?(t.visible=!1,t._visible=!0,l=!0):"product"!==t._layer.type&&c++)})),0===c)return P.debug("==> no visible layers - skipping export"),l&&this._canvas.forEachObject((function(t){t._visible&&(t.visible=!0,delete t._visible)})),null;this._canvas.renderAll();var u={multiplier:e.width/this._canvas.getWidth(),format:o,quality:a};n&&(u.left=n.x/u.multiplier,u.top=n.y/u.multiplier,u.width=n.width/u.multiplier,u.height=n.height/u.multiplier);var p,d=this._canvas.toDataURL(u);return p=i?t(Za)(d):d,l&&(this._canvas.forEachObject((function(t){t._visible&&(t.visible=!0,delete t._visible)})),this._canvas.renderAll()),s<=P.levels.DEBUG&&console.timeEnd("====> EXPORT PREVIEW"),p}return null}},{key:"exportLayer",value:function(e,n){for(var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"jpeg",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.8,o=this._canvas.getObjects(),a=0;a<o.length;a++){var s=o[a];if(s._layer&&s._layer.name===e){var l={multiplier:1,withoutTransform:!0,format:i,quality:r},c=s.clipPath;if(c){s.clipPath=null;var u=c.getBoundingRect(!0,!0);P.debug("crop rect",u);var p=s.getBoundingRect(!0,!0);P.debug("bounding rect",p);var d=s.width/s.getScaledWidth();l.left=Math.round((u.left-p.left)*d),l.top=Math.round((u.top-p.top)*d),l.width=Math.round(u.width*d),l.height=Math.round(u.height*d),l.left=Math.max(l.left,0),l.top=Math.max(l.top,0),l.width=Math.min(l.width,s.width-l.left),l.height=Math.min(l.height,s.height-l.top)}var f=s.toDataURL(l),h=void 0;return h=n?t(Za)(f):f,c&&(s.clipPath=c),h}}return null}},{key:"clear",value:function(){this._canvas&&this._canvas.clear()}},{key:"updateConfig",value:function(t){var e=!1;return this.previewConfig.width===t.width&&this.previewConfig.height===t.height||(e=!0),this.previewConfig=t,e&&this._setDimensions(),this.renderPreview()}},{key:"selectLayer",value:function(t){for(var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.previewConfig.layers,i=0;i<n.length;i++){var r=n[i];if(r.layers&&r.layers.length>0&&this.selectLayer(t,e,r.layers))return!0;if(r.name===t&&r._object&&(os.isEditLayer(r,this.settings.editorMode,this.settings.editLayer)&&(this._canvas.preserveObjectStacking=!1,delete r._interactive),this._canvas.contains(r._object)))return this._canvas.setActiveObject(r._object),e&&this._canvas.renderAll(),!0}return!1}},{key:"deSelect",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._canvas.discardActiveObject(),this.settings.editorMode&&!this._canvas.preserveObjectStacking&&(this._canvas.preserveObjectStacking=!0),t&&this._canvas.renderAll()}},{key:"_init",value:function(){var t=this;this._wrapper=document.createElement("div"),this._wrapper.className=this.settings.classNamePrefix+"--preview-wrapper",this._wrapper.setAttribute("id",this.config.uuid+"_preview"),this._wrapper.style.width="100%",this.settings.position?(this.element.insertAdjacentElement(this.settings.position,this._wrapper),this.element!==this._wrapper.parentNode&&(this.element=this._wrapper.parentNode)):this.element.appendChild(this._wrapper),this.render(),this._preview=this._wrapper.querySelector("."+this.settings.classNamePrefix+"--preview"),this._preview.classList.add("cl-hide");var e=this._wrapper.querySelector("."+this.settings.classNamePrefix+"--canvas");this.static=this._isStatic(),fabric.devicePixelRatio<2&&(fabric.devicePixelRatio=2),window.clPreviewRatio&&(fabric.devicePixelRatio=parseInt(window.clPreviewRatio)),this.static?this._canvas=new fabric.StaticCanvas(e):(fabric.isTouchSupported&&this._patchCanvasTouchScroll(),this._canvas=new fabric.Canvas(e,{selection:!1,preserveObjectStacking:!0,allowTouchScrolling:!0}),this._subscribeCanvasEvents()),this._setDimensions(),this.renderPreview().then((function(){t._watchFormChanges(),t._watchWindowResize(),t._watchWindowScroll(),t._preview.classList.remove("cl-hide")})).catch((function(t){P.error("[live-options] failed render preview",t)}))}},{key:"_setDimensions",value:function(){var t=this._canvas.getZoom();1!==t&&this._canvas.setZoom(1);var e=fabric.devicePixelRatio,n=this.previewConfig.width*this.previewConfig.height,i=window.clPreviewMaxRetina||9e6;e>1&&n>i&&E.isMobile(E.getAgent())&&(this._canvas.enableRetinaScaling=!1),this._canvas.setDimensions({width:this.previewConfig.width,height:this.previewConfig.height}),1!==t&&this._resizeCanvas()}},{key:"_renderLayers",value:function(t,e){for(var n=this,i=function(i){var o=n,a=t[i];r=r.then((function(){return o._renderLayer(a,e)}))},r=Promise.resolve(),o=0;o<t.length;o++)i(o);return r}},{key:"_renderLayer",value:function(t,e){var n=!0;if(t.conditions&&t.conditions.length&&(n=this.conditionsEngine.evaluateConditions(t.conditions,is.MODE.AND,"layer.name="+t.name)),this.settings.editorMode&&this.visibleEditor.hasOwnProperty(t.name)&&(n=this.visibleEditor[t.name]),this.visible[t.name]=n,n){if(P.debug("rendering layer: ",t),t.layers&&t.layers.length>0)return this._renderLayers(t.layers,e);var i=xs.renderers[t.type];if(i)return i.render(t,e,this._canvas)}return Promise.resolve()}},{key:"_loadUsedFonts",value:function(){for(var t=[],e=0;e<this.previewConfig.layers.length;e++){var n=this.previewConfig.layers[e];if("text"===n.type){if(n.params.fontFamily&&t.push(n.params.fontFamily),n.params.option&&n.params.textEditor){var i=os.getProductOption(n.params.option,this.config.options);i&&i._editor&&i._editor.fontFamily&&t.push(i._editor.fontFamily)}if(n.params.optionFont){var r=os.getProductOption(n.params.optionFont,this.config.options);r&&r.value&&t.push(r.value)}}}return t.length>0?I.loadFontsByName(t):Promise.resolve(!0)}},{key:"_isStatic",value:function(){if(this.settings.editorMode)return!1;for(var t=0;t<this.previewConfig.layers.length;t++){var e=this.previewConfig.layers[t];if(e.params.interactive||e.params.crop&&"upload"===e.type)return!1}return!0}},{key:"_watchFormChanges",value:function(){if(this._productForm){var t=this;this._productForm.addEventListener("option:changed",(function(e){return t._optionChanged(e)})),this._productForm.addEventListener("option:crop",(function(e){return t._optionCrop(e)})),this._productForm.addEventListener("variant:changed",(function(e){return t._variantChanged(e)}))}else P.warn("product-preview no productForm found for config: "+this.config.uuid)}},{key:"_subscribeCanvasEvents",value:function(){var t=this,e=P.getLevel();this._canvas.on("object:modified",(function(n){var i=n.target;if(e<=P.levels.TRACE&&P.debug("object:modified",i),i._layer){var r=i._layer,o=r.params;o.x=Math.round(i.left),o.y=Math.round(i.top),e<=P.levels.TRACE&&P.debug("=> layer x,y = ",o.x,o.y),o.crop?(o.scaleX=i.scaleX,o.scaleY=i.scaleY):(o.scaleX=parseFloat(i.scaleX.toFixed(3)),o.scaleY=parseFloat(i.scaleY.toFixed(3))),0!==i.angle&&(o.angle=Math.round(i.angle)),r._editor&&(E.merge(r._editor,r.params,["x","y","scaleX","scaleY","angle"]),t._productForm&&t._productForm.dispatchEvent(new CustomEvent("options:render",{detail:null,cancelable:!0,bubbles:!0}))),t._triggerEvent("layer:changed",r)}else if(i._layerRef){var a=i._layerRef.params;a.refX=Math.round(i.left),a.refY=Math.round(i.top),a.refWidth=Math.round(i.getScaledWidth()),a.refHeight=Math.round(i.getScaledHeight()),P.debug("updated layer rectRef params",a),t._triggerEvent("layer:changed",i._layerRef),t.renderPreview()}})),this._canvas.on("object:moving",(function(n){var i=n.target;if(e<=P.levels.TRACE&&P.debug("object:moving",i),i._layer){var r=i._layer,o=r.params,a=os.isCropLayer(r,t.settings.cropLayer,t.settings.cropLayer);if(a||o.interactive&&!os.isEditLayer(r,t.settings.editorMode,t.settings.editLayer)){r._interactive=!0;var s={x:0,y:0},l={x:t.previewConfig.width,y:t.previewConfig.height},c={width:t.previewConfig.width,height:t.previewConfig.height};os.hasRefRect(r)&&(s.x=o.refX,s.y=o.refY,l.x=o.refX+o.refWidth,l.y=o.refY+o.refHeight,c.width=o.refWidth,c.height=o.refHeight);var u=i.getBoundingRect(!0,!0);if(e<=P.levels.TRACE&&P.debug("boundingRect = ",u),o.interactiveBox||a)o.autoScaleOverlay||a?(s.x-=u.width-c.width,s.y-=u.height-c.height,l.x-=c.width,l.y-=c.height):(l.x-=u.width,l.y-=u.height);else{var p=50/t._canvas.getZoom();s.x-=u.width-p,s.y-=u.height-p,l.x-=p,l.y-=p}u.left<s.x?(0!==i.angle?i.setPositionByOrigin({x:s.x+u.width/2,y:i.getCenterPoint().y},"center","center"):i.left=s.x,e<=P.levels.TRACE&&P.debug("=> reset object.left  = ",i.left)):u.left>l.x&&(0!==i.angle?i.setPositionByOrigin({x:l.x+u.width/2,y:i.getCenterPoint().y},"center","center"):i.left=l.x,e<=P.levels.TRACE&&P.debug("=> reset object.left  = ",i.left)),u.top<s.y?(0!==i.angle?i.setPositionByOrigin({x:i.getCenterPoint().x,y:s.y+u.height/2},"center","center"):i.top=s.y,e<=P.levels.TRACE&&P.debug("=> reset object.top  = ",i.left)):u.top>l.y&&(0!==i.angle?i.setPositionByOrigin({x:i.getCenterPoint().x,y:l.y+u.height/2},"center","center"):i.top=l.y,e<=P.levels.TRACE&&P.debug("=> reset object.top  = ",i.left))}}}));var n=function(n){var i=n.target;if(e<=P.levels.TRACE&&P.debug("object:scaling",i),i._layer){var r=i._layer,o=r.params;if(o.interactive&&!os.isEditLayer(r,t.settings.editorMode,t.settings.editLayer)&&(r._interactive=!0,r._interactiveScaled=!0,o.interactiveBox)){var a={x:0,y:0},s={x:t.previewConfig.width,y:t.previewConfig.height};os.hasRefRect(r)&&(a.x=o.refX,a.y=o.refY,s.x=o.refX+o.refWidth,s.y=o.refY+o.refHeight);var l=i.getBoundingRect(!0,!0);e<=P.levels.TRACE&&P.debug("boundingRect = ",l);var c=null,u=20;if(n.transform.corner&&("tr"==n.transform.corner?(a.x-=u,s.y+=u):"tl"==n.transform.corner?(s.x+=u,s.y+=u):"br"==n.transform.corner?(a.x-=u,a.y-=u):"bl"==n.transform.corner&&(s.x+=u,a.y-=u)),Math.floor(l.left)<a.x)c=(i.aCoords.tr.x-a.x)/(l.width/i.scaleX),0!==i.angle?i.setPositionByOrigin({x:a.x+l.width/2,y:i.getCenterPoint().y},"center","center"):i.left=a.x;else if(Math.floor(l.left+l.width)>s.x){var p=s.x-l.left;c=p/(l.width/i.scaleX),0!==i.angle?i.setPositionByOrigin({x:s.x-p+l.width/2,y:i.getCenterPoint().y},"center","center"):i.left=s.x-p}if(Math.floor(l.top)<a.y)c=(l.top+l.height-a.y)/(l.height/i.scaleY),0!==i.angle?i.setPositionByOrigin({x:i.getCenterPoint().x,y:a.y+l.height/2},"center","center"):i.top=a.y;else if(Math.floor(l.top+l.height)>s.y){var d=s.y-l.top;c=d/(l.height/i.scaleY),0!==i.angle?i.setPositionByOrigin({x:i.getCenterPoint().x,y:s.y-d+l.height/2},"center","center"):i.top=s.y-d}null!=c&&(i.scaleX=c,i.scaleY=c,i.setCoords(),t._canvas.requestRenderAll(),e<=P.levels.TRACE&&P.debug("=> reset object.scale  = ",c))}}};this._canvas.on("object:scaling",n),this._canvas.on("object:scaled",n),this._canvas.on("selection:created",(function(n){var i=n.selected?n.selected[0]:null;e<=P.levels.TRACE&&P.debug("selection:created",i),i._layer?t._triggerEvent("layer:selected",i._layer):i._layerRef&&t._triggerEvent("layer:selected",i._layerRef)})),this._canvas.on("selection:updated",(function(n){var i=n.selected?n.selected[0]:null;e<=P.levels.TRACE&&P.debug("selection:updated",i),i._layer?t._triggerEvent("layer:selected",i._layer):i._layerRef&&t._triggerEvent("layer:selected",i._layerRef)})),this._canvas.on("selection:cleared",(function(t){e<=P.levels.TRACE&&P.debug("selection:cleared")}))}},{key:"_variantChanged",value:function(t){this.settings.variantId=t.detail.variantId,this._clearVisibleEditor(),this.renderPreview()}},{key:"_optionChanged",value:function(t){var e=this,n=t.detail;this._clearVisibleEditor(),this.renderPreview().then((function(){e.static||(n._layer&&"upload"===n._layer.type&&n.value&&n._layer.params.crop?e._optionCrop(t):n._layer&&n._layer.params.interactive&&e.selectLayer(n._layer.name,!1))}))}},{key:"_optionCrop",value:function(t){var e,n=this,i=t.detail;if(this.active){for(var r=this._canvas.getObjects(),o=0;o<r.length;o++){var a=r[o];if(a._layer&&a._layer.params.option===i.name&&a._layer.params.crop){e=a._layer;break}}if(e){if(this.settings.cropMode){this.settings.cropMode=!1,this.settings.cropLayer="";var s=this._getContainerWidth()/this.previewConfig.width;this._canvas.setViewportTransform([s,0,0,s,0,0]),this._highlight(!1),this._wrapper.removeChild(this._cropEl),delete this._cropEl}else{var l=this;this.settings.cropMode=!0,this.settings.cropLayer=e.name;var c=e.params,u={width:this.previewConfig.width,height:this.previewConfig.height},p={x:e._object.left,y:e._object.top,scaleX:e._object.scaleX,scaleY:e._object.scaleY,rotate:0|e.params.rotate};if(os.hasRefRect(e)){var d=this._renderContext(),f=os.getRefDimensions(e,d),h=os.getRefCoordinates(e,d),v=Math.min((this._canvas.getWidth()-100)/f.width,(this._canvas.getHeight()-100)/f.height);v=Math.min(v,2);var m=h.x+f.width/2,g=h.y+f.height/2,y=-m*v+this._canvas.getWidth()/2,_=-g*v+this._canvas.getHeight()/2;this._canvas.setViewportTransform([v,0,0,v,y,_]),u.width=c.refWidth,u.height=c.refHeight}if(this._cropEl=document.createElement("div"),!1!==window.clCropHelp){var w=this;this._cropEl.classList.add("cl-po--crop-help"),"ontouchstart"in window||navigator.msMaxTouchPoints?this._cropEl.classList.add("touch"):this._cropEl.classList.add("cursor");var b=function(){w._cropEl&&(w._cropEl.classList.remove("cl-po--crop-help"),w._canvas.off("object:moving",b),window.clCropHelp=!1)};this._canvas.on("object:moving",b),setTimeout(b,9e3)}wt(es((function(t){var n=e._object;e._interactiveScaled=!0;var i=Math.min(u.width,u.height)/10,r=i/n.width;if(t)n.scaleX+=r,n.scaleY+=r,n.left-=i/2,n.top-=i/2;else{if(n.scaleX-=r,n.scaleY-=r,Math.round(n.getScaledWidth())<u.width||Math.round(n.getScaledHeight())<u.height)return n.scaleX+=r,void(n.scaleY+=r);n.left+=i/2,n.top+=i/2}l._canvas.fire("object:moving",{target:e._object}),l._canvas.renderAll()}),(function(t){e.params.rotate=e.params.rotate|e._rotate|0,e.params.rotate+=t,e.params.rotate=e.params.rotate%360,l.renderPreview()}),(function(){E.merge(e.params,p),l._optionCrop({detail:i})}),(function(){e._interactive=!0,e._interactiveScaled=!0,l._canvas.fire("object:modified",{target:e._object}),l._optionCrop({detail:i})})),this._cropEl),this._wrapper.appendChild(this._cropEl),this._highlight(!0);var x=this._wrapper.getBoundingClientRect();x.top<0&&window.scrollTo&&window.scrollTo(x.left,x.top+window.scrollY-50)}this._canvas.discardActiveObject(),this.renderPreview().then((function(){n.settings.cropMode&&n.selectLayer(n.settings.cropLayer)}))}}}},{key:"_clearVisibleEditor",value:function(){this.settings.editorMode&&(this.visibleEditor={})}},{key:"_optionLayerUpdate",value:function(t){if(t._layer&&t._layer._object){var e=this,n=this._canvas.getObjects().indexOf(t._layer._object);return this._canvas.remove(t._layer._object),this._renderLayer(t._layer).then((function(t){e._canvas.moveTo(t,n)}))}}},{key:"_watchWindowResize",value:function(){var t=this,e=E.debounced(200,(function(e){t._resizeCanvas(),t.settings.stickyMode&&t._stickyPreview(!0)}));this._resizeCanvas(),window.addEventListener("resize",e)}},{key:"_watchWindowScroll",value:function(){if(this.settings.sticky){var t=this,e=!1;window.addEventListener("scroll",(function(){if(!e){var n=t;window.requestAnimationFrame((function(){n._stickyPreview(),e=!1})),e=!0}})),window.addEventListener("preview:active",(function(){return t._stickyPreview()}))}}},{key:"_getContainerWidth",value:function(){for(var t=this._wrapper.offsetWidth,e=this._wrapper;0===t&&e.parentNode;)(e=e.parentNode).offsetWidth>0&&(t=E.findInnerDimensions(e).width);return t}},{key:"_responsiveCanvasHeight",value:function(){if(!this.settings.cropMode){var t=0;this._canvas.forEachObject((function(e){if(e.visible&&e._layer&&e._layer.params.responsive){var n=e.getBoundingRect(),i=n.top+n.height;i>t&&(t=i)}}));var e=this.previewConfig.height*this._canvas.getZoom();t>0&&t<e?this._canvas.setHeight(t):this._canvas.setHeight(e)}}},{key:"_resizeCanvas",value:function(){var t=this._canvas.getWidth()/this._canvas.getHeight(),e=this._getContainerWidth(),n=e/this._canvas.getWidth(),i=this._canvas.getZoom()*n;1!==i&&(this._canvas.setDimensions({width:e,height:e/t}),this._canvas.setZoom(i)),this._highlightEl&&this._highlight(!0)}},{key:"_highlight",value:function(t){if(this._highlightEl&&(document.body.removeChild(this._highlightEl),delete this._highlightEl,document.body.classList.remove("cl-highlight")),t){this._highlightEl=document.createElement("div"),this._highlightEl.className="cl-po--preview-highlight";var e=E.getCalculatedPosition(this._wrapper),n=e.right-e.left+20,i=e.bottom-e.top+20;this._highlightEl.style.display="block",this._highlightEl.style.position="absolute",this._highlightEl.style.width="".concat(n,"px"),this._highlightEl.style.height="".concat(i,"px"),this._highlightEl.style.top="".concat(e.top-10,"px"),this._highlightEl.style.left="".concat(e.left-10,"px"),document.body.appendChild(this._highlightEl),document.body.classList.add("cl-highlight")}}},{key:"_stickyPreview",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this._canvas.lowerCanvasEl,n=e.getBoundingClientRect(),i=this._stickyMaxTop||0;if(n.top>i||!this.active||this.settings.cropMode)this.settings.stickyMode&&(P.debug("----\x3e sticky end",e),this.element.removeEventListener("layer:changed",this._syncSticky),this.element.removeEventListener("preview:rendered",this._syncSticky),document.body.removeChild(this._stickyEl),delete this._stickyEl,delete this._stickyImgEl,delete this._stickyTarget,delete this._stickyMaxTop,this.settings.stickyMode=!1);else{var r,o,a=!1,s=window.clStickyMobileSize||25;this._stickyTarget=this._stickyTarget||document.querySelector("#"+this.config.uuid);var l=this._stickyTarget.getBoundingClientRect();if(l.top>n.bottom&&(a=!0,r=window.innerHeight/100*s,o="overlay"===this.settings.stickyMobile?r:0),this.settings.stickyMode){var c=this._stickyEl.getBoundingClientRect();if(l.bottom>0){var u=c.height-l.bottom;this._stickyEl.style.top=u>0?-1*u+"px":"0px"}else this._stickyEl.style.top=-1*(c.height+5)+"px";t&&(a?(this._stickyEl.classList.add("mobile"),this._stickyEl.classList.add(this.settings.stickyMobile),this._stickyEl.style.removeProperty("left"),this._stickyEl.style.removeProperty("width"),this._stickyImgEl.style.height=r+"px",this._stickyMaxTop=-1*(n.height-o)):(this._stickyEl.classList.remove("mobile"),this._stickyImgEl.style.removeProperty("height"),this._stickyEl.style.left=n.left+"px",this._stickyEl.style.width=n.width+"px"))}else if(P.trace("---\x3e sticky check"+l.bottom+" > "+n.bottom),l.bottom>n.bottom){if(a){if(n.bottom>o)return;this._stickyMaxTop=-1*(n.height-o)}this._stickyEl=document.createElement("div"),this._stickyEl.className="cl-po--preview-sticky",this._stickyEl.style.position="fixed",this._stickyImgEl=document.createElement("img"),a?(this._stickyEl.classList.add("mobile"),this._stickyEl.classList.add(this.settings.stickyMobile),this._stickyImgEl.style.height=r+"px"):(this._stickyEl.style.left=n.left+"px",this._stickyEl.style.width=n.width+"px"),this._stickyEl.style.top="0px",this._stickyEl.addEventListener("click",(function(t){var n=E.getCalculatedPosition(e);window.scroll({top:n.top-50,behavior:"smooth"})})),this._stickyEl.appendChild(this._stickyImgEl),this._syncSticky(),document.body.appendChild(this._stickyEl),this.element.addEventListener("layer:changed",this._syncSticky),this.element.addEventListener("preview:rendered",this._syncSticky),this.settings.stickyMode=!0,P.debug("--\x3e sticky start",this._stickyEl,this._stickyTarget)}}}},{key:"_syncThemeGallery",value:function(){if(hi.themeGallery)try{if(!1!==this._themeGalleryImgEl){if(this._themeGalleryVariant&&this.settings.variantId!==this._themeGalleryVariant)return void(this._themeGalleryVariant=this.settings.variantId);if(!this._themeGalleryImgEl)if(void 0===this.previewConfig.views||this.previewConfig.gallery&&!0!==this.config.previewConfig.galleryConfig.hideThumbnails)this._themeGalleryImgEl=!1;else{var t;if(this.settings.product.media&&this.settings.product.media.length){for(var e=0,n=0;n<this.previewConfig.layers.length;n++){var i=this.previewConfig.layers[n];if("product"===i.type){this._themeGalleryVariant=this.settings.variantId,i.params.imgPos?this.settings.product.media.length>i.params.imgPos-1&&(e=i.params.imgPos-1):i.params.variant&&delete this._themeGalleryVariant;break}}t=this.settings.product.media[e]}if(t){var r=void 0,o=E.pathBaseName(t.src,!1);if(this.settings.selectorThumbnail&&(r=document.querySelectorAll(this.settings.selectorThumbnail),P.debug("found "+r.length+" gallery thumbnails with selector: ",this.settings.selectorThumbnail,r)),!r||0===r.length){r=[];var a=document.querySelectorAll('img[src*="'+o+'"], img[data-src*="'+o+'"], img[data-srcset*="'+o+'"]');if(a.length>0)for(var s=0;s<a.length;s++){var l=a[s],c=E.findParent(l,"form");null!==c&&-1!==c.action.indexOf("cart")||r.push(l)}P.debug("found "+r.length+" gallery thumbnails with src: ",o,r)}if(r.length){for(var u=Number.MAX_VALUE,p=0;p<r.length;p++){var d=r[p],f=(d.src&&-1===d.src.indexOf("data:")?d.src:null)||d.dataset.src||d.dataset.srcset,h=E.pathBaseName(f,!1),v=(h=this.shopifyStore.stripImageDimension(h)).replace(o,"").length;v<u&&(u=v,this._themeGalleryImgEl=d)}P.debug("selected theme gallery thumbnail: ",this._themeGalleryImgEl)}}}if(this._themeGalleryImgEl&&this._themeGalleryImgEl.click){var m=this,g=E.isHidden(this._wrapper);hi.themeGalleryTimeout?setTimeout((function(){return m._themeGalleryImgEl.click()}),300):this._themeGalleryImgEl.click(),g&&setTimeout((function(){return window.dispatchEvent(new Event("resize"))}),500)}}}catch(t){P.error("error syncing theme gallery ",t)}}},{key:"_triggerEvent",value:function(t,e){var n=new CustomEvent(t,{detail:e,cancelable:!0,bubbles:!0});this.element.dispatchEvent(n)}},{key:"_patchCanvasTouchScroll",value:function(){window.clCanvasTouchStart||(window.clCanvasTouchStart=fabric.Canvas.prototype._onTouchStart,fabric.util.object.extend(fabric.Canvas.prototype,{_onTouchStart:function(t){var e=this.findTarget(t);(!this.allowTouchScrolling||e||this.isDrawingMode)&&window.clCanvasTouchStart.call(this,t)}}))}}]),e}(),Es=ks,Cs=function(){"use strict";function t(){i(this,t)}return o(t,null,[{key:"generateId",value:function(){return Date.now().toString()}},{key:"getItem",value:function(e){return t.storage.hasOwnProperty(e)||(t.storage[e]=t.parseItem(e)),t.storage[e]}},{key:"storeItem",value:function(e,n){t.storage[e]=n,window.localStorage&&localStorage.setItem(t.keyPrefix+e,JSON.stringify(n))}},{key:"parseItem",value:function(e){if(window.localStorage){var n=localStorage.getItem(t.keyPrefix+e);if(n)return JSON.parse(n)}return{}}}]),t}();Cs.storage={},Cs.keyPrefix="cl_";var Ps=Cs,Os=function(){"use strict";function t(e,n,r){i(this,t);this.settings=E.extend({product:{},variant:{},editorMode:!1},r||{}),this.config=e,this._productForm=n,this._init()}return o(t,[{key:"_init",value:function(){for(var t=[],e=0;e<this.settings.product.options.length;e++){for(var n=this.settings.product.options[e],i={name:n.name,label:n.name,type:"select",id:"option_"+this.settings.product.id+"_"+n.name.replace(/^[^a-zA-Z]+|[^\w]+/g,""),params:{name:"v_"+n.name},visible:!0,values:[],_variantOption:n,_themeEl:null},r=0;r<this.config.variantOptions.length;r++){var o=this.config.variantOptions[r];if(o.name===n.name){E.merge(i,o);break}}this.settings.variant.id?i.value=this.settings.variant["option"+n.position]:i.value=n.values[0];for(var a=i.values.length>0,s=[],l=0;l<n.values.length;l++){var c=n.values[l],u=null;if(a)for(var p=0;p<i.values.length;p++){var d=i.values[p];if(d&&d.value===c){u=d;break}}u||(u={text:c,value:c}),s.push(u)}if(i.values=s,t.push(i),!this.settings.editorMode){if(i._themeEl=this._productForm.querySelector('[data-live-variant-option="'+n.position+'"]'),!i._themeEl){for(var f=this._productForm.querySelectorAll("select"),h=function(t){if(t.length===n.values.length){for(var e=0;e<t.length;e++){var i=t[e];if(-1===n.values.indexOf(i))return!1}return!0}return!1},v=0;v<f.length;v++){var m=f[v];if(m.dataset.index&&-1!==m.dataset.index.indexOf(n.position.toString())){i._themeEl=m;break}for(var g=[],y=m.querySelectorAll("option"),_=0;_<y.length;_++){var w=y[_];g.push(w.value)}if(h(g)){i._themeEl=m;break}}if(!i._themeEl)for(var b=this._productForm.querySelectorAll("input[type=radio]"),x=[],k=0;k<b.length;k++){var C=b[k];if(-1===x.indexOf(C.name)){x.push(C.name);var P=this._productForm.querySelectorAll('input[name="'+C.name+'"]');if(C.dataset.index&&-1!==C.dataset.index.indexOf(n.position.toString())){i._themeEl=P;break}for(var O=[],S=0;S<P.length;S++){var T=P[S];O.push(T.value)}if(h(O)){i._themeEl=P;break}}}}if(i._themeEl&&hi.productVariantHide){var L=i._themeEl;E.isNodeList(i._themeEl)&&(L=L[0]);for(var I=L;I.parentNode!==this._productForm&&-1===I.textContent.indexOf(n.name);)I=I.parentNode;I.style.display="none"}var M=this._productForm.querySelector("[data-live-variant-options]");null!=M&&(M.style.display="none")}}this.config.variantOptions=t}},{key:"syncVariantChanges",value:function(t){if(t._themeEl)if(E.isNodeList(t._themeEl))for(var e=0;e<t._themeEl.length;e++){var n=t._themeEl[e];n.value==t.value&&(n.checked=!0,n.dispatchEvent(new Event("change",{bubbles:!0})))}else if("SELECT"===t._themeEl.tagName){for(var i=0;i<t._themeEl.options.length;i++){if(t._themeEl.options[i].value==t.value){t._themeEl.selectedIndex=i;break}}t._themeEl.dispatchEvent(new Event("change",{bubbles:!0}))}}},{key:"syncAllVariantOptions",value:function(){for(var t=0;t<this.config.variantOptions.length;t++){var e=this.config.variantOptions[t];this.syncVariantChanges(e)}}},{key:"findSelectedVariant",value:function(){this.settings.variant=null;for(var t=0;t<this.settings.product.variants.length;t++){for(var e=this.settings.product.variants[t],n=!0,i=0;i<this.config.variantOptions.length;i++){var r=this.config.variantOptions[i];if(e["option"+r._variantOption.position]!=r.value){n=!1;break}}if(n){this.settings.variant=e;break}}return this.settings.variant}},{key:"resetVariant",value:function(){this.settings.variant=this.settings.product.variants[0];for(var t=0;t<this.config.variantOptions.length;t++){var e=this.config.variantOptions[t],n="option"+e._variantOption.position;e.value=this.settings.variant[n]}}},{key:"filterVariantValues",value:function(){var t={};if(this.config.variantOptions.length>1)for(var e=0;e<this.config.variantOptions.length;e++){var n=this.config.variantOptions[e],i="option"+n._variantOption.position;if(e>0){for(var r=n._values||n.values,o=[],a=0;a<r.length;a++){for(var s=r[a],l=!1,c=0;c<this.settings.product.variants.length;c++){var u=this.settings.product.variants[c],p=!0;for(var d in t)if(t.hasOwnProperty(d)&&t[d]!==u[d]){p=!1;break}if(p&&u[i]===s.value){l=!0;break}}l&&o.push(s)}r.length!==o.length&&(n._values=r,n.values=o)}t[i]=n.value}}}]),t}();function Zn(){var t=m(['<div class="cl-embed"><iframe src="https://www.youtube.com/embed/','?controls=1&amp;enablejsapi=1&amp;modestbranding=1&amp;playsinline=1&amp;rel=0" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="allowfullscreen"></iframe></div>']);return Zn=function(){return t},t}function ti(){var t=m(['<div class="cl-embed"><iframe src="https://player.vimeo.com/video/','?byline=0&amp;controls=1&amp;playsinline=1&amp;title=0" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="allowfullscreen"  title="Alt Text Here"></iframe></div>']);return ti=function(){return t},t}function Ii(){var t=m(['<div class="cl-embed"><video playsinline="playsinline" controls="controls" preload="none" muted="muted" poster="','">\n        ',"\n    </video></div>"]);return Ii=function(){return t},t}function Mi(){var t=m(['\n            <source src="','" type="','">\n        ']);return Mi=function(){return t},t}function Fi(){var t=m(['\n<div class="cl-po--gallery ','">\n\n    <div class="splide cl-po--gallery-main  ','">\n        <div class="splide__track">\n            <div class="splide__list">\n                ',"\n            </div>\n        </div>\n    </div>\n    ","\n</div>\n"]);return Fi=function(){return t},t}function Ai(){var t=m(['\n                    <div class="splide__slide">\n                        ',"\n                    </div>\n                "]);return Ai=function(){return t},t}function Ri(){var t=m(['<div class="cl-po--gallery-img" data-media-position='," >","</div>"]);return Ri=function(){return t},t}function ji(){var t=m(['<img class="cl-po--gallery-img" src='," data-media-position="," />"]);return ji=function(){return t},t}function Di(){var t=m(['\n        <div class="splide cl-po--gallery-thumbnails ','">\n            <div class="splide__track">\n                <div class="splide__list">\n                    ',"\n                </div>\n            </div>\n        </div>\n    "]);return Di=function(){return t},t}function Ni(){var t=m(['\n                    <div class="splide__slide">\n                        <img class="cl-po--gallery-thumbnail" src='," data-media-position="," />\n                    </div>\n                "]);return Ni=function(){return t},t}ii=function(t){return t};var Ss,Ts,Ls,Is,Ms=function(t,e,n){return bt(Is||(Is=ii(Fi(),0,0,0,0)),e.layout,Tn({"hide-thumb-mobile":e.hideThumbnailsMobile}),Pn(t,(function(t){return t.id}),(function(t,e){return bt(Ss||(Ss=ii(Ai(),0)),"video"===t.media_type||"external_video"===t.media_type?bt(Bs||(Bs=ii(Ri(),0,0)),t.position,function(t){if("external_video"===t.media_type){if("youtube"===t.host)return bt(Ds||(Ds=ii(Zn(),0)),t.external_id);if("vimeo"===t.host)return bt(Ns||(Ns=ii(ti(),0)),t.external_id)}for(var e=[],n=[],i=t.sources.length-1;i>=0;i--){var r=t.sources[i];-1===n.indexOf(r.mime_type)&&(e.push(r),n.push(r.mime_type))}return bt(qs||(qs=ii(Ii(),0,0)),t.preview_image.src,Pn(e,(function(t){return bt(Vs||(Vs=ii(Mi(),0,0)),t.url,t.mime_type)})))}(t)):bt(Hs||(Hs=ii(ji(),0,0)),t.src,t.position))})),e.hideThumbnails?null:bt(Ls||(Ls=ii(Di(),0,0)),Tn({"cl-hide-mobile":e.hideThumbnailsMobile}),Pn(t,(function(t){return t.id}),(function(t,e){return bt(Ts||(Ts=ii(Ni(),0,0)),function(t,e){if(function(t){return t&&-1!==t.indexOf("https://cdn.shopify.com/")}(t)){var n=t.substring(t.lastIndexOf(".")+1);return"svg"===n?t:t.replace("."+n,"")+"_"+e+"."+n}return t}(t.src||t.preview_image.src,"200x"),t.position)}))))},Fs=function(){"use strict";function t(e,n,r,o){i(this,t);if(this.config=e,this.settings=E.extend({api:"https://api.cloudlift.app",assets:"https://assets.cloudlift.app",queryParams:{},selector:".cl-gallery",position:"",sticky:!1,stickyMobile:"overlay",classNamePrefix:"cl-po",product:{},variantId:null,galleryConfig:{exclude:[],hideThumbnails:!1,hideThumbnailsMobile:!1,layout:"bottom",arrows:!1,arrowsThumbnails:!1,pagination:!1,paginationMobile:!1,paginationThumbnails:!1,previewActive:!1}},o||{}),window.clGallery&&(this.settings.galleryConfig=E.extend(this.settings.galleryConfig,window.clGallery)),this._previews=[],this.media=[],this._productForm=n,this.conditionsEngine=r,null!==this.settings.selector&&(E.isElement(this.settings.selector)?this.element=this.settings.selector:this.element=document.querySelector(this.settings.selector)),null!=this.element){var a=this;P.info("--\x3e new product-gallery: ",this.element),this.resources=[this.settings.assets+"/static/lib/splidejs/splide.min.js",this.settings.assets+"/static/lib/splidejs/splide.min.css"],this.ready=Ti.loadOnce(this.resources,"product-gallery",{async:!1}).then((function(){return a._init()}))}else P.warn("no elements with selector found: ",this.settings.selector)}return o(t,[{key:"destroy",value:function(){if(this._previews)for(var t=0;t<this._previews.length;t++){this._previews[t].destroy()}this.element.removeChild(this._wrapper)}},{key:"render",value:function(){wt(Ms(this.media,this.settings.galleryConfig),this._wrapper)}},{key:"selectPreview",value:function(t){this._splideThumbnails.go(this._getMediaIndex(t))}},{key:"_init",value:function(){var t,e=this,n=function(t){var n=i[t],r=e._wrapper.querySelector("."+e.settings.classNamePrefix+'--gallery-main [data-media-position="'+n.position+'"]');if(r){var o=r.parentNode;o.removeChild(r);var a=new Es(e.config,n,e._productForm,e.conditionsEngine,{api:e.settings.api,assets:e.settings.assets,selector:o,selectorThumbnail:e.settings.selectorThumbnail,sticky:e.settings.sticky,stickyMobile:e.settings.stickyMobile,product:e.settings.product,variantId:e.settings.variantId,editorMode:e.settings.editorMode});a.active=1===n.position,0===t&&e.settings.galleryConfig.previewActive&&isNaN(e.settings.galleryConfig.position)&&(a.active=!0),a.active&&(e._preview=a),e.settings.galleryConfig.hideThumbnails||(a._thumbnailEl=e._wrapper.querySelector("."+e.settings.classNamePrefix+'--gallery-thumbnails [data-media-position="'+n.position+'"]')),s.push(a.ready.then((function(){if(a._thumbnailEl){var t=function(t){var e={format:"png",multiplier:200/a._canvas.getHeight()};a._thumbnailEl.src=a._canvas.toDataURL(e),a._canvas.requestRenderAll()};a.element.addEventListener("layer:changed",t),a.element.addEventListener("preview:rendered",t)}}))),e._previews.push(a)}else P.warn("[live-options] gallery - missing media image for view: ",n)};this._wrapper=document.createElement("div"),this._wrapper.className=this.settings.classNamePrefix+"--gallery-wrapper",this._wrapper.setAttribute("id",this.config.uuid+"_gallery"),this._wrapper.style.width="100%",this.settings.position?(this.element.insertAdjacentElement(this.settings.position,this._wrapper),this.element!==this._wrapper.parentNode&&(this.element=this._wrapper.parentNode)):this.element.appendChild(this._wrapper);var i=[this.config.previewConfig];if(this.config.previewConfig.views.length&&(t=i).push.apply(t,g(this.config.previewConfig.views)),this._filterProductMedia(i),this.render(),this._splideMain=new Splide(this._wrapper.querySelector("."+this.settings.classNamePrefix+"--gallery-main"),{type:"fade",keyboard:"focused",drag:!this.settings.editorMode&&!this.settings.galleryConfig.hideThumbnails,rewind:!0,arrows:this.settings.galleryConfig.arrows,pagination:this.settings.galleryConfig.pagination||this.settings.galleryConfig.paginationMobile,classes:{pagination:"splide__pagination"+(this.settings.galleryConfig.paginationMobile?" mobile":"")}}),this.settings.galleryConfig.hideThumbnails){var r=this;this._splideThumbnails={go:function(t){r._splideMain.go(t),r._selectPreview(t)}},this._splideMain.mount()}else{var o=this,a="left"===this.settings.galleryConfig.layout||"right"===this.settings.galleryConfig.layout?"ttb":"ltr";this._splideThumbnails=new Splide(this._wrapper.querySelector("."+this.settings.classNamePrefix+"--gallery-thumbnails"),{keyboard:"focused",autoWidth:!0,fixedHeight:100,height:"ttb"===a?600:0,direction:a,rewind:!0,gap:3,arrows:this.settings.galleryConfig.arrowsThumbnails,pagination:this.settings.galleryConfig.paginationThumbnails,isNavigation:!0,breakpoints:{600:{fixedHeight:66}}}),this._splideThumbnails.mount(),this._splideMain.sync(this._splideThumbnails).mount(),this._splideThumbnails.on("moved",(function(t,e){o._selectPreview(t)}))}for(var s=[],l=0;l<i.length;l++)n(l);return this._watchFormChanges(),this._splideMain.options.drag&&!this._isStatic(i)&&this._watchPreviewChanges(),this.settings.editorMode&&window.clProductGalleryPosition?(this.selectPreview(window.clProductGalleryPosition),delete window.clProductGalleryPosition):isNaN(this.settings.galleryConfig.position)?this._selectVariantThumbnail(this._getVariantById(this.settings.variantId)):this.selectPreview(this.settings.galleryConfig.position),Promise.all(s)}},{key:"_filterProductMedia",value:function(t){var e=this;this.media=this.settings.product.media.filter((function(t){return-1===e.settings.galleryConfig.exclude.indexOf(t.position)})),this.settings.galleryConfig.hideThumbnails&&(this.media=this.media.filter((function(e){for(var n=0;n<t.length;n++){if(t[n].position===e.position)return!0}return!1})))}},{key:"_getMediaIndex",value:function(t){for(var e=0;e<this.media.length;e++)if(this.media[e].position===t)return e;return-1}},{key:"_getMediaPosition",value:function(t){return t<this.media.length?this.media[t].position:-1}},{key:"_selectPreview",value:function(t){if(this.media.length>t){var e=this.media[t];!this.settings.galleryConfig.previewActive&&this._preview&&(this._preview.active=!1);for(var n=0;n<this._previews.length;n++){var i=this._previews[n];if(i.previewConfig.position===e.position){this._preview&&(this._preview.active=!1),this._preview=i,this._preview.active=!0,this._triggerEvent("preview:active",{position:e.position});break}}}}},{key:"_selectVariantThumbnail",value:function(t){if(t&&(t.featured_media||t.featured_image)){var e=t.featured_media||t.featured_image,n=this._getMediaIndex(e.position);if(-1!==n)this._splideThumbnails.go(n);else for(var i=0;i<this._previews.length;i++)for(var r=this._previews[i],o=0;o<r.previewConfig.layers.length;o++){var a=r.previewConfig.layers[o];if("product"===a.type&&a.params.variant&&-1!==(n=this._getMediaIndex(r.previewConfig.position)))return void this._splideThumbnails.go(n)}}}},{key:"_watchFormChanges",value:function(){if(this._productForm){var t=this;this._productForm.addEventListener("option:changed",(function(e){return t._optionChanged(e)})),this._productForm.addEventListener("option:crop",(function(e){return t._optionChanged(e)})),this._productForm.addEventListener("variant:changed",(function(e){return t._variantChanged(e)}))}}},{key:"_watchPreviewChanges",value:function(){var t=this;this.element.addEventListener("preview:rendered",(function(e){return t._checkInteractive(e)})),this.element.addEventListener("preview:active",(function(e){return t._checkInteractive(e)}))}},{key:"_variantChanged",value:function(t){this.settings.variantId=t.detail.variantId,this._selectVariantThumbnail(this._getVariantById(this.settings.variantId))}},{key:"_optionChanged",value:function(t){for(var e=t.detail,n=-1,i=-1,r=this._getMediaPosition(this._splideMain.index),o=0;o<this._previews.length;o++){var a=this._previews[o];if(a._canvas)for(var s=a._canvas.getObjects(),l=0;l<s.length;l++){var c=s[l];if(c._layer&&c._layer.params.option===e.name){a.previewConfig.position!==n&&(n=a.previewConfig.position,-1===i&&(i=n));break}}if(-1===n){for(var u=0;u<a.previewConfig.layers.length;u++){if(a.previewConfig.layers[u].params.option===e.name){a.previewConfig.position!==n&&(n=a.previewConfig.position,-1===i&&(i=n));break}}if(-1===n)for(var p=0;p<a.previewConfig.layers.length;p++){var d=a.previewConfig.layers[p];if(d.conditions.length){for(var f=!1,h=0;h<d.conditions.length;h++){var v=d.conditions[h];if(v.field===e.name&&this.conditionsEngine.evaluateOptionCondition(v,[e])&&a.previewConfig.position!==n){n=a.previewConfig.position,-1===i&&(i=n),f=!0;break}}if(f)break}}}if(n===r)return;n=-1}-1!==i&&(this.selectPreview(i),t&&"option:crop"===t.type&&this._selectPreview(this._getMediaIndex(i)))}},{key:"_getVariantById",value:function(t){if(this.settings.product.variants&&this.settings.product.variants.length>0)for(var e=0;e<this.settings.product.variants.length;e++){var n=this.settings.product.variants[e];if(n.id.toString()===t.toString())return n}return null}},{key:"_checkInteractive",value:function(t){var e=!1;if(this._preview&&this._preview._canvas)if(this._preview.settings.cropMode)e=!0;else for(var n=this._preview._canvas.getObjects(),i=0;i<n.length;i++){var r=n[i];if(r._layer&&r._layer.params.interactive){e=!0;break}}this._splideMain.Components.Drag.disabled=e}},{key:"_isStatic",value:function(t){for(var e=0;e<t.length;e++)for(var n=t[e],i=0;i<n.layers.length;i++){var r=n.layers[i];if(r.params.interactive||r.params.crop&&"upload"===r.type)return!1}return!0}},{key:"_triggerEvent",value:function(t,e){var n=new CustomEvent(t,{detail:e,cancelable:!0,bubbles:!0});this.element.dispatchEvent(n)}}]),t}(),As=function(){"use strict";function t(e){i(this,t),this.config=e}return o(t,[{key:"translate",value:function(){try{var t=JSON.stringify(this.config.options),e=t.indexOf("#");if(-1!==e)for(var n=/^#[0-9A-F]{6}$/i;-1!==e;){var i=t.substr(e,7);if(!n.test(i))break;P.trace("[config-translate] skipping color:",i),e=t.indexOf("#",e+1)}-1!==e?(this._translateOptions(this.config.options),this.config.preview&&this._translatePreview(this.config.previewConfig),P.debug("[config-translate] translated options")):P.debug("[config-translate] skipped options translation")}catch(t){P.debug("[config-translate] error in translation",t)}}},{key:"_translateOptions",value:function(t){for(var e=0;e<t.length;e++){var n=t[e];if(n.name&&(n.name=S.translate(n.name)),n.label&&(n.label=S.translate(n.label)),n.value&&(n.value=S.translate(n.value)),n.params.info&&(n.params.info=S.translate(n.params.info)),n.params.help&&(n.params.help=S.translate(n.params.help)),n.params.placeholder&&(n.params.placeholder=S.translate(n.params.placeholder)),n.params.validationMsg&&(n.params.validationMsg=S.translate(n.params.validationMsg)),n.params.collapseLabel&&(n.params.collapseLabel=S.translate(n.params.collapseLabel)),n.values)for(var i=0;i<n.values.length;i++){var r=n.values[i];r.value&&(r.value=S.translate(r.value)),r.text&&(r.text=S.translate(r.text))}n.conditions.length&&this._translateConditions(n.conditions),n.options&&n.options.length&&this._translateOptions(n.options)}}},{key:"_translatePreview",value:function(t){var e,n=[t];t.gallery&&(e=n).push.apply(e,g(t.views));for(var i=0;i<n.length;i++){var r=n[i];this._translateLayers(r.layers)}}},{key:"_translateLayers",value:function(t){for(var e=0;e<t.length;e++){var n=t[e];for(var i in n.params)n.params.hasOwnProperty(i)&&-1!==i.indexOf("option")&&(n.params[i]=S.translate(n.params[i]));n.params.text&&(n.params.text=S.translate(n.params.text)),n.conditions.length&&this._translateConditions(n.conditions),n.layers&&n.layers.length&&this._translateOptions(n.layers)}}},{key:"_translateConditions",value:function(t){for(var e=0;e<t.length;e++){var n=t[e];if(n.field&&(n.field=S.translate(n.field)),n.value&&-1!==n.value.indexOf("#"))if(-1!==n.value.indexOf(",")){for(var i=n.value.split(","),r=0;r<i.length;r++)i[r]=S.translate(i[r]);n.value=i.join(",")}else n.value=S.translate(n.value)}}}]),t}(),Rs=function(){"use strict";function t(e,n){i(this,t);if(this.config=e,this.settings=E.extend({api:"https://api.cloudlift.app",assets:"https://assets.cloudlift.app",queryParams:{},selector:".cl-options",position:"",selectorPreview:".cl-preview",selectorThumbnail:"",positionPreview:"",stickyPreview:!1,stickyPreviewMobile:"overlay",selectorForm:'form[action*="/cart/add"]',classNamePrefix:"cl-po",product:{},priceDraft:!0,errorPrefix:"product.options.validity.",editorMode:!1,visible:{},visibleEditor:{},lists:null},n||{}),this.visible={},this.visibleEditor={},this.shopifyStore=F.getInstance(),this.shopifyCart=R.getInstance(),this.conditionsEngine=new is({},{product:this.settings.product,options:this.config.options}),this._upload=Li.getInstance({api:this.settings.api,queryParams:this.settings.queryParams}),this.price={options:{},total:0,totalBase:0,variants:[],variantTotal:0},E.isElement(this.settings.selector)?this.element=this.settings.selector:this.element=document.querySelector(this.settings.selector),null!=this.element){var r=this;P.info("--\x3e new product-options: ",this.element),vi.currencyConvert&&1!==vi.currencyFactor?this._variantsInCurrency().then((function(){return r._init()})):this._init()}else P.warn("no elements with selector found: ",this.settings.selector)}return o(t,[{key:"destroy",value:function(){this.removeCss(),this.element.removeChild(this._wrapper),this._destroyPreview()}},{key:"updateVariantOptions",value:function(t){this.config.variantOptions=t,this._variantOptions&&(this._variantOptions.settings.variant=this._getVariantById(this._variantId),this._variantOptions._init())}},{key:"updateOptions",value:function(t){var e,n,i,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];r&&(n=this.getValues()),o&&(i=this._getControllers()),this.config.options.length=0,(e=this.config.options).push.apply(e,g(t)),this._generateOptionIds(this.config.options,"option_"+this.settings.product.id+"_"),this._translate.translate(),r&&this.setValues(n),o&&this._setControllers(i),this._destroyTooltips(),this.render()}},{key:"updatePreview",value:function(t){var e=this;this.config.preview=!0,this._translate._translatePreview(t),this._preview?this._preview.updateConfig(t).then((function(){return e.render()})):(this.config.previewConfig=t,this._initPreview())}},{key:"updateCss",value:function(t){this.removeCss(),this._style=E.addStyleElement(t,this.settings.styleSelector)}},{key:"removeCss",value:function(){this._style&&this._style.parentNode.removeChild(this._style)}},{key:"validate",value:function(){var t=this._validateOptions(this.config.options);return P.debug("validated product-options: ",this.config,t),this.render(),t}},{key:"render",value:function(){var t=[];try{var e,n;this._evaluateOptionConditions(this.config.options),this._evaluateOptionPrice(this.config.options),this._variantIdOption&&t.push(this._variantIdOption),this._variantOptions&&this.config.variantOptions.length&&(e=t).push.apply(e,g(this.config.variantOptions)),(n=t).push.apply(n,g(this.config.options)),wt(Ka(t,{uuid:this.config.uuid,editorMode:this.settings.editorMode,price:this.price,product:this.settings.product,productForm:this._productForm,productFormLink:this._productFormLink,assets:this.settings.assets},this._optionValueChanged.bind(this),this._clearOptionError.bind(this),this.validate.bind(this)),this._wrapper),this._triggerEvent("options:rendered",this),this._initTooltips()}catch(e){P.error("failed to render product options",t,e)}}},{key:"getValues",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.config.options,n=0;n<e.length;n++){var i=e[n];i.options&&i.options.length?this.getValues(t,i.options):t[i.name]=i.value}return t}},{key:"setValues",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.config.options,n=0;n<e.length;n++){var i=e[n];if(i.options&&i.options.length)this.setValues(t,i.options);else if(t.hasOwnProperty(i.name))i.value=t[i.name];else if("upload-lift"===i.type){var r=[];for(var o in t)t.hasOwnProperty(o)&&-1!==o.indexOf(i.name+"_")&&r.push(t[o]);r.length&&(i.value=r.join(","))}}}},{key:"_init",value:function(){if(this.config.css&&this.updateCss(this.config.css),this._wrapper=document.createElement("div"),this._wrapper.className=this.settings.classNamePrefix+"--wrapper",this._wrapper.setAttribute("id",this.config.uuid),this.settings.position?(this.element.insertAdjacentElement(this.settings.position,this._wrapper),this.element!==this._wrapper.parentNode&&(this.element=this._wrapper.parentNode)):this.element.appendChild(this._wrapper),this._generateOptionIds(this.config.options,"option_"+this.settings.product.id+"_"),hi.productOptionsClear&&(this._optionValuesClear=this.getValues()),this._findProductForm()){var t=this;this._translate=new As(this.config),this._translate.translate(),this._productForm.noValidate=!0,this._productForm.addEventListener("options:render",(function(e){return t.render()})),this._watchFormSubmit(),this._watchVariantChanges(),this.config.preview&&this._initPreview(),E.hasQueryParam(window.location.href,"item")&&this._restoreCartItem()}else P.warn("product-options no product form found for element: ",this.element,this.config)}},{key:"_variantsInCurrency",value:function(){var t=this,e=[];vi.priceVariant&&e.push(this.shopifyStore.getProduct(vi.priceProductHandle||"product-options").then((function(t){vi.priceVariantValue=t.price/100})).catch((function(){return!0})));for(var n=function(n){var i=n.priceVariant,r=i.handle;!r&&i.title&&(r=i.title.substring(0,i.title.indexOf("-")).trim().replaceAll(" ","-").toLowerCase()),r&&e.push(e.push(t.shopifyStore.getProduct(r).then((function(t){if(t.variants)for(var e=0;e<t.variants.length;e++){var r=t.variants[e];if(r.id.toString()===i.id.toString()){n.price=r.price/100;break}}})).catch((function(){return!0}))))},i=function(t){if(t.values)for(var e=0;e<t.values.length;e++){var i=t.values[e];i.priceVariant&&n(i)}},r=0;r<this.config.options.length;r++){var o=this.config.options[r];if(i(o),o.options&&o.options.length)for(var a=0;a<o.options.length;a++)i(o=o.options[a])}return Promise.all(e)}},{key:"_validateOptions",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!0,i=0;i<t.length;i++){var r=t[i];if(r.visible)if(r.options&&r.options.length){var o=this._validateOptions(r.options,e);o||(n=!1)}else if(r._controller&&"function"==typeof r._controller.onValidate){r.errors=[];var a=r._controller.onValidate(r);a||(n=!1)}else{var s=this.element.querySelector("#".concat(r.id));if(null==s&&(s=this.element.querySelector("#".concat(r.id,"-0"))),null!=s&&!s.checkValidity()){if(n=!1,e||!s.scrollIntoView||E.isScrolledIntoView(s)||(s.style.scrollMargin="50px",s.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"}),s.style.scrollMargin="",e=!0),r.errors=[],r.params.validationMsg){r.errors.push(r.params.validationMsg);continue}for(var l in s.validity)if(s.validity[l]){var c="";(c="tooLong"===l?S.get(this.settings.errorPrefix+l,{max:s.maxLength}):"tooShort"===l?S.get(this.settings.errorPrefix+l,{min:s.minLength}):"rangeOverflow"===l?S.get(this.settings.errorPrefix+l,{max:s.max}):"rangeUnderflow"===l?S.get(this.settings.errorPrefix+l,{min:s.min}):"patternMismatch"===l?S.get(this.settings.errorPrefix+l,{pattern:s.pattern}):S.get(this.settings.errorPrefix+l))&&(-1===c.indexOf(this.settings.errorPrefix)?r.errors.push(c):P.warn("missing translation for "+c))}}}}return n}},{key:"_findProductForm",value:function(){if(this._productForm=E.findParent(this.element,this.settings.selectorForm),!this._productForm){var t={srcEl:this.element};this._productForm=this.shopifyStore.findProductFormBestMatch(this.settings.product.id,t),t.parentEl&&(this._productFormParentEl=t.parentEl)}if(this._productFormParent=this._productForm.contains(this._wrapper),!this._productFormParent){var e=this._productForm.getAttribute("id");e&&(this._productFormLink=e);var n=this.shopifyStore.findExpressPaymentButtons();if(n.length){P.debug("hiding expressPaymentButtons - NOT supported with app blocks",n);for(var i=0;i<n.length;i++){n[i].style.display="none"}}}return null!==this._productForm}},{key:"_initVariantOptions",value:function(){var t=this.shopifyStore.findProductFormVariantId(this._productForm);if(this.settings.product&&this.settings.product.variants&&(t||(t=this.settings.product.variants[0].id.toString()),this.config.variantOption&&this.settings.product.variants.length>1&&(this._variantOptions=new Os(this.config,this._productFormParentEl||this._productForm,{product:this.settings.product,variant:this._getVariantById(t),editorMode:this.settings.editorMode}),hi.productVariantFilter&&this._variantOptions.filterVariantValues()),this.settings.editorMode))if(this._variantIdOption={name:"id",id:"option_"+this.settings.product.id+"_id",value:t,params:{name:"id",info:"<b>Only shown in the App to test conditional options based on the selected variant.</b>"},visible:!0},1===this.settings.product.variants.length||this.config.variantOption)this._variantIdOption.type="hidden";else{this._variantIdOption.label="Variant",this._variantIdOption.type="select",this._variantIdOption.values=[];for(var e=0;e<this.settings.product.variants.length;e++){var n=this.settings.product.variants[e];this._variantIdOption.values.push({text:n.title,value:n.id.toString()})}}return t}},{key:"_watchVariantChanges",value:function(){var t=this,e=this._initVariantOptions();return this._onVariantChange(null,e),this._productForm.addEventListener("change",(function(e){return t._onVariantChange(e)})),hi.productVariantHistory&&(hi.productVariantHistoryPush&&this._watchVariantHistory("pushState"),hi.productVariantHistoryReplace&&this._watchVariantHistory("replaceState")),null!==this._variantId}},{key:"_watchVariantHistory",value:function(t){if("function"==typeof window.history[t]){var e=window.history[t],n=this._productForm;window.history[t]=function(t){return setTimeout((function(){n.dispatchEvent(new Event("change"))}),300),e.apply(window.history,arguments)}}}},{key:"_onVariantChange",value:function(t,e){if(e||(e=this.shopifyStore.findProductFormVariantId(this._productForm)),e!==this._variantId){if(this._variantId=e,delete this.conditionsEngine.data.variant,this._variantId){var n=this._getVariantById(this._variantId);n&&(this.conditionsEngine.data.variant=n),this._clearVisibleEditor(),this._triggerEvent("variant:changed",{variantId:this._variantId})}this.render()}}},{key:"_getVariantById",value:function(t){if(this.settings.product.variants&&this.settings.product.variants.length>0)for(var e=0;e<this.settings.product.variants.length;e++){var n=this.settings.product.variants[e];if(n.id.toString()===t.toString())return n}return null}},{key:"_triggerEvent",value:function(t,e){var n=new CustomEvent(t,{detail:e,cancelable:!0,bubbles:!0});this.element.dispatchEvent(n),this._productFormParent||this._productForm.dispatchEvent(n)}},{key:"_optionValueChanged",value:function(t){t._variantOption&&this._variantOptions&&this._variantOptionValueChanged(t),this._clearVisibleEditor(),this._triggerEvent("option:changed",t),t.errors&&t.errors.length&&(t.errors.length=0),this.render()}},{key:"_variantOptionValueChanged",value:function(t){var e=this._variantOptions.findSelectedVariant();!e&&hi.productVariantReset&&(this._variantOptions.resetVariant(),this._variantOptions.syncAllVariantOptions()),hi.productVariantFilter&&this._variantOptions.filterVariantValues(),this._variantOptions.syncVariantChanges(t),this._variantIdOption&&e&&(this._variantIdOption.value=e.id.toString(),this._onVariantChange(null,this._variantIdOption.value))}},{key:"_clearVisibleEditor",value:function(){this.settings.editorMode&&(this.visibleEditor={})}},{key:"_clearOptionError",value:function(t,e,n){var i=e.errors.indexOf(n);i>-1&&e.errors.splice(i,1),this.render()}},{key:"_generateOptionIds",value:function(t,e){for(var n=0;n<t.length;n++){var i=t[n],r=i.name.replace(/^[^a-zA-Z0-9]+|[^\w]+/g,"");i.id=e+r,i.list&&this.settings.lists&&this.settings.lists.hasOwnProperty(i.list)&&(i.values=JSON.parse(JSON.stringify(this.settings.lists[i.list]))),i.options&&i.options.length&&this._generateOptionIds(i.options,e)}}},{key:"_evaluateOptionConditions",value:function(t){for(var e=0;e<t.length;e++){var n=t[e],i=!0;n.conditions&&n.conditions.length&&(i=this.conditionsEngine.evaluateConditions(n.conditions,is.MODE.AND,"option.name="+n.name)),this.settings.editorMode&&this.visibleEditor.hasOwnProperty(n.name)&&(i=this.visibleEditor[n.name]),this.visible[n.name]=i,n.visible=i,n.options&&n.options.length&&this._evaluateOptionConditions(n.options)}}},{key:"_evaluateOptionPrice",value:function(t){this.price.options={},this.price.total=0,this.price.totalBase=0,this.price.variants=[],this.price.variantTotal=0,this._evaluateOptionPriceTotal(t),this._patchProductPriceTotal(t)}},{key:"_patchProductPriceTotal",value:function(t){if(0!==this.price.total||this._priceElList&&this._priceElList.length){var e=this._variantPrice;if(this._variantId){var n=this._getVariantById(this._variantId);n&&(e=n.price,this._variantPrice=e)}if(!isNaN(e)){var i=this;if(this._priceElList&&this._priceElList.length)for(var r=0;r<this._priceElList.length;r++)if(!E.isInPage(this._priceElList[r])){delete this._priceElList;break}if((!this._priceElList||0===this._priceElList.length)&&(this._priceElList=document.querySelectorAll('[data-live-price="'+this.settings.product.id+'"]'),0===this._priceElList.length&&hi.productPrice)){var o=this,a=di(e,this.shopifyStore.trimMoneyFormatAmount(vi.moneyFormat)),s=E.findElementContainsRegex("*",new RegExp("^.{0,50}".concat(a,".{0,50}$"),"s"));if(s.length>0&&(s=s.filter((function(t){return!E.isHidden(t)&&!o._wrapper.contains(t)}))),0===s.length&&(P.debug("no productPrice elements found for price:",a),hi.amountNoDecimals)){var l=this;a=di(e,"{{ amount_no_decimals }}"),P.debug("trying fallback {{ amount_no_decimals }} price: ",a),(s=E.findElementContainsRegex("*",new RegExp("^.{0,50}".concat(a,".{0,50}$"),"s"))).length>0&&(s=s.filter((function(t){return!E.isHidden(t)&&!l._wrapper.contains(t)})))}if(s.length)if(P.debug("found "+s.length+" productPrice elements",s),hi.productPriceAll)this._priceElList=s.filter((function(t){for(var e=0;e<s.length;e++){var n=s[e];if(n!==t&&t.contains(n))return!1}return!0}));else{for(var c=null,u=-1,p=this._wrapper.getBoundingClientRect(),d=0;d<s.length;d++){var f=s[d],h=f.getBoundingClientRect(),v=Math.abs(p.top-h.top)+Math.abs(p.left-h.left);(!c||c.contains(f)||v<u)&&(c=f,u=v)}c&&(this._priceElList=[c])}}var m=function(){var t=e+100*i.price.total,n=di(t,vi.moneyFormat);if(i._priceElList&&i._priceElList.length)for(var r=0;r<i._priceElList.length;r++){i._priceElList[r].innerHTML=n}i._triggerEvent("options:price",{price:t,priceFormat:n})};if(m(),hi.productPriceTimeout&&setTimeout((function(){return m()}),1e3),hi.productPriceObserver&&!this._priceElObserver&&"MutationObserver"in window){var g=this;this._priceElObserver=new MutationObserver((function(e){if(g._priceElList&&g._priceElList.length){var n=function(t){var n=e[t];if(n.removedNodes.length>0){var r=function(t){var e=g._priceElList[t];if(o.indexOf(e)>-1||o.some((function(t){return t.contains(e)})))return P.debug("priceEl was removed:",e),i=!0,"break"};if(1===n.removedNodes.length&&1!==n.removedNodes[0].nodeType)return"continue";for(var o=Array.from(n.removedNodes),a=0;a<g._priceElList.length;a++){if("break"===r(a))break}}if(i)return"break"};P.trace("observer priceEl for removed nodes",g._priceElList);for(var i=!1,r=0;r<e.length;r++){switch(n(r)){case"break":break;case"continue":continue}}i&&(P.debug("-> triggering patchProductTotal"),g._patchProductPriceTotal(t))}})),this._priceElObserver.observe(document.body,{subtree:!0,childList:!0})}}if(!this._paymentBtns&&(this._paymentBtns=this.shopifyStore.findExpressPaymentButtons(),this._paymentBtns.length))for(var y=0;y<this._paymentBtns.length;y++){this._paymentBtns[y].style.display="none"}}}},{key:"_evaluateOptionPriceTotal",value:function(t){for(var e=0;e<t.length;e++){var n=t[e];if(n.visible){if(n._priceText&&delete n._priceText,n.value&&n.values)for(var i=0;i<n.values.length;i++){var r=n.values[i],o=String(r.value).trim()===String(n.value).trim();if(r.priceText&&(o=!0),!o&&n._controller&&n._controller.multiSelect&&(o=n._controller.isSelected(n,r)),r.priceType)if(r.hasOwnProperty("_price")||(r._price=r.price),r.priceType===wi){var a=this._getVariantById(this._variantId);a&&a.price?r.price=a.price/100/100*r._price:r.price=0}else r.priceType===bi?r.price=r._price*n.value.length:r.priceType===xi&&(r.price=this._priceValueFormula(n,r));if(o&&(r.priceVariant&&(this.price.variants.push(r.priceVariant),r.priceVariantQuantity&&(r.priceVariant.quantity=-1),r.price&&(this.price.variantTotal+=r.price)),r.price)){var s=void 0,l=r.price,c=void 0;r.priceVariant||vi.currencyConvert&&(c=l,this.price.totalBase+=c,l=mi(c)),this.price.options.hasOwnProperty(n.name)?((s=this.price.options[n.name]).price+=l,s.priceBase&&(s.priceBase+=c)):s={option:n,price:l,priceBase:c},this.price.total+=l,s.priceText=di(100*s.price,vi.moneyFormat),n.label&&n.params.labelPriceText&&(n._priceText=s.priceText),r.priceVariant||(this.price.options[n.name]=s)}}n.options&&n.options.length&&this._evaluateOptionPriceTotal(n.options)}}}},{key:"_priceValueFormula",value:function(t,e){var n=0,i=e.priceFormula;try{if(!e._priceFunction)try{-1===i.indexOf("return")&&(i="return ( "+i+" )"),e._priceFunction=Function('"use strict";return (function(option, price, options){ '+i+" })")()}catch(n){P.error("failed to parse optionValue.priceFormula: ",e,i,n),this.settings.editorMode&&(t.errors=options.errors||[],t.errors.push(n))}if(e._priceFunction){var r=this;this._priceFunctionUtil=this._priceFunctionUtil||{option:function(t){return r._getOption(t)},value:function(t){var e=r._getOption(t);return e?e.value:""},price:function(t){return r.price.options.hasOwnProperty(t)?r.price.options[t].price:0},controller:function(t){var e=r._getOption(t);return e&&e._controller?e._controller:{}}},(n=e._priceFunction(t,e._price,this._priceFunctionUtil))||(n=0)}}catch(e){P.error("failed to calculate price with priceFormula: ",i,e),this.settings.editorMode&&(t.errors=options.errors||[],t.errors.push(e))}return n}},{key:"_watchFormSubmit",value:function(){var t=this;this._productFormSubmit=!1,this.shopifyStore.onProductFormSubmit(this._productForm,(function(e){return t._handleFormSubmit(e)}),hi.productFormCapture),this._productForm.addEventListener("keypress",(function(t){t.target&&"INPUT"===t.target.tagName&&(13===(t.keyCode||t.which)&&(t.preventDefault(),t.target.blur()))}))}},{key:"_handleFormSubmit",value:function(t){if(!this._productFormSubmit){var e=this;if(this._productFormSubmit=!0,!this.validate())return this._productFormSubmit=!1,t.preventDefault(),void t.stopImmediatePropagation();var n=this._hasExportPreviews(),i=0!==this.price.total||this.price.variants.length,r=n||i||this._itemKey;r&&(t.preventDefault(),t.stopImmediatePropagation(),this._productFormEvent=t);var o=[];if(n){for(var a=this,s=function(t){var e=c[t];if(a._isExportPreview(e)){var n=a,i=document.createElement("progress");i.max=100,i.value=0,i.className="cl-po--preview-progress",a._wrapper.appendChild(i),l=l.then((function(){var t=n;return n._exportPreview(e,i).then((function(){t._wrapper.removeChild(i)}))}))}},l=Promise.resolve(),c=this._getPreviews(),u=0;u<c.length;u++)s(u);o.push(l)}if(i){var p=this,d=function(t){var e=p,n=p.price.variants[t];if(-1===n.quantity){var i=(p._productFormParentEl||p._productForm).querySelector('[name="quantity"]');i&&i.value?n.quantity=i.value:n.quantity=1}var r=p.shopifyCart.toItem(n.id,n.quantity,{});h=h.then((function(){return e.shopifyCart.addItem(r)}))},f=Ps.generateId(),h=Promise.resolve();if(this.price.variants.length)for(var v=0;v<this.price.variants.length;v++)d(v);var m=this.price.total-this.price.variantTotal;if(m>0){var g=Math.round(100*m),y={};for(var _ in y[fi.ID]=f,this.price.options)if(this.price.options.hasOwnProperty(_)){var w=this.price.options[_],b=w.priceText.replace(/(<([^>]+)>)/gi,"");y[w.option.name]=b,w.priceBase&&(y["_"+w.option.name]=w.priceBase)}if(this._setFormProperty(fi.ID,f),this._setFormProperty(fi.PRICE,g),vi.currencyConvert&&(this._setFormProperty(fi.CURRENCY,vi.currency),this._setFormProperty(fi.PRICE_BASE,Math.round(100*this.price.totalBase))),this.settings.priceDraft)Ps.storeItem(f,{properties:y});else if(vi.priceVariantId){var x=this,k=m/vi.priceVariantValue,E=(this._productFormParentEl||this._productForm).querySelector('[name="quantity"]');E&&E.value&&(k*=E.value),k=Math.round(k);var C=this.shopifyCart.toItem(vi.priceVariantId,k,y);fi.VALIDATE=!1,h=h.then((function(){return x.shopifyCart.addItem(C)}))}else P.warn("[live-options] missing price options product variant")}else i=!1;o.push(h)}if(i||(this._removeFormProperty(fi.ID),this._removeFormProperty(fi.PRICE),this._removeFormProperty(fi.PRICE_BASE),this._removeFormProperty(fi.CURRENCY)),r)return Promise.all(o).then((function(){var t=!0;if(e._itemKey&&-1!==e._itemKey.indexOf(e._variantId)){var n=e,i=function(){n.shopifyCart.updateItemById({id:n._itemKey,quantity:n.shopifyStore.findProductFormQuantity(n._productForm),properties:n._getFormProperties()}).then((function(){window.location.href="/cart"}))};if(hi.productItemModal){var r=e;t=!1;var o="product.options.item.modal.",a=document.createElement("dialog");a.className="cl-po--dialog",a.innerHTML='\n                                  <form method="dialog">\n                                    <h4>'.concat(S.get(o+"title"),'</h4>\n                                    <div class="action">\n                                      <button class="cl-po--swatch cl-po--swatch-button cl-po--small" value="update">').concat(S.get(o+"update"),'</button>\n                                      <button class="cl-po--swatch cl-po--swatch-button cl-po--small" value="add">').concat(S.get(o+"add"),"</button>\n                                    </div>\n                                  </form>"),void 0!==window.dialogPolyfill&&(window.dialogPolyfill.registerDialog(a),a.style.height="auto"),e._wrapper.appendChild(a),a.showModal(),a.addEventListener("close",(function(){"update"===a.returnValue?i():r._triggerFormEvent()}))}else hi.productItemUpdate&&(t=!1,i())}t&&(e._triggerFormEvent(),setTimeout((function(){fi.VALIDATE=!0}),5e3))})).catch((function(t){P.error("[live-options] submit handler error",t)}));setTimeout((function(){return e._productFormSubmit=!1}),300)}}},{key:"_setFormProperty",value:function(t,e){var n;this._formInputs?this._formInputs.hasOwnProperty(t)&&(n=this._formInputs[t]):this._formInputs={},n?n.value=e:((n=document.createElement("input")).type="hidden",n.name="properties["+t+"]",n.value=e,this._productForm.appendChild(n)),this._formInputs[t]=n}},{key:"_removeFormProperty",value:function(t){if(this._formInputs&&this._formInputs.hasOwnProperty(t)){var e=this._formInputs[t];e.parentNode.removeChild(e),delete this._formInputs[t]}}},{key:"_getFormProperties",value:function(){var t=new FormData(this._productForm);return Array.from(t.keys()).reduce((function(e,n){if(-1!==n.indexOf("properties")){var i=n.indexOf("["),r=n.indexOf("]");if(-1!==i&&-1!==r){var o=n.substring(i+1,r);if(e.hasOwnProperty(o)){var a=t.getAll(n);e[o]=a[a.length-1]}else e[o]=t.get(n)}}return e}),{})}},{key:"_triggerFormEvent",value:function(){var t=this;if(this._productFormEvent){var e=this._productFormEvent;e.target||e.currentTarget?"click"===e.type?e.target&&e.target.click?e.target.click():e.currentTarget&&e.currentTarget.click?e.currentTarget.click():"BUTTON"===e.target.parentNode.tagName&&e.target.parentNode.click():"submit"===e.type&&e.target.submit():(P.error("missing event target - manual form submit"),this._productForm.submit()),this._productFormEvent=null,this._productFormSubmit=!1}this._optionValuesClear&&setTimeout((function(){t.setValues(t._optionValuesClear),t.render(),t._renderPreview()}),1e3)}},{key:"_getControllers",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.config.options,n=0;n<e.length;n++){var i=e[n];i.options&&i.options.length?this._getControllers(t,i.options):i._controller&&(t[i.name+"_"+i.type]=i._controller)}return t}},{key:"_setControllers",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.config.options,n=0;n<e.length;n++){var i=e[n];i.options&&i.options.length?this._setControllers(t,i.options):t.hasOwnProperty(i.name+"_"+i.type)&&(i._controller=t[i.name+"_"+i.type])}}},{key:"_getOption",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.config.options,n=0;n<e.length;n++){var i=e[n];if(i.name===t)return i;if(i.options&&i.options.length){var r=this._getOption(t,r.options);if(r)return r}}return null}},{key:"_initPreview",value:function(){if(this.config.previewConfig.gallery){var t=this;this._gallery=new Fs(this.config,this._productForm,this.conditionsEngine,{api:this.settings.api,assets:this.settings.assets,selector:this.settings.selectorPreview,selectorThumbnail:this.settings.selectorThumbnail,position:this.settings.positionPreview,sticky:this.settings.stickyPreview,stickyMobile:this.settings.stickyPreviewMobile,product:this.settings.product,variantId:this._variantId,editorMode:this.settings.editorMode,galleryConfig:this.config.previewConfig.galleryConfig}),this._gallery.ready.then((function(e){t._preview=t._gallery._preview})),this._gallery.element.addEventListener("preview:active",(function(){t._preview=t._gallery._preview}))}else this._preview=new Es(this.config,this.config.previewConfig,this._productForm,this.conditionsEngine,{api:this.settings.api,assets:this.settings.assets,selector:this.settings.selectorPreview,selectorThumbnail:this.settings.selectorThumbnail,position:this.settings.positionPreview,sticky:this.settings.stickyPreview,stickyMobile:this.settings.stickyPreviewMobile,product:this.settings.product,variantId:this._variantId,editorMode:this.settings.editorMode})}},{key:"_renderPreview",value:function(){if(this.config.preview){var t=this;this._gallery&&this._gallery.ready?this._gallery.ready.then((function(){return t._gallery._previews.forEach((function(t){return t.renderPreview()}))})):this._preview&&this._preview.ready&&this._preview.ready.then((function(){return t._preview.renderPreview()}))}}},{key:"_destroyPreview",value:function(){this._gallery?(this._gallery.destroy(),delete this._gallery):this._preview&&this._preview.destroy(),delete this._preview}},{key:"_getPreviews",value:function(){return this._gallery?this._gallery._previews:this._preview?[this._preview]:[]}},{key:"_isExportPreview",value:function(t){var e=t.previewConfig.export&&(t.previewConfig.exportConfig.thumbnail||t.previewConfig.exportConfig.original);if(!e)for(var n=0;n<t.previewConfig.layers.length;n++){var i=t.previewConfig.layers[n];if(i.params.crop&&"upload"===i.type)return!0}return e}},{key:"_hasExportPreviews",value:function(){for(var t=this._getPreviews(),e=0;e<t.length;e++)if(this._isExportPreview(t[e]))return!0;return!1}},{key:"_exportPreview",value:function(t,e){var n=this,i=[],r=t.previewConfig;if(r.export){if(r.exportConfig.original){e.value=5;var o=!(!r.exportConfig.crop||!r.exportConfig.cropConfig.width)&&r.exportConfig.cropConfig,a=r.exportConfig.originalFormat||"png",s=t.export({width:r.width,height:r.height},o,!0,"excludeOriginal",a);if(s){var l=this._upload._fileMeta.fromBlob(s,"preview_original."+a);l.meta.variant="original",l.meta.property=r.exportConfig.originalProperty,i.push(l)}e.value=10}if(r.exportConfig.thumbnail){e.value=10;var c=t.export({width:r.exportConfig.thumbnailWidth,height:r.exportConfig.thumbnailHeight},!1,!0,"excludeThumbnail","png",.8);if(c){var u=this._upload._fileMeta.fromBlob(c,"preview_thumbnail.png");u.meta.variant="thumbnail",u.meta.property=r.exportConfig.thumbnailProperty,i.push(u)}e.value=15}}for(var p=0;p<t.previewConfig.layers.length;p++){var d=t.previewConfig.layers[p];if(d.params.crop&&"upload"===d.type){var f="jpeg";d._url&&-1!==d._url.indexOf(".png")&&(f="png");var h=t.exportLayer(d.name,!0,f,.8);if(h){var v=d.params.option||d.name,m=this._upload._fileMeta.fromBlob(h,v+"_crop."+f);m.meta.variant="original",m.meta.property=v,i.push(m)}}}return i.length>0?this._upload.upload(i,(function(t){if(t.lengthComputable){var n=t.loaded/t.total*100;n>e.value&&(e.value=n)}})).then((function(t){for(var e=0;e<t.length;e++){var i=t[e];n._setFormProperty(i.meta.property,i.url)}P.debug("export preview uploads:",t)})):(this._removeFormProperty(r.exportConfig.originalProperty),this._removeFormProperty(r.exportConfig.thumbnailProperty),Promise.resolve())}},{key:"_initTooltips",value:function(){var t=this._wrapper.querySelectorAll('[data-tippy-content]:not(.init):not([data-tippy-content=""])');if(t.length>0){this._tippyInstances||(this._tippyInstances=[]);for(var e=0;e<t.length;e++){var n=t[e],i=n.getAttribute("data-tippy-content"),r=-1!==i.indexOf("<")&&-1!==i.indexOf(">");this._tippyInstances.push(mn(n,{allowHTML:!0,maxWidth:350,interactive:r,appendTo:hi.tooltipBody?document.body:"parent"})),n.classList.add("init")}}}},{key:"_destroyTooltips",value:function(){if(null!=this._tippyInstances)for(var t=0;t<this._tippyInstances.length;t++){var e=this._tippyInstances[t];e.reference.classList.remove("init"),e.destroy()}}},{key:"_restoreCartItem",value:function(){var t=this,e=E.getQueryParam(window.location.href,"item");this.shopifyCart.getCart(!0).then((function(n){for(var i=0;i<n.items.length;i++){var r=n.items[i];if(r.key===e&&r.properties){P.debug("restoring cart item values: ",r.properties),t.setValues(r.properties),t.render(),t._renderPreview(),hi.productItemModal&&"function"!=typeof HTMLDialogElement&&(t._dialogPolyfill=Ti.loadOnce([t.settings.assets+"/static/lib/dialog/dialog-polyfill.min.js",t.settings.assets+"/static/lib/dialog/dialog-polyfill.min.css"],"dialog",{async:!1})),t._itemKey=e;break}}}))}}]),t}(),js=Rs;function Zn(){var t=m(["\n    \n    ","\n"]);return Zn=function(){return t},t}function ti(){var t=m(['\n    <div class="cl-po--discount">\n        <div class="cl-po--discount-input">\n            <input type="text" placeholder=',' class="','" .value='," @input="," />\n            <button @click=",">\n                ","\n            </button>\n        </div>\n        ","\n       \n        ","\n    </div>\n    "]);return ti=function(){return t},t}function Ii(){var t=m(['<svg class="cl-po--icon loading" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M20 10c0 5.523-4.477 10-10 10S0 15.523 0 10 4.477 0 10 0v2c-4.418 0-8 3.582-8 8s3.582 8 8 8 8-3.582 8-8h2z"></path></svg>']);return Ii=function(){return t},t}function Mi(){var t=m([' <p class="cl-po--discount-error">',"</p>"]);return Mi=function(){return t},t}function Fi(){var t=m(['\n        <div class="cl-po--discount-wrap">\n            <input type="hidden" name="discount" .value='," form=",' />\n            \n            <div class="cl-po--discount-tag">\n                <svg class="cl-po--icon tag" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18"><path d="M17.78 3.09C17.45 2.443 16.778 2 16 2h-5.165c-.535 0-1.046.214-1.422.593l-6.82 6.89c0 .002 0 .003-.002.003-.245.253-.413.554-.5.874L.738 8.055c-.56-.953-.24-2.178.712-2.737L9.823.425C10.284.155 10.834.08 11.35.22l4.99 1.337c.755.203 1.293.814 1.44 1.533z" fill-opacity=".55"></path><path d="M10.835 2H16c1.105 0 2 .895 2 2v5.172c0 .53-.21 1.04-.586 1.414l-6.818 6.818c-.777.778-2.036.782-2.82.01l-5.166-5.1c-.786-.775-.794-2.04-.02-2.828.002 0 .003 0 .003-.002l6.82-6.89C9.79 2.214 10.3 2 10.835 2zM13.5 8c.828 0 1.5-.672 1.5-1.5S14.328 5 13.5 5 12 5.672 12 6.5 12.672 8 13.5 8z"></path></svg>\n                <span>',"</span>\n                <button @click=",'>\n                    <svg class="cl-po--icon remove" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 13 13"><path d="M1.5 1.5l10.05 10.05M11.5 1.5L1.45 11.55" stroke-width="2" fill="none" fill-rule="evenodd" stroke-linecap="round"></path></svg>\n                </button>\n            </div>\n    \n            ',"\n        </div>\n        "]);return Fi=function(){return t},t}function Ai(){var t=m([' <p class="cl-po--discount-success">',"</p>"]);return Ai=function(){return t},t}ii=function(t){return t};var Ds,Ns,Vs,qs,Bs,Hs,Us=function(t,e,n,i,r){return bt(Hs||(Hs=ii(Zn(),0)),t.type!==_i?bt(Bs||(Bs=ii(ti(),0,0,0,0,0,0,0,0)),e.placeholder,Tn({"cl-po--invalid":e.error}),jn(e.code),(function(t){return r(t)}),(function(t){return n(t)}),e.loading?bt(Ds||(Ds=ii(Ii()))):e.button,e.error?bt(Ns||(Ns=ii(Mi(),0)),e.error):null,t.valid?bt(qs||(qs=ii(Fi(),0,0,0,0,0)),jn(t.code),Rn(e.cartFormLink),t.code,(function(t){return i(t)}),e.success?bt(Vs||(Vs=ii(Ai(),0)),e.success):null):null):null)},zs=function(){"use strict";function t(e){i(this,t),this.config=e,this.products=[];var n={};if(S.locale&&String.prototype.startsWith&&window.location.pathname.toLowerCase().startsWith("/"+S.locale.toLowerCase())&&(n.api="/"+S.locale.toLowerCase()),window.Shopify&&window.Shopify.routes&&window.Shopify.routes.root&&"/"!==window.Shopify.routes.root){var r=window.Shopify.routes.root;n.api="/"===r[r.length-1]?r.substr(0,r.length-1):r}if(this.shopifyStore=F.getInstance({api:n.api}),this.shopifyCart=R.getInstance(n),this.conditionsEngine=new is,this.currency=vi,this.config.theme)for(var o in this.config.theme)this.config.theme.hasOwnProperty(o)&&(hi[o]=this.config.theme[o]);for(var a in this.shopifyStore.isTheme("Dawn")&&(hi.productPriceObserver=!0,this.config.itemImgParentSelector=".cart-notification, .cart-item"),this.shopifyStore.isTheme("Expanse")&&(hi.amountNoDecimals=!0),this.config.currencyFormats)if(this.config.currencyFormats.hasOwnProperty(a)){var s=this.config.currencyFormats[a];-1!==s.indexOf("&")&&(s=E.decodeHtml(s)),"moneyWithCurrencyFormat"===a&&(a="moneyFormatWithCurrency"),vi[a]=s}if(void 0!==window.clPriceDraft&&(this.config.priceDraft=window.clPriceDraft),vi.priceVariant=!this.config.priceDraft,vi.priceVariantId=this.config.priceVariantId,vi.priceVariantValue=this.config.priceVariantValue,vi.priceProductHandle=this.config.priceProductHandle,vi.currencyConvert=this.config.currencyConvert,window.Shopify&&window.Shopify.currency&&(vi.currency=window.Shopify.currency.active,vi.currencyConvert)){var l=parseFloat(window.Shopify.currency.rate);isNaN(l)||1===l||(vi.currencyFactor=l)}if(vi.currencyConvert||-1===vi.moneyFormat.indexOf("<")||-1===vi.moneyFormat.indexOf(">")||(hi.currencyFormat=!1),hi.currencyFormat&&window.theme&&window.theme.moneyFormat&&(vi.moneyFormat=window.theme.moneyFormat,vi.moneyFormatWithCurrency=window.theme.moneyFormatWithCurrency||window.theme.moneyFormat),this.config.setup){var c=this;if(/complete|interactive|loaded/.test(document.readyState))this.setup();else{var u=this;P.debug("---\x3e document not ready ("+document.readyState+") => waiting for DOMContentLoaded"),document.addEventListener("DOMContentLoaded",(function(){return u.setup()}),!1)}this.shopifyStore.onThemeSectionEvent("load",(function(t){c.setup()}))}}return o(t,[{key:"setup",value:function(){var t=this;this.destroy(),this.shopifyStore.parseProductJsonElements(),this.shopifyStore.tryGetProductMap().then((function(e){for(var n=0;n<t.config.configs.length;n++){var i=t.config.configs[n];if(P.debug("-> evaluating options-config:",i.uuid),0===i.targetMode){var r=[{data:"product",field:"product",products:[i.product]}];for(var o in e)if(e.hasOwnProperty(o)){var a=e[o];t._evaluateProductTargeting(i,a,r,1)}}else if(0===i.conditionMode){if(t.shopifyStore.isProduct()){var s=e[t.shopifyStore.getHandleFromUrl()+".js"];s&&t._evaluateProductTargeting(i,s,[],0)}}else if(i.conditions.length>0)for(var l in e)if(e.hasOwnProperty(l)){var c=e[l];t._evaluateProductTargeting(i,c,i.conditions,i.conditionMode)}}})),this.config.setup&&this.config.configs.length>0&&(this._watchCartItems(),this._watchFormSubmit())}},{key:"destroy",value:function(){for(;this.products.length;){this.products.pop().destroy()}}},{key:"_evaluateProductTargeting",value:function(t,e,n,i){this.conditionsEngine.data.product=e;var r=this.conditionsEngine.evaluateConditions(n,i,"config.uuid="+t.uuid);if(r){var o="#product_form_"+e.id;o+=', [data-product-form="'+e.id+'"]',(r=this._createProductOptions(t,e,o))||(r=this._createProductOptions(t,e))}P.debug("--\x3e evaluated options-config:",t.uuid,e,r)}},{key:"_createProductOptions",value:function(t,e,n){for(var i=0;i<this.products.length;i++){var r,o=this.products[i];if(o.settings.product.id===e.id)return P.debug("-> MERGING options with existing productOptions for product.id: "+e.id,t.options),o._generateOptionIds(t.options,"option_"+e.id+"_"),o._translate&&(o._translate.config=t,o._translate.translate()),(r=o.config.options).push.apply(r,g(t.options)),o.render(),!0}n||(n='form[action*="/cart/add"]:not(#product-form-installment)');var a=1===this.config.locationMode?this.config.selector:"",s=1===this.config.locationMode?this.config.position:void 0,l=this._findOrCreateContainer(a,e,n);if(l){var c=JSON.parse(JSON.stringify(t)),u=1===this.config.previewLocationMode?this.config.previewSelector:"",p=1===this.config.previewLocationMode?this.config.previewPosition:void 0,d=void 0;d=E.isNodeList(l)?l:[l];for(var f=0;f<d.length;f++){var h=d[f],v=c.preview?this._findOrCreatePreviewContainer(u,e,c.previewConfig):void 0;this.products.push(new js(c,{api:this.config.api,assets:this.config.assets,queryParams:{shop:this.config.shop},selector:h,position:s,selectorPreview:v,positionPreview:p,selectorThumbnail:this.config.previewImgThumbnailSelector,stickyPreview:this.config.previewSticky,stickyPreviewMobile:this.config.previewStickyMobile,product:e,priceDraft:this.config.priceDraft,lists:this.config.lists}))}return!0}return!1}},{key:"_findOrCreateContainer",value:function(t,e,n){var i,r;if(n&&(r=document.querySelector(n)),t)return r&&(i=r.querySelectorAll(t)).length>0?(P.debug("using container in form with provided selector:",n,t,i),i):(i=document.querySelectorAll(t)).length>0?(P.debug("using container with provided selector:",t,i),i):(P.debug("no container found with selector:",t),null);if(null!=(i=document.querySelector('[data-live-options="'+e.id+'"]')))return P.debug("using default container with selector: [data-live-options]"),i;if(r){var o=r.querySelector("[type=submit],.add_to_cart,.btn.add-to-cart");return(i=document.createElement("div")).className="inject",i.style.width="100%",o?o.parentNode.insertBefore(i,o):r.insertBefore(i,r.firstChild),P.debug("injected container into form:",r),i}return null}},{key:"_findOrCreatePreviewContainer",value:function(t,e,n){var i;!t&&this.shopifyStore.isTheme("Dawn")&&(t=n.gallery?document.querySelector(".product media-gallery")?".product media-gallery":".product slider-component":".product slider-component ul li:first-child","/"!==window.location.pathname&&window.location.pathname!=="/"+S.locale||(t=".featured-product modal-opener"),P.debug("--\x3e Dawn theme auto updated preview selector to:",t));var r=!0;if(t||(t='[data-live-preview="'+e.id+'"]',r=!1),t){var o=document.querySelectorAll(t);if(o.length>0){if(o.length>1)for(var a=0;a<o.length&&(-1===(i=o[a]).className.indexOf(e.id)&&i.dataset.livePreview!=e.id);a++);else i=o[0];P.debug("using container preview with provided selector:",t,i)}if(r&&!i)return P.error("no container preview found with selector:",t),null}if(!i){var s=void 0;if(e.media&&e.media.length){var l=0;if(n&&n.layers.length)for(var c=0;c<n.layers.length;c++){var u=n.layers[c];if("product"===u.type){u.params.imgPos&&e.media.length>u.params.imgPos-1&&(l=u.params.imgPos-1);break}}s=e.media[l]}else e.featured_image&&(s={src:e.featured_image});if(s){var p=this.config.previewImgParent,d=this.config.previewImgParentSelector,f=E.pathBaseName(s.src,!1),h=[];if(this.config.previewImgMainSelector&&(h=document.querySelectorAll(this.config.previewImgMainSelector)),0===h.length&&(h=document.querySelectorAll('img[src*="'+f+'"], img[data-src*="'+f+'"], img[data-srcset*="'+f+'"]')),h.length>0){if(P.debug("found main product images:",h),1===h.length)i=h[0];else for(var v=Number.MAX_VALUE,m=-1,g=0;g<h.length;g++){var y=h[g],_=y.offsetWidth*y.offsetHeight;if(0===_&&y.src){var w=this.shopifyStore.parseImageDimension(y.src);_=w.x*w.y}var b=E.pathBaseName(y.src||y.dataset.src||y.dataset.srcset,!1),x=(b=this.shopifyStore.stripImageDimension(b)).replace(f,"").length;x<v?(v=x,m=_,i=y):x===v&&_>m&&(m=_,i=y)}P.debug("selected auto preview img:",i);var k=void 0;if(d&&(k=E.findParent(i,d)),null!=k)i=k,P.debug("using auto preview container with parent selector:",d,i);else if(i){1===p&&(i.parentElement&&null!==i.parentElement.getAttribute("data-zoom")||-1!==i.parentElement.id.indexOf("Zoom")||-1!==i.parentElement.className.indexOf("modal"))&&(p=2);for(var C=0;C<p;C++)i=i.parentElement;P.debug("using auto preview container with parent:",p,i)}}else P.debug("failed to find main product image:",f)}}if(i){for(i.style.minHeight||(i.style.minHeight="1px");i.firstChild;)i.removeChild(i.lastChild);var O=document.querySelectorAll('[data-live-preview-hide="'+e.id+'"]');if(O.length)for(var T=0;T<O.length;T++){O[T].style.display="none"}}else P.warn("[live-options] no preview container found");return i}},{key:"_watchFormSubmit",value:function(){var t=this;this.config.priceDraft&&this.shopifyStore.onCartFormSubmit((function(e){return t._handleFormSubmit(e)}),hi.cartFormCapture);var e=document.querySelectorAll("[data-live-enabled]");if(e.length)for(var n=0;n<e.length;n++){var i=e[n];!0===i.disabled&&(i.disabled=!1),"none"===i.style.display&&(i.style.display="block")}}},{key:"_handleFormSubmit",value:function(t){if(this._cartTotalDiff){if(t.submitter&&t.submitter.name&&"update"===t.submitter.name)return;if(t.preventDefault(),t.stopImmediatePropagation(),this._checkoutRequest)return void P.warn("checkout is processing");try{var e,n=function(t){o=o.catch((function(e){var n={shop:i.config.shop};return t>0&&(n.retry=t),i._checkoutRequest=new C(i.config.api+"/api/checkout",{method:"POST",data:{checkout:r},responseType:"json",headers:{"Content-type":"application/json"},queryParams:n}),e&&P.warn("[live-options-api] checkout error",e),i._checkoutRequest})).catch(a)},i=this;t.target&&(e="FORM"===t.target.tagName?t.target:E.findParent(t.target,"form"));for(var r=this._getCheckout(e),o=Promise.reject(),a=function(t){return new Promise((function(e,n){setTimeout(n.bind(null,t),1e3)}))},s=0;s<3;s++)n(s);"function"==typeof(o=o.then((function(t){P.debug("[live-options-api] checkout response",t.data),window.location.href=t.data.url})).catch((function(t){t.xhr&&0===t.xhr.status||(P.error("[live-options-api] checkout error",t),window.location.href="/checkout")}))).finally&&o.finally((function(){delete i._checkoutRequest}))}catch(t){P.error("[live-options] checkout error",t),window.location.href="/checkout"}}}},{key:"_getCheckout",value:function(t){for(var e=[],n={},i=0;i<this._cart.items.length;i++){var r=this._cart.items[i];if(r.properties&&r.properties.hasOwnProperty(fi.PRICE)&&r.properties.hasOwnProperty(fi.ID)){vi.currencyConvert&&r.properties.hasOwnProperty(fi.PRICE_BASE)&&(r.properties[fi.PRICE]=r.properties[fi.PRICE_BASE],delete r.properties[fi.PRICE_BASE]);var o=r.properties[fi.ID],a=Ps.getItem(o);a&&(n[o]=a.properties)}var s=this.shopifyCart.toItem(r.id,r.quantity,r.properties);s.productTitle=r.product_title,s.productId=r.product_id,e.push(s)}this._discount||(this._discount=this._getDiscount());var l={},c=void 0;if(t){var u=new FormData(t);l=Array.from(u.keys()).reduce((function(t,e){if(-1!==e.indexOf("attributes")){var n=e.indexOf("["),i=e.indexOf("]");if(-1!==n&&-1!==i){var r=e.substring(n+1,i);if(t.hasOwnProperty(r)){var o=u.getAll(e);t[r]=o[o.length-1]}else t[r]=u.get(e)}}else"note"===e&&(c=u.get(e));return t}),{})}return{items:e,options:n,optionsTitle:this.config.priceDraftTitle,optionsShipping:!0===this.config.priceDraftShipping,optionsTaxable:!0!==this.config.priceDraftTaxFree,note:c,attributes:l,discount:0!==this._discount.type?this._discount:null,currency:this._cart.currency,total:this._cartTotal}}},{key:"_getDiscount",value:function(){for(var t={type:gi},e=0;e<this._cart.items.length;e++){var n=this._cart.items[e];n.discounts&&n.discounts.length&&(t.type=_i,t.code=n.discounts[0].title)}if(0===t.type){var i=this.shopifyStore.getDiscountCode();i&&(t.type=yi,t.code=i)}return t}},{key:"_watchCartItems",value:function(){var t=this;if(window.theme&&window.theme.Cart&&window.theme.Cart.prototype&&window.theme.Cart.prototype._setProductDetailsList){var e=window.theme.Cart.prototype._setProductDetailsList;window.theme.Cart.prototype._setProductDetailsList=function(t,n){e(t,n.filter((function(t){return t})))}}this._processCartItems();var n=E.debounced(1e3,(function(){return t._processCartItems()}));D.register((function(e){/.*cart.*/.test(e.url)&&((e.method&&"POST"===e.method.toString().toUpperCase()||-1!==e.url.indexOf("/cart/add")||-1!==e.url.indexOf("/cart/change"))&&delete t.shopifyCart.cache,n())}));setTimeout((function(){return n()}),2e3)}},{key:"_processCartItems",value:function(){var t=this;this.shopifyCart.getCart(!0).then((function(e){t._cart=e,t._cartCount=0,t._cartTotal=0;for(var n=0;n<e.items.length;n++){var i=e.items[n];if(!t._processCartItem(e,i,n))return}t._patchCartCount(e),t._patchCartTotal(e),t._checkDiscount(e),-1!==vi.moneyFormat.indexOf("class")&&window.dispatchEvent(new Event("resize"))}))}},{key:"_processCartItem",value:function(t,e,n){var i=e.quantity,r=e.original_line_price;if(e.properties){var o=!1;if((e.properties.hasOwnProperty(fi.OPTIONS)||e.properties.hasOwnProperty(fi.ID))&&(o=!0),o){if(this.config.priceDraft){if(vi.currencyConvert&&e.properties.hasOwnProperty(fi.CURRENCY)&&e.properties[fi.CURRENCY]!==vi.currency){var a=Ps.getItem(e.properties[fi.ID]);if(null!=a&&a.properties){this._convertOptionsPriceProperties(a.properties),Ps.storeItem(e.properties[fi.ID],a);var s=parseInt(e.properties[fi.PRICE_BASE]);if(!isNaN(s)){var l=this;e.properties[fi.PRICE]=String(Math.round(100*mi(s/100))),e.properties[fi.CURRENCY]=vi.currency,this._updateItemCurrencyPromise||(this._updateItemCurrencyPromise=Promise.resolve()),this._updateItemCurrencyPromise=this._updateItemCurrencyPromise.then((function(){var n=e.key,i=l.shopifyCart.getItemLine(t,e);return l.shopifyCart.updateItem(i,{quantity:e.quantity,properties:e.properties}).then((function(t){var e=document.querySelector('[data-live-item-key="'+n+'"]');e&&(e.dataset.liveItemKey=t.items[i-1].key)}))}))}}}}else if(e.properties.hasOwnProperty(fi.ID)&&fi.VALIDATE&&!this._validateCartItemOptionsPrice(t,e))return!1;for(var c=this._resolveCartItemEl(t,e),u=0;u<c.length;u++){var p=c[u];if(e.properties.hasOwnProperty(fi.OPTIONS)||(i=0),p){if(e.properties._preview){var d=p.querySelector("[data-live-item-image]");if(!d&&hi.cartItemPreview){var f=E.pathBaseName(e.image,!1);d=p.querySelector('img[src*="'+f+'"], img[data-src*="'+f+'"], img[data-srcset*="'+f+'"]')}d&&(d.src=e.properties._preview,d.hasAttribute("srcset")&&d.removeAttribute("srcset"))}if(!window.Cloudlift.upload)for(var h in e.properties)if(e.properties.hasOwnProperty(h)){var v=e.properties[h];if("string"==typeof v&&-1!==v.indexOf("cloudlift.app")){var m=E.findElementContainsText("*",v,p);if(m.length>0){var g=m[m.length-1],y=document.createElement("span");y.className="cl-prop",y.innerHTML=g.textContent.replace(v,'<a href="'+v+'" target="_blank" style="cursor:pointer;border:0;">'+S.get("product.options.file.link")+"</a>"),g.parentNode.replaceChild(y,g)}}}var _=p.querySelector("[data-live-item-edit]");if(!_&&hi.cartItemEdit){var w=p.querySelector('a[href*="/cart/change"]');if(this.shopifyStore.isTheme("Dawn")){var b=p.querySelector(".discounts");b&&(w=b)}if(null!=w){P.debug("---\x3e adding editBtn before",w),(_=document.createElement("a")).style.padding="5px 10px",_.style.border="1px solid #d1d5db",_.style.borderRadius="3px",_.innerText=S.get("product.options.item.edit"),_.dataset.liveItemEdit="1";var x=document.createElement("div");x.style.padding="10px 0",x.appendChild(_),w.parentNode.insertBefore(x,w)}}if(_){P.debug("---\x3e using editBtn element",_);var k=e.url+"&item="+e.key;"A"===_.tagName?_.href=k:_.addEventListener("click",(function(){return window.location.href=k}))}if(hi.cartItemClOptions)for(var C in e.properties)if(e.properties.hasOwnProperty(C)&&C.startsWith(fi.OPTIONS)&&-1!==p.innerHTML.indexOf(C)){var O=E.findElementContainsRegex("*",new RegExp("".concat(C,".*").concat(e.properties[C]),"s"),p);if(O.length>0){var T=O[O.length-1],L=!0;for(var I in e.properties)if(e.properties.hasOwnProperty(I)&&-1!==T.innerHTML.indexOf(I)){L=!1;break}if(L)T.parentNode.removeChild(T);else{var M=String(e.properties[C]),F=T.innerHTML.indexOf(C),A=T.innerHTML.indexOf(M)+M.length;T.innerHTML=T.innerHTML.replace(T.innerHTML.slice(F,A),"")}}}if(e.properties[fi.ID])if(e.properties.hasOwnProperty(fi.OPTIONS)){if(e.properties[fi.PRICE]){var R=vi.moneyFormat,j=this.shopifyStore.trimMoneyFormatAmount(vi.moneyFormat),D=parseInt(e.properties[fi.PRICE]);this.config.priceDraft&&(r=e.original_line_price+D*e.quantity);var N=function(t){var e=di(t,j),n=E.findElementContainsText("*",e,p);return 0===n.length&&(P.debug("no itemPrice elements found for price:",e),hi.amountNoDecimals&&(e=di(t,"{{ amount_no_decimals }}"),P.debug("fallback {{ amount_no_decimals }} price: ",e),n=E.findElementContainsText("*",e,p))),n.length?n[n.length-1]:null},V=p.querySelector("[data-live-item-final-price]");!V&&hi.cartItemPrice&&(V=N(e.final_price)),V&&(P.debug("---\x3e found item.final_price element",V),V.innerHTML=di(e.final_price+D,R)),!(V=p.querySelector("[data-live-item-original-price]"))&&hi.cartItemPrice&&(V=N(e.original_price)),V&&(P.debug("---\x3e found item.original_price element",V),V.innerHTML=di(e.original_price+D,R)),!(V=p.querySelector("[data-live-item-final-line-price]"))&&hi.cartItemPrice&&(V=N(e.final_line_price)),V&&(P.debug("---\x3e found item.final_line_price element",V),V.innerHTML=di(e.final_line_price+D*e.quantity,R)),!(V=p.querySelector("[data-live-item-original-line-price]"))&&hi.cartItemPrice&&(V=N(e.original_line_price)),V&&(P.debug("---\x3e found item.line_price element",V),V.innerHTML=di(e.original_line_price+D*e.quantity,R))}if(hi.cartItemPriceOptions){var q=void 0;if(null!=(q=this.config.priceDraft?Ps.getItem(e.properties[fi.ID]):this._findCartItemByProperty(t,fi.ID,e.properties[fi.ID],e.key))&&q.properties)for(var B in q.properties)if("_"!==B.charAt(0)&&q.properties.hasOwnProperty(B)&&e.properties.hasOwnProperty(B)){var H=E.findElementContainsRegex("*",new RegExp("".concat(E.escapeRegex(B),".*").concat(E.escapeRegex(e.properties[B])),"s"),p);if(H.length>0){var U=H[H.length-1],z=B.replace(/^[^a-zA-Z]+|[^\w]+/g,""),W="p"+z.charAt(0).toUpperCase()+z.slice(1);U.dataset[W]||(P.debug("--\x3e found element to display options price for property: "+B,U),U.innerHTML=U.innerHTML.replace(e.properties[B],e.properties[B]+" | "+q.properties[B]),U.dataset[W]="1")}}}}else p.parentNode&&p.parentNode.removeChild(p)}else e.properties.hasOwnProperty(fi.OPTIONS)&&P.debug("--\x3e no cart item node found for item: ",e)}}}return this._cartCount+=i,this._cartTotal+=r,!0}},{key:"_findCartItemByProperty",value:function(t,e,n,i){for(var r=0;r<t.items.length;r++){var o=t.items[r];if((!i||o.key!==i)&&(o.properties&&o.properties.hasOwnProperty(e)&&o.properties[e]===n))return o}return null}},{key:"_validateCartItemOptionsPrice",value:function(t,e){var n=this._findCartItemByProperty(t,fi.ID,e.properties[fi.ID],e.key);if(!n)return P.warn("[live-options] missing cart item options_id : "+e.properties[fi.ID]+" => removing cartItem",e),this.shopifyCart.removeItem(this.shopifyCart.getItemLine(t,e)).then((function(){return window.location.reload()})),!1;if(e.properties.hasOwnProperty(fi.PRICE)){var i=parseInt(e.properties[fi.PRICE]),r=i*e.quantity;if(r!==n.original_line_price){var o=this;if(vi.currencyConvert){if(e.properties.hasOwnProperty(fi.CURRENCY)&&e.properties[fi.CURRENCY]!==vi.currency){var a=parseInt(e.properties[fi.PRICE_BASE]);vi.priceVariantValue=n.original_price/100,r=(a=mi(a))*e.quantity,e.properties[fi.CURRENCY]=vi.currency,this._convertOptionsPriceProperties(n.properties)}}else{var s={};s[fi.ID]=n.properties[fi.ID],n.properties=s}var l=Math.round(r/n.original_price),c=Math.round(n.original_price*l/e.quantity),u=Promise.resolve();return c!==i&&(e.properties[fi.PRICE]=String(c),u=this.shopifyCart.updateItem(this.shopifyCart.getItemLine(t,e),{quantity:e.quantity,properties:e.properties})),u.then((function(){return o.shopifyCart.updateItem(o.shopifyCart.getItemLine(t,n),{quantity:l,properties:n.properties})})).then((function(){window.location.reload()})),!1}}return!0}},{key:"_resolveCartItemEl",value:function(t,e){for(var n=[],i=['[data-live-item-key="'+e.key+'"]','[data-cart-item-key="'+e.key+'"]','[data-key="'+e.key+'"]',".cart_item_"+e.id],r=0;r<i.length;r++){var o=i[r];if((n=document.querySelectorAll(o)).length)return n}if(e.image&&hi.cartItem){P.debug("--\x3e [cart-item] image fallback ",e);var a=void 0,s=E.pathBaseName(e.image,!1),l=['img[src*="'+s+'"]','img[data-src*="'+s+'"]','img[data-srcset*="'+s+'"]'];if(this.config.itemImgParentSelector){for(var c=this.config.itemImgParentSelector.split(","),u=[],p=0;p<c.length;p++)for(var d=c[p],f=0;f<l.length;f++){var h=l[f];u.push(d+" "+h)}l=u}var v=document.querySelectorAll(l.join(","));if(v.length>0){for(var m=0;m<v.length;m++){var g=v[m],y=E.findParent(g,"form");if(y)for(var _=g;_!==y;){if(-1!==_.innerHTML.indexOf(e.key)){var w=!0;if(t.items.length>1)for(var b=0;b<t.items.length;b++){var x=t.items[b];if(x!==e&&-1!==_.innerHTML.indexOf(x.key)){w=!1;break}}if(w)return _.dataset.liveItemKey=e.key,P.debug("auto resolved cart item node ",_),[_];break}_=_.parentElement}else if(1===v.length)return(a=v[0].parentNode).dataset.liveItemKey=e.key,[a]}(a=v[0].parentNode).dataset.liveItemKey=e.key,P.debug("fallback cart item parent ",a)}return[a]}return n}},{key:"_patchCartCount",value:function(t){for(var e=t.item_count,n=[],i=["[data-live-cart-count]","[data-cart-count]"],r=0;r<i.length;r++){var o,a=i[r],s=document.querySelectorAll(a);s.length&&(o=n).push.apply(o,g(s))}for(var l=0;l<n.length;l++){var c=n[l];P.debug("--\x3e found cart count element to patch count: "+e+"  => "+this._cartCount,c),c.innerText=this._cartCount}if(hi.cartCount&&e!==this._cartCount){var u=E.findElementContainsRegex("*",new RegExp("^.{0,3}".concat(e,".{0,3}$"),"s"));if(this.shopifyStore.isTheme("Dawn")){var p=document.querySelector("#cart-notification-button");p&&u.push(p)}for(var d=0;d<u.length;d++){var f=u[d];P.debug("--\x3e found cart count element to replace path count: "+e+"  => "+this._cartCount,f),f.innerHTML=f.innerHTML.replace(e,this._cartCount)}}}},{key:"_patchCartTotal",value:function(t){if(this.config.priceDraft){var e=t.total_price,n=[];this._cartTotalDiff=t.original_total_price!==this._cartTotal,this._cartTotal-=t.total_discount;for(var i=di(this._cartTotal,vi.moneyFormatWithCurrency),r=["[data-live-cart-total]",".totals__subtotal-value"],o=0;o<r.length;o++){var a,s=r[o],l=document.querySelectorAll(s);l.length&&(a=n).push.apply(a,g(l))}for(var c=0;c<n.length;c++){var u=n[c];P.debug("--\x3e found cart total element to patch total: "+e+" => "+this._cartTotal,u),u.innerHTML=i}if(hi.cartTotal&&this._cartTotalDiff){var p=di(e,this.shopifyStore.trimMoneyFormatAmount(vi.moneyFormat)),d=E.findElementContainsText('form[action*="/cart"]:not(form[action*="/cart/add"]) *, form[action*="/checkout"] *',p);if(0===d.length&&(P.debug("no priceTotal elements found for price:",p),hi.amountNoDecimals&&(p=di(e,"{{ amount_no_decimals }}"),P.debug("fallback {{ amount_no_decimals }} price: ",p),d=E.findElementContainsText('form[action*="/cart"]:not(form[action*="/cart/add"]) *, form[action*="/checkout"] *',p))),d.length){var f=d[d.length-1];P.debug("---\x3e found cart.total_price element",f),f.innerHTML=i}}if(this._cartTotalDiff&&(this._checkoutBtns=this.shopifyStore.findExpressDynamicCheckoutCart(),this._checkoutBtns.length))for(var h=0;h<this._checkoutBtns.length;h++){this._checkoutBtns[h].style.display="none"}}}},{key:"_checkDiscount",value:function(){if(this._discountEl=document.querySelector("[data-live-discount]"),!this._discountEl&&hi.cartDiscount){if(this.shopifyStore.isTheme("Dawn")){var t=document.querySelector(".cart__blocks");t&&(this._discountEl=document.createElement("div"),this._discountEl.dataset.liveDiscount="",t.insertBefore(this._discountEl,t.firstChild))}if(!this._discountEl){var e=this.shopifyStore.trimMoneyFormatAmount(vi.moneyFormat),n=di(this._cartTotal,e),i=E.findElementContainsText('form[action*="/cart"]:not(form[action*="/cart/add"]) *, form[action*="/checkout"] *',n);if(i.length)for(var r=i[i.length-1].parentNode;r;){if("P"!==r.tagName){var o=getComputedStyle(r).display;if("block"===o||"flex"===o){this._discountEl=document.createElement("div"),this._discountEl.dataset.liveDiscount="1",r.insertBefore(this._discountEl,r.firstChild);break}}r=r.parentNode}}}if(null!=this._discountEl){var a=this._getDiscount();if(a.type===_i&&(a.valid=!0,delete this._discount),!this._discount||this._discount.code!==a.code){if(this._discount=a,this._discountInput={code:"",loading:!1,button:S.get("product.options.discount.button"),placeholder:S.get("product.options.discount.placeholder")},this._discount.type!==gi){if(window.localStorage){var s=localStorage.getItem("cl_discount");if(s){var l=JSON.parse(s);l.code===this._discount.code&&(this._discount=l)}}this._discount.valid||(this._discountInput.code=this._discount.code,this._applyDiscount())}var c='form[action*="/cart"]:not(form[action*="/cart/add"]):not([id="cart-notification-form"]), form[action*="/checkout"]',u=E.findParent(this._discountEl,c);if(!u&&(u=document.querySelector(c))){var p=u.getAttribute("id");p&&(this._discountInput.cartFormLink=p)}}this._renderDiscount()}}},{key:"_removeDiscount",value:function(t){t&&(t.preventDefault(),t.stopImmediatePropagation()),this._discount.type=gi,this._discount.code="",this._discount.valid=!1,this.shopifyStore.removeDiscountCode(),this._renderDiscount()}},{key:"_applyDiscount",value:function(t){var e=this;if(t&&(t.preventDefault(),t.stopImmediatePropagation()),this._discountInput.code){this._discount.type=yi,this._discount.code=this._discountInput.code,this._discount.valid=!1,this._discountInput.loading=!0,this._discountInput.error="",this._discountInput.success="";var n=this._getCheckout(),i=new C(this.config.api+"/api/checkout/discount",{method:"POST",data:{checkout:n},responseType:"json",headers:{"Content-type":"application/json"},queryParams:{shop:this.config.shop}});return this._renderDiscount(),i.then((function(t){e._discountInput.loading=!1,t.data?(e._discount=t.data,e._discount.valid=!0,e._discountInput.code="",window.localStorage&&localStorage.setItem("cl_discount",JSON.stringify(e._discount)),e.shopifyStore.saveDiscountCode(e._discount.code),e._discountInput.success=S.get("product.options.discount.valid")):e._discountInput.error=S.get("product.options.discount.invalid"),e._renderDiscount(),P.debug("[live-options-api] checkout discount response",t.data)})).catch((function(t){e._discountInput.loading=!1,e._discountInput.error="Please try again",e._renderDiscount(),P.error("[live-options-api] checkout discount error",t)}))}}},{key:"_renderDiscount",value:function(){var t=this;wt(Us(this._discount,this._discountInput,this._applyDiscount.bind(this),this._removeDiscount.bind(this),(function(e){t._discountInput.code=e.target.value,t._discountInput.error&&(t._discountInput.error="",t._renderDiscount())})),this._discountEl)}},{key:"_findPriceEl",value:function(t,e,n){var i=di(t,n),r=E.findElementContainsText("*",i,e);return r.length?r[r.length-1]:null}},{key:"_convertOptionsPriceProperties",value:function(t){for(var e in t)if("_"!==e.charAt(0)&&t.hasOwnProperty(e)&&t.hasOwnProperty("_"+e)){var n=parseInt(t["_"+e]);n=mi(n),t[e]=di(100*n,vi.moneyFormat).replace(/(<([^>]+)>)/gi,"")}}}]),t}(),Ws=zs,Ys=function(){!function(){if(arguments.length>0&&void 0!==arguments[0]&&arguments[0]||!("content"in document.createElement("template"))){var t=document.implementation.createHTMLDocument("template"),e=t.body,n={enumerable:!0,configurable:!0},i=function(i){var r=t.createDocumentFragment();Object.defineProperties(i,{content:Object.assign(Object.assign({},n),{get:function(){return r}}),innerHTML:Object.assign(Object.assign({},n),{set:function(t){e.innerHTML=t,U(r,r.firstChild),H(r,e.firstChild)}})})},r=Document.prototype.createElement;Document.prototype.createElement=function(t,e){var n=r.call(this,t,e);return"TEMPLATE"===n.tagName&&i(n),n}}}();var t=window.Cloudlift.options.config;P.setDefaultLevel(P.levels.ERROR);var e=P.getLevel();P.setLevel(void 0!==t.log?t.log:e),P.debug("got config",t),window.addEventListener("cloudlift.options.ready",(function(t){P.debug("resources loaded")}));var n=-1===t.api.indexOf("local")?t.api.replace("api.","assets."):t.api;I.fonts=t.fonts,I.api=n+"/api/font",I.apiParams.shop=t.shop,S.translations=t.i18n||{},t.setup?window.clTranslate?S.translations=E.extend(S.translations,window.clTranslate):(S.api=n+"/api/assets/"+t.app+"/translate/{locale}?shop="+t.shop,S.event+="."+t.app,S.locale&&t.locale&&S.locale!=t.locale&&S.fetch(S.locale)):(window.Translate=S,window.FontLoader=I),window.Cloudlift.options.lib={ProductOptions:js,ProductPreview:Es},S.ready.then((function(){window.Cloudlift.options.App=new Ws(t)}))};"Promise"in window&&"assign"in Object&&String.prototype.startsWith&&Array.prototype.flat?Ys():t(Oi)(window.Cloudlift.options.config.assets+"/static/lib/core-js/core-js.min.js",Ys)}();