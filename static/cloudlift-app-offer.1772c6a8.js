parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"IkY8":[function(require,module,exports) {
"use strict";function e(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function n(e,n){for(var r=0;r<n.length;r++){var t=n[r];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function r(e,r,t){return r&&n(e.prototype,r),t&&n(e,t),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=function(){function n(){e(this,n)}return r(n,null,[{key:"get",value:function(e,r){var t=n.translations[e]||e;if(r)for(var a in r)r.hasOwnProperty(a)&&(t=t.replace(new RegExp("{"+a+"}","g"),r[a]));return t}}]),n}();t.translations={};var a=t;exports.default=a;
},{}],"zY0S":[function(require,module,exports) {
"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function o(e,t,o){return t&&n(e.prototype,t),o&&n(e,o),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var r=function(){function n(){t(this,n)}return o(n,null,[{key:"extend",value:function(){for(var e={},t=function(t){for(var o in t)t.hasOwnProperty(o)&&("[object Object]"===Object.prototype.toString.call(t[o])?e[o]=n.extend(e[o],t[o]):void 0!==t[o]&&(e[o]=t[o]))},o=0;o<arguments.length;o++){t(arguments[o])}return e}},{key:"isElement",value:function(t){return"object"===e(t)&&void 0!==t.nodeType}},{key:"matches",value:function(e,t){return Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(e){for(var t=(this.document||this.ownerDocument).querySelectorAll(e),n=t.length;--n>=0&&t.item(n)!==this;);return n>-1}),e.matches(t)}},{key:"isInPage",value:function(e){return e!==document.body&&document.body.contains(e)}},{key:"findParent",value:function(e,t){if("function"==typeof e.closest)return e.closest(t)||null;for(;e;){if(n.matches(e,t))return e;e=e.parentElement}return null}},{key:"findElementContainsText",value:function(e,t){var n=document.querySelectorAll(e);return Array.prototype.filter.call(n,function(e){return RegExp(t).test(e.textContent)})}},{key:"readCookie",value:function(e){e+="=";for(var t=document.cookie.split(/;\s*/),n=t.length-1;n>=0;n--)if(!t[n].indexOf(e))return t[n].replace(e,"")}},{key:"writeCookie",value:function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"/",r=new Date;r.setDate(r.getDate()+n);var u=null==n?"":"; expires="+r.toUTCString();document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)+u+(o?"; path="+o:"")+";"}},{key:"removeCookie",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/";document.cookie=e+"=; Path="+t+"; Expires=Thu, 01 Jan 1970 00:00:01 GMT;"}},{key:"addStyleElement",value:function(e,t){t&&"head"!=t||(t=document.head||document.getElementsByTagName("head")[0]);var n=document.createElement("style");return n.appendChild(document.createTextNode(e)),t.appendChild(n),n}},{key:"objectKeys",value:function(e){if(!Object.keys){var t,n=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.push(t);return n}return Object.keys(e)}},{key:"hasQueryParam",value:function(e,t){return-1!==e.indexOf(t)}},{key:"getQueryParam",value:function(e,t){var n=new RegExp("[?&]"+t+"=([^&#]*)","i").exec(e);return n?n[1]:null}},{key:"getQueryParams",value:function(e){var t={},n=document.createElement("a");n.href=e;for(var o=n.search.substring(1).split("&"),r=0;r<o.length;r++){var u=o[r].split("=");t[u[0]]=decodeURIComponent(u[1])}return t}},{key:"debounced",value:function(e,t){var n;return function(){for(var o=arguments.length,r=new Array(o),u=0;u<o;u++)r[u]=arguments[u];n&&clearTimeout(n),n=setTimeout(function(){t.apply(void 0,r),n=null},e)}}},{key:"throttled",value:function(e,t){var n=0;return function(){var o=(new Date).getTime();if(!(o-n<e))return n=o,t.apply(void 0,arguments)}}},{key:"replaceAll",value:function(e,t,n){return e.replace(new RegExp(t,"g"),n)}},{key:"replacePlaceholders",value:function(e,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"\\$";for(var r in t)t.hasOwnProperty(r)&&(e=n.replaceAll(e,o+r,t[r]));return e}},{key:"decodeHtml",value:function(e){var t=document.createElement("textarea");return t.innerHTML=e,t.value}}]),n}(),u=r;exports.default=u;
},{}],"mx8w":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("./util"));function e(t){return t&&t.__esModule?t:{default:t}}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var s=0;s<e.length;s++){var r=e[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function n(t,e,s){return e&&r(t.prototype,e),s&&r(t,s),t}var o=function(){function e(r,n){s(this,e);if(!this.supports())throw"This browser is not supported";return this.settings=t.default.extend({method:"GET",username:null,password:null,data:{},queryParams:{},headers:{"Content-type":"application/x-www-form-urlencoded"},responseType:"text",timeout:null,withCredentials:!1,onProgress:null},n||{}),this.xhr(r)}return n(e,[{key:"supports",value:function(){return"XMLHttpRequest"in window&&"JSON"in window&&"Promise"in window}},{key:"parse",value:function(t){var e;if("text"!==this.settings.responseType&&""!==this.settings.responseType){var s=t.response;if("json"===this.settings.responseType&&"string"==typeof s)try{s=JSON.parse(s)}catch(r){}return{data:s,xhr:t}}try{e=JSON.parse(t.responseText)}catch(r){e=t.responseText}return{data:e,xhr:t}}},{key:"param",value:function(t){if("string"==typeof t||"[object FormData]"===Object.prototype.toString.call(t)||"[object File]"===Object.prototype.toString.call(t)||"[object Blob]"===Object.prototype.toString.call(t))return t;if(/application\/json/i.test(this.settings.headers["Content-type"])||"[object Array]"===Object.prototype.toString.call(t))return JSON.stringify(t);var e=[];for(var s in t)t.hasOwnProperty(s)&&e.push(encodeURIComponent(s)+"="+encodeURIComponent(t[s]));return e.join("&")}},{key:"addQueryParams",value:function(t){if(this.settings.queryParams){var e=[];for(var s in this.settings.queryParams)this.settings.queryParams.hasOwnProperty(s)&&e.push(s+"="+this.settings.queryParams[s]);if(e.length>0){var r=e.join("&");return-1===t.indexOf("?")?t+"?"+r:t+"&"+r}}return t}},{key:"xhr",value:function(t){var e=this,s=new XMLHttpRequest,r=new Promise(function(r,n){for(var o in s.onreadystatechange=function(){if(4===s.readyState){var t=e.parse(s);s.status>=200&&s.status<300?r(t):n(t)}},t=e.addQueryParams(t),s.open(e.settings.method,t,!0,e.settings.username,e.settings.password),s.responseType=e.settings.responseType,e.settings.headers)e.settings.headers.hasOwnProperty(o)&&s.setRequestHeader(o,e.settings.headers[o]);e.settings.timeout&&(s.timeout=e.settings.timeout,s.ontimeout=function(t){n({status:408,statusText:"Request timeout"})}),e.settings.withCredentials&&(s.withCredentials=!0),e.settings.onProgress&&(s.upload.onprogress=e.settings.onProgress),s.send(e.param(e.settings.data))});return r.cancel=function(){s.abort()},r}}]),e}(),i=o;exports.default=i;
},{"./util":"zY0S"}],"ohSP":[function(require,module,exports) {
var define;
var e;!function(o,n){"use strict";"function"==typeof e&&e.amd?e(n):"object"==typeof module&&module.exports?module.exports=n():o.log=n()}(this,function(){"use strict";var e=function(){},o="undefined",n=typeof window!==o&&typeof window.navigator!==o&&/Trident\/|MSIE /.test(window.navigator.userAgent),t=["trace","debug","info","warn","error"];function l(e,o){var n=e[o];if("function"==typeof n.bind)return n.bind(e);try{return Function.prototype.bind.call(n,e)}catch(t){return function(){return Function.prototype.apply.apply(n,[e,arguments])}}}function i(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function r(o,n){for(var l=0;l<t.length;l++){var i=t[l];this[i]=l<o?e:this.methodFactory(i,o,n)}this.log=this.debug}function c(t,c,a){return function(t){return"debug"===t&&(t="log"),typeof console!==o&&("trace"===t&&n?i:void 0!==console[t]?l(console,t):void 0!==console.log?l(console,"log"):e)}(t)||function(e,n,t){return function(){typeof console!==o&&(r.call(this,n,t),this[e].apply(this,arguments))}}.apply(this,arguments)}function a(e,n,l){var i,a=this,u="loglevel";function s(){var e;if(typeof window!==o){try{e=window.localStorage[u]}catch(l){}if(typeof e===o)try{var n=window.document.cookie,t=n.indexOf(encodeURIComponent(u)+"=");-1!==t&&(e=/^([^;]+)/.exec(n.slice(t))[1])}catch(l){}return void 0===a.levels[e]&&(e=void 0),e}}e&&(u+=":"+e),a.name=e,a.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},a.methodFactory=l||c,a.getLevel=function(){return i},a.setLevel=function(n,l){if("string"==typeof n&&void 0!==a.levels[n.toUpperCase()]&&(n=a.levels[n.toUpperCase()]),!("number"==typeof n&&n>=0&&n<=a.levels.SILENT))throw"log.setLevel() called with invalid level: "+n;if(i=n,!1!==l&&function(e){var n=(t[e]||"silent").toUpperCase();if(typeof window!==o){try{return void(window.localStorage[u]=n)}catch(l){}try{window.document.cookie=encodeURIComponent(u)+"="+n+";"}catch(l){}}}(n),r.call(a,n,e),typeof console===o&&n<a.levels.SILENT)return"No console available for logging"},a.setDefaultLevel=function(e){s()||a.setLevel(e,!1)},a.enableAll=function(e){a.setLevel(a.levels.TRACE,e)},a.disableAll=function(e){a.setLevel(a.levels.SILENT,e)};var f=s();null==f&&(f=null==n?"WARN":n),a.setLevel(f,!1)}var u=new a,s={};u.getLogger=function(e){if("string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var o=s[e];return o||(o=s[e]=new a(e,u.getLevel(),u.methodFactory)),o};var f=typeof window!==o?window.log:void 0;return u.noConflict=function(){return typeof window!==o&&window.log===u&&(window.log=f),u},u.getLoggers=function(){return s},u});
},{}],"cEki":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=u(require("./request")),t=u(require("./util")),n=o(require("loglevel"));function r(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return r=function(){return e},e}function o(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=r();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if(Object.prototype.hasOwnProperty.call(e,u)){var i=o?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(n,u,i):n[u]=e[u]}return n.default=e,t&&t.set(e,n),n}function u(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e}var l=function(){function r(e){i(this,r);this.settings=t.default.extend({api:"",path:{products:"/products/{handle}.{view}",collections:"/collections/{handle}.json",collectionsProducts:"/collections/{handle}/products.json"}},e||{})}return a(r,[{key:"fakeProduct",value:function(e){this.isProduct=function(){return!0},this.getHandleFromUrl=function(){return e}}},{key:"isAdmin",value:function(){return null!=document.getElementById("admin_bar_iframe")}},{key:"isProduct",value:function(){return-1!==window.location.pathname.indexOf("/products/")}},{key:"isCart",value:function(){return-1!==window.location.pathname.indexOf("/cart")}},{key:"hasCart",value:function(){return this.findCartForms().length>0}},{key:"isOrderStatus",value:function(){return"undefined"!=typeof Shopify&&void 0!==Shopify.Checkout&&void 0!==Shopify.Checkout.OrderStatus}},{key:"getDiscountUrl",value:function(e,t){return"/discount/"+e+(t?"?redirect="+t:"")}},{key:"getDiscountCode",value:function(){return t.default.readCookie("discount_code")}},{key:"getHandleFromUrl",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:location.pathname).replace(/\/$/,"").split("/"),t=("products"==e[e.length-2]||"products_preview"===e.pop())&&e[e.length-1].replace(/(.*)?\?.*$/,"$1");return decodeURIComponent(t)}},{key:"tryGetProduct",value:function(){return this.isProduct()?this.getProduct():new Promise(function(e,t){e(null)})}},{key:"tryGetProductMap",value:function(){return this.isProduct()?this.getProduct().then(function(e){return r.products}):new Promise(function(e,t){e(r.products)})}},{key:"parseProductJsonElements",value:function(){var e=document.querySelectorAll('[id^="ProductJson-"]');if(e)for(var t=0;t<e.length;t++){var o=e[t];try{var u=JSON.parse(o.innerHTML);u.handle&&(r.products[u.handle+".js"]=u)}catch(i){n.debug("error parsing ProductJson: ",o,i)}}}},{key:"getProduct",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"js";t||(t=this.getHandleFromUrl());var o=t+"."+n;if(r.products[o])return new Promise(function(e,t){e(r.products[o])});var u=this.settings.api+this.settings.path.products.replace("{handle}",t).replace("{view}",n);return new e.default(u,{method:"GET",responseType:"json"}).then(function(e){var t=e.data;return"json"===n&&(t=e.data.product),r.products[o]=t,t}).catch(function(e){throw e})}},{key:"getCollectionProducts",value:function(t){return new e.default(this.settings.api+this.settings.path.collectionsProducts.replace("{handle}",t),{method:"GET",responseType:"json"}).then(function(e){return e.data.products}).catch(function(e){throw e})}},{key:"getCollection",value:function(t){var n=t+".json";return r.collections[n]?new Promise(function(e,t){e(r.collections[n])}):new e.default(this.settings.api+this.settings.path.collections.replace("{handle}",t),{method:"GET",responseType:"json"}).then(function(e){var t=e.data.collection;return r.collections[n]=t,t}).catch(function(e){throw e})}},{key:"onThemeSectionEvent",value:function(e,t){return document.addEventListener("shopify:section:"+e,t)}},{key:"findCartForms",value:function(){return document.querySelectorAll('form[action="/cart"]')}},{key:"findProductForms",value:function(){return document.querySelectorAll('form[action*="/cart/add"]')}},{key:"findProductFormBestMatch",value:function(e){var t="#product_form_"+e,n=document.querySelector(t);if(!n){var r=this.findProductForms();r.length>0&&(n=r[0])}return n}},{key:"findProductFormVariantId",value:function(e){if(null!=e){var t=e.querySelector("[name=id]");if(null!=t&&t.value)return t.value}return null}},{key:"findProductFormQuantity",value:function(e){if(null!=e){var t=e.querySelector("[name=quantity]");if(null!=t&&t.value)return parseInt(t.value)}return 1}},{key:"onProductFormSubmit",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[".cl-cart-add"];e.addEventListener("submit",t);for(var r=e.querySelectorAll("[type=submit],.add_to_cart,.btn.add-to-cart"),o=0;o<r.length;o++){r[o].addEventListener("click",t)}if(n&&Array.isArray(n))for(var u=e.querySelectorAll(n.join(",")),i=0;i<u.length;i++){u[i].addEventListener("click",t,{capture:!0})}}}],[{key:"getInstance",value:function(e){return r._instance?r._instance:(r._instance=new r(e),r._instance)}}]),r}();l.products={},l.collections={};var s=l;exports.default=s;
},{"./request":"mx8w","./util":"zY0S","loglevel":"ohSP"}],"ydp9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=u(require("./request")),e=u(require("./util")),r=a(require("loglevel"));function n(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return n=function(){return t},t}function a(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=n();if(e&&e.has(t))return e.get(t);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in t)if(Object.prototype.hasOwnProperty.call(t,u)){var i=a?Object.getOwnPropertyDescriptor(t,u):null;i&&(i.get||i.set)?Object.defineProperty(r,u,i):r[u]=t[u]}return r.default=t,e&&e.set(t,r),r}function u(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function c(t,e,r){return e&&o(t.prototype,e),r&&o(t,r),t}var s=function(){function n(t){i(this,n);this.cache=null,this.settings=e.default.extend({api:"",requestOptions:{responseType:"json",headers:{"Content-type":"application/json"}}},t||{})}return c(n,[{key:"getCart",value:function(){var t=this;return arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&this.cache?Promise.resolve(this.cache):this._cart().then(function(e){return t.cache=e,e})}},{key:"toItem",value:function(t,e,r){return{id:t,quantity:e,properties:r}}},{key:"addItem",value:function(t){return this._cartAdd(t)}},{key:"addItems",value:function(t){return this._cartAdd({items:t}).then(function(t){return t.items})}},{key:"removeItem",value:function(t){return this.updateItem(t,this.toItem(null,0))}},{key:"removeItemById",value:function(t){return this.updateItemById(this.toItem(t,0))}},{key:"updateItem",value:function(t,e){return this._cartChange({line:t,quantity:e.quantity,properties:e.properties})}},{key:"updateItemById",value:function(t){return this._cartChange(t)}},{key:"updateItemQuantitiesById",value:function(t){return this._cartUpdate({updates:t})}},{key:"setNote",value:function(t){return this._cartUpdate({note:t})}},{key:"setAttributes",value:function(t){return this._cartUpdate({attributes:t})}},{key:"clear",value:function(){return this._cartClear()}},{key:"_cart",value:function(){return this._cartRequest("/cart.js",{method:"GET"})}},{key:"_cartAdd",value:function(t){return this._cartRequest("/cart/add.js",{method:"POST",data:t})}},{key:"_cartUpdate",value:function(t){return this._cartRequest("/cart/update.js",{method:"POST",data:t})}},{key:"_cartChange",value:function(t){return this._cartRequest("/cart/change.js",{method:"POST",data:t})}},{key:"_cartClear",value:function(){return this._cartRequest("/cart/clear.js",{method:"POST"})}},{key:"_cartRequest",value:function(n,a){var u=e.default.extend(this.settings.requestOptions,a),i=this.settings.api+n;return new t.default(i,u).then(function(t){return r.debug("[shopify-cart] "+i+" response",t.data),t.data}).catch(function(t){throw r.error("[shopify-cart] "+i+" error",t),t.data})}}],[{key:"getInstance",value:function(t){return n._instance?n._instance:(n._instance=new n(t),n._instance)}}]),n}(),l=s;exports.default=l;
},{"./request":"mx8w","./util":"zY0S","loglevel":"ohSP"}],"XoAR":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function n(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var i=function(){function t(){e(this,t)}return n(t,null,[{key:"register",value:function(e){var t=this;return this.listeners.push(e),this.patched||this._patch(),function(){var n=t.listeners.indexOf(e);-1!==n&&t.listeners.splice(n,1),0===t.listeners.length&&t._unpatch()}}},{key:"_callListeners",value:function(e){for(var n=0;n<t.listeners.length;n++){(0,t.listeners[n])(e)}}},{key:"_patch",value:function(){t.originalOpen=XMLHttpRequest.prototype.open,XMLHttpRequest.prototype.open=function(){var e=arguments[0],n=arguments[1];this.addEventListener("readystatechange",function(){4==this.readyState&&200==this.status&&t._callListeners({method:e,url:n})},!1),t.originalOpen.apply(this,arguments)},"function"==typeof window.fetch&&(t.originalFetch=window.fetch,window.fetch=function(){var e=arguments[0],n=void 0!==arguments[1]?arguments[1].method:"GET",i=t.originalFetch.apply(this,arguments);return i.then(function(){t._callListeners({method:n,url:e})}),i}),this.patched=!0}},{key:"_unpatch",value:function(){t.originalOpen&&(XMLHttpRequest.prototype.open=t.originalOpen),t.originalFetch&&(window.fetch=t.originalFetch),this.patched=!1}}]),t}();i.patched=!1,i.listeners=[];var r=i;exports.default=r;
},{}],"FkkJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=s(require("./request")),t=s(require("./util")),r=a(require("loglevel"));function n(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return n=function(){return e},e}function a(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=n();if(t&&t.has(e))return t.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){var i=a?Object.getOwnPropertyDescriptor(e,s):null;i&&(i.get||i.set)?Object.defineProperty(r,s,i):r[s]=e[s]}return r.default=e,t&&t.set(e,r),r}function s(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}var f=function(){function n(e){i(this,n);this.settings=t.default.extend({api:"https://api.cloudlift.app",path:"/api/offer",queryParams:{}},e||{})}return u(n,[{key:"fetchOffer",value:function(t){return new e.default(this.settings.api+this.settings.path+"/"+t,{method:"GET",responseType:"json",withCredentials:!0,queryParams:this.settings.queryParams}).then(function(e){return r.debug("[offer-api] fetchOffer response",e.data),e.data}).catch(function(e){throw r.error("[offer-api] fetchOffer error",e),e.data})}},{key:"useOffer",value:function(t,n){return new e.default(this.settings.api+this.settings.path+"/"+t,{method:"POST",data:n,responseType:"json",headers:{"Content-type":"application/json"},withCredentials:!0,queryParams:this.settings.queryParams}).then(function(e){return r.debug("[offer-api] useOffer response",e.data),e.data}).catch(function(e){throw r.error("[offer-api] useOffer error",e),e.data})}},{key:"invalidateOffer",value:function(t,n){return new e.default(this.settings.api+this.settings.path+"/"+t,{method:"DELETE",data:n,responseType:"json",headers:{"Content-type":"application/json"},withCredentials:!0,queryParams:this.settings.queryParams}).then(function(e){return r.debug("[offer-api] invalidateOffer response",e.data),e.data}).catch(function(e){throw r.error("[offer-api] invalidateOffer error",e),e.data})}},{key:"stackDiscounts",value:function(t,n,a){return new e.default(this.settings.api+this.settings.path+"/stack",{method:"POST",data:{discounts:t,active:n,items:a},responseType:"json",headers:{"Content-type":"application/json"},withCredentials:!0,queryParams:this.settings.queryParams}).then(function(e){return r.debug("[offer-api] stackDiscounts response",e.data),e.data}).catch(function(e){throw r.error("[offer-api] stackDiscounts error",e),e.data})}},{key:"deleteStackedDiscount",value:function(t){return new e.default(this.settings.api+this.settings.path+"/stack",{method:"DELETE",data:{id:t},responseType:"json",headers:{"Content-type":"application/json"},withCredentials:!0,queryParams:this.settings.queryParams}).then(function(e){return r.debug("[offer-api] deleteStackedDiscount response",e.data),e.data}).catch(function(e){throw r.error("[offer-api] deleteStackedDiscount error",e),e.data})}},{key:"createOrder",value:function(t,n){return new e.default(this.settings.api+this.settings.path+"/"+t+"/order",{method:"POST",data:n,responseType:"json",headers:{"Content-type":"application/json"},withCredentials:!0,queryParams:this.settings.queryParams}).then(function(e){return r.debug("[offer-api] createOrder response",e.data),e.data}).catch(function(e){throw r.error("[offer-api] createOrder error",e),e.data})}},{key:"offerEvent",value:function(t,n,a){return new e.default(this.settings.api+this.settings.path+"/event",{method:"POST",data:{uuid:t,type:n,data:a},responseType:"json",headers:{"Content-type":"application/json"},withCredentials:!0,queryParams:this.settings.queryParams}).then(function(e){return r.debug("[offer-api] offerEvent response",e.data),e.data}).catch(function(e){throw r.error("[offer-api] offerEvent error",e),e.data})}}],[{key:"getInstance",value:function(e){return n._instance?n._instance:(n._instance=new n(e),n._instance)}}]),n}(),c=f;exports.default=c;
},{"./request":"mx8w","./util":"zY0S","loglevel":"ohSP"}],"QqYi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.OfferEventType=exports.DiscountValueType=exports.DiscountType=exports.DisplayType=exports.DisplayLayout=exports.Trigger=void 0;var e={PRODUCT:"product",CART:"cart",ORDER_STATUS:"order_status",CUSTOM:"custom"};exports.Trigger=e;var r={BASIC:"basic",STACKED:"stacked",GRID:"grid",SLIDER:"slider"};exports.DisplayLayout=r;var t={MODAL:"modal",CONTENT:"content"};exports.DisplayType=t;var s={CODE:"code",AUTOMATIC:"auto",DRAFT:"draft"};exports.DiscountType=s;var o={PERCENTAGE:1,AMOUNT:2,FREE_SHIPPING:3,BUYXGETY_PERCENTAGE:4,BUYXGETY_FREE:5};exports.DiscountValueType=o;var p={VIEW:1,ADD:2,ORDER:3,CONVERSION:4};exports.OfferEventType=p;
},{}],"jUSW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.formatMoney=a;var e="${{amount}}";function a(a,t){"string"==typeof a&&(a=a.replace(".",""));var r="",o=/\{\{\s*(\w+)\s*\}\}/,n=t||e;function c(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:",",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:".";if(isNaN(e)||null==e)return 0;var o=(e=(e/100).toFixed(a)).split(".");return o[0].replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1".concat(t))+(o[1]?r+o[1]:"")}switch(n.match(o)[1]){case"amount":r=c(a,2);break;case"amount_no_decimals":r=c(a,0);break;case"amount_with_comma_separator":r=c(a,2,".",",");break;case"amount_no_decimals_with_comma_separator":r=c(a,0,".",",")}return n.replace(o,r)}
},{}],"jVXE":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function r(e,r,a){return r&&t(e.prototype,r),a&&t(e,a),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var a=function(){function t(){e(this,t)}return r(t,null,[{key:"getState",value:function(e){return t.storage.hasOwnProperty(e)||(t.storage[e]=t.parseState(e)),t.storage[e]}},{key:"storeState",value:function(e,r){t.storage[e]=r,window.localStorage&&localStorage.setItem(t.keyPrefix+e,JSON.stringify(r))}},{key:"parseState",value:function(e){if(window.localStorage){var r=localStorage.getItem(t.keyPrefix+e);if(r)return JSON.parse(r)}return{}}},{key:"parseAllStates",value:function(){if(window.localStorage)for(var e=0;e<localStorage.length;e++){var r=localStorage.key(e);if(r.startsWith(t.keyPrefix)){var a=r.replace(t.keyPrefix,"");t.getState(a)}}return t.storage}},{key:"clearState",value:function(e){delete t.storage[e],window.localStorage&&localStorage.removeItem(t.keyPrefix+e)}},{key:"clearAllStates",value:function(){if(window.localStorage)for(var e=0;e<localStorage.length;e++){var r=localStorage.key(e);r.startsWith(t.keyPrefix)&&localStorage.removeItem(r)}}}]),t}();a.storage={},a.keyPrefix="cl_o";var o=a;exports.default=o;
},{}],"y1JY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=c(require("./util")),e=require("./const"),s=l(require("loglevel")),i=require("@shopify/theme-currency/currency"),r=c(require("./offer-api")),a=c(require("./shopify-store")),n=c(require("./offer-state")),o=c(require("./shopify-cart"));function u(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return u=function(){return t},t}function l(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=u();if(e&&e.has(t))return e.get(t);var s={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var a=i?Object.getOwnPropertyDescriptor(t,r):null;a&&(a.get||a.set)?Object.defineProperty(s,r,a):s[r]=t[r]}return s.default=t,e&&e.set(t,s),s}function c(t){return t&&t.__esModule?t:{default:t}}function m(t){return f(t)||d(t)||y(t)||h()}function h(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function y(t,e){if(t){if("string"==typeof t)return _(t,e);var s=Object.prototype.toString.call(t).slice(8,-1);return"Object"===s&&t.constructor&&(s=t.constructor.name),"Map"===s||"Set"===s?Array.from(t):"Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?_(t,e):void 0}}function d(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function f(t){if(Array.isArray(t))return _(t)}function _(t,e){(null==e||e>t.length)&&(e=t.length);for(var s=0,i=new Array(e);s<e;s++)i[s]=t[s];return i}function v(t){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function g(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p(t,e){for(var s=0;s<e.length;s++){var i=e[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function S(t,e,s){return e&&p(t.prototype,e),s&&p(t,s),t}var E=function(){function u(e){g(this,u);this.api=r.default.getInstance(),this.shopifyStore=a.default.getInstance(),this.settings=t.default.extend({summary:!0,summaryColor:"rgb(76, 175, 80)",summaryAlign:"right",selectorSummary:"[data-cart-summary]",selectorSummarySubtotalBefore:"[data-cart-subtotal-before]",selectorSummaryTotal:"[data-cart-total-discount]",selectorSummaryLineItem:"[data-cart-discount]",selectorSummaryLineItemTitle:"[data-cart-discount-title]",selectorSummaryLineItemAmount:"[data-cart-discount-amount]",storageKey:"cl_d",moneyFormat:"$ {{amount}}",cart:!1},e||{}),this.skipCartUpdate=0,this.forceDiscountUpdate=!1,this._state=this._restoreDiscountState(),"object"!==v(this._state.discounts)&&(this._state.discounts={}),this._summary={subTotal:0,discountTotal:0,total:0,lineItems:[]},this.settings.summary&&this._querySelectorsEl(),this._checkActiveDiscount()}return S(u,[{key:"clearState",value:function(){this._state={discounts:{}},this._removeDiscountState()}},{key:"addDiscount",value:function(t,e){var i=this,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(this._state.discounts[t]=e,!r)return this.forceDiscountUpdate=!0,Promise.resolve(e.code);var a,n=this._getDiscounts(),o=this.getActiveDiscount();return(a=n.length>1?this._getDeDuplicatedDiscountIds(n):this._getDiscountIds(n)).length>1?this.api.stackDiscounts(a,null!=o&&o.stacked?o.id:null,this._getDiscountOfferItems(a)).then(function(t){if(t.discount)return i._state.active=t.discount,i._storeDiscountState(),t.discount.code;throw s.error("discount stacking error: ",t.errors),new Error}).catch(function(){return i._clearStateDiscounts(),i._state.active=e,i._state.discounts[t]=e,i._storeDiscountState(),e.code}):this._state.active&&a[0]===this._state.active.id?(this._storeDiscountState(),Promise.resolve(!1)):(this._state.active=e,this._storeDiscountState(),Promise.resolve(e.code))}},{key:"getActiveDiscount",value:function(){return this._state.active?this._state.active:null}},{key:"getOfferDiscount",value:function(t){return this._state.discounts&&this._state.discounts.hasOwnProperty(t)?this._state.discounts[t]:null}},{key:"calcDiscountValue",value:function(t,s){if(t)switch(t.valueType){case e.DiscountValueType.AMOUNT:return Math.min(100*t.value,s);case e.DiscountValueType.PERCENTAGE:return s*(t.value/100);case e.DiscountValueType.BUYXGETY_FREE:return s;case e.DiscountValueType.BUYXGETY_PERCENTAGE:return s*(t.value/100)}return 0}},{key:"getDiscountValueString",value:function(t){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"{{ amount_no_decimals }}";if(t)switch(t.valueType){case e.DiscountValueType.AMOUNT:return(0,i.formatMoney)(100*t.value,s);case e.DiscountValueType.PERCENTAGE:return t.value+"%";case e.DiscountValueType.BUYXGETY_FREE:return"FREE";case e.DiscountValueType.BUYXGETY_PERCENTAGE:return t.value+"%"}return 0}},{key:"updateCartDiscounts",value:function(t,i){var r=this;if(this.skipCartUpdate)this.skipCartUpdate--;else{this._summary.discountTotal=0,this._summary.lineItems=[],this._summary.subTotal=i.total_price;for(var a=this.getActiveDiscount(),o=[],u=function(s){var u=t[s],l=r.getOfferDiscount(u.uuid);if(null!=l){if(l.id&&o.push(l.id),l.duplicate)return"continue";var c=0;if(l.order)c+=r.calcDiscountValue(l,r._summary.subTotal);else{var m=n.default.getState(u.uuid),h=m.items,y=0,d=1,f=!1;(l.products.length>0&&l.valueType===e.DiscountValueType.BUYXGETY_PERCENTAGE||l.valueType===e.DiscountValueType.BUYXGETY_FREE)&&(f=!0,d=(h=m.items.filter(function(t){for(var e=0;e<l.products.length;e++){var s=l.products[e];if(s.variants&&s.variants.length>0&&-1!==s.variants.indexOf(t.id.toString())){var i=s.quantity||1;if(t.quantity-i<=0)return!1}}return!0})).length);var _=i.items;_.sort(function(t,e){return t.price-e.price});for(var v=0;v<_.length;v++){for(var g=_[v],p=0;p<h.length;p++){var S=h[p];if(g.variant_id.toString()===S.id.toString()){var E=r.calcDiscountValue(l,g.price);if(f){var b=Math.min(g.quantity,d-y);E*=b,y+=b}else{var D=g.quantity;a&&a.stacked&&(D=S.quantity),E*=D}c+=E}}if(y>=d)break}}c>0&&(r._summary.lineItems.push({title:l.summary,value:c}),r._summary.discountTotal+=c)}},l=0;l<t.length;l++)u(l);var c=this._getDiscounts();if(c.length!==o.length||this.forceDiscountUpdate){this.forceDiscountUpdate=!1;for(var m=0;m<c.length;m++){var h=c[m];if(-1===o.indexOf(h.id)){var y=this._getDiscountUuid(h.id);s.debug("removing inactive discount for uuid: "+y,h),delete this._state.discounts[y]}}if(c=this._getDiscounts(),(o=this._getDeDuplicatedDiscountIds(c)).length>1){var d=null;return null!=a&&a.stacked&&(d=a.id),this.api.stackDiscounts(o,d,this._getDiscountOfferItems(o)).then(function(t){if(!t.discount)throw s.error("discount stacking update error: ",t.errors),new Error;r._state.active=t.discount,r._storeDiscountState(),window.location=r.shopifyStore.getDiscountUrl(r._state.active.code,window.location.pathname)}).catch(function(){r._storeDiscountState()}),void this._storeDiscountState()}if(1===o.length){var f=Promise.resolve();return null!=a&&a.stacked&&(f=this.api.deleteStackedDiscount(a.id)),this._state.active=this._state.discounts[this._getDiscountUuid(o[0])],this._storeDiscountState(),void f.then(function(){window.location=r.shopifyStore.getDiscountUrl(r._state.active.code,window.location.pathname)})}null!=a&&a.stacked&&this.api.deleteStackedDiscount(a.id),delete this._state.active,this._storeDiscountState()}this._summary.total=this._summary.subTotal-this._summary.discountTotal,this._renderCartSummary()}}},{key:"_renderCartSummary",value:function(){if(s.debug("discounts lineItems: ",this._summary.lineItems),s.debug("subTotal: "+(0,i.formatMoney)(this._summary.subTotal,this.settings.moneyFormat)),s.debug("discount: "+(0,i.formatMoney)(this._summary.discountTotal,this.settings.moneyFormat)),s.debug("total: "+(0,i.formatMoney)(this._summary.total,this.settings.moneyFormat)),this.settings.summary){if((!this._summaryEl||!this._summarySubtotalEl)&&(this.settings.cart||this.shopifyStore.isCart()||this.shopifyStore.hasCart())){if(!this._summarySubtotalEl){var e=this.settings.moneyFormat.indexOf("{"),r=this.settings.moneyFormat.lastIndexOf("}"),a=this.settings.moneyFormat;-1!==e&&-1!==r&&(a=this.settings.moneyFormat.substring(e,r+1).trim());var n=(0,i.formatMoney)(this._summary.subTotal,a),o=t.default.findElementContainsText('form[action="/cart"] *',n);0===o.length&&(n=(0,i.formatMoney)(this._summary.subTotal,"{{ amount_no_decimals }}"),o=t.default.findElementContainsText('form[action="/cart"] *',n)),this._summarySubtotalEl=o[o.length-1],s.debug("found cart summary subtotal el",this._summarySubtotalEl)}if(this._summarySubtotalEl){if(!this._summaryEl){var u=t.default.findParent(this._summarySubtotalEl,"div");u&&(this._summaryEl=document.createElement("div"),this._summaryEl.classList.add("cl-summary"),this._summaryEl.classList.add(this.settings.summaryAlign),u.appendChild(this._summaryEl),s.debug("found cart summary wrapper el",this._summaryEl))}}else s.warn("discount summary auto placement - no cart subtotal element found")}if(this._summarySubtotalEl&&this._summarySubtotalEl!==this._summaryTotalEl&&(this._summary.total!==this._summary.subTotal?this._summarySubtotalEl.classList.add("cl-subtotal-before"):this._summarySubtotalEl.classList.remove("cl-subtotal-before")),this._summaryTotalEl&&(this._summaryTotalEl.innerHTML=(0,i.formatMoney)(this._summary.total,this.settings.moneyFormat)),this._summaryEl){for(this._summaryLineItemEl||(this._summaryLineItemEl=this._summaryEl.querySelector(this.settings.selectorSummaryLineItem),this._summaryLineItemEl?this._summaryLineItemEl.parentNode.removeChild(this._summaryLineItemEl):(this._summaryLineItemEl=document.createElement("div"),this._summaryLineItemEl.classList.add("cl-summary-discount"),this._summaryLineItemEl.innerHTML='<span><svg aria-hidden="true" focusable="false" role="presentation" class="cl-summary-tag" style="fill:'+this.settings.summaryColor+'"><path d="M10 3a1 1 0 1 1 0-2 1 1 0 0 1 0 2zm0-3H7a1 1 0 0 0-.71.29l-6 6a1 1 0 0 0 0 1.42l4 4a1 1 0 0 0 1.42 0c.19-.2 5.8-5.81 6-6A1 1 0 0 0 12 5V2a2 2 0 0 0-2-2z"></path></svg><span data-cart-discount-title></span></span><span>-<span data-cart-discount-amount></span></span>'),this.settings.summaryColor&&(this._summaryLineItemEl.style.color=this.settings.summaryColor));this._summaryEl.firstChild;)this._summaryEl.removeChild(this._summaryEl.lastChild);if(this._summaryLineItemEl)for(var l=0;l<this._summary.lineItems.length;l++){var c=this._summary.lineItems[l],m=this._summaryLineItemEl.cloneNode(!0),h=m.querySelector(this.settings.selectorSummaryLineItemTitle);h&&(h.innerHTML=c.title);var y=m.querySelector(this.settings.selectorSummaryLineItemAmount);y&&(y.innerHTML=(0,i.formatMoney)(c.value,this.settings.moneyFormat)),this._summaryEl.appendChild(m)}if(this._summary.lineItems.length>0){if(this._summaryEl.classList.remove("cl-hide"),this._summaryEl.classList.add("cl-show"),!this._summaryTotalEl){var d=document.createElement("div");d.classList.add("cl-summary-total"),d.innerHTML=(0,i.formatMoney)(this._summary.total,this.settings.moneyFormat),this._summaryEl.appendChild(d)}}else this._summaryEl.classList.remove("cl-show"),this._summaryEl.classList.add("cl-hide")}this._checkSummaryInDom()}}},{key:"_checkSummaryInDom",value:function(){var t=this;this._summaryEl&&document.body.contains&&setTimeout(function(){document.body.contains(t._summaryEl)||(s.debug("summary element removed from dom - querying the selectors again"),t._querySelectorsEl(),t._renderCartSummary())},2e3)}},{key:"_querySelectorsEl",value:function(){delete this._summaryEl,delete this._summarySubtotalEl,delete this._summaryTotalEl,this.settings.selectorSummary&&(this._summaryEl=document.querySelector(this.settings.selectorSummary)),this.settings.selectorSummarySubtotalBefore&&(this._summarySubtotalEl=document.querySelector(this.settings.selectorSummarySubtotalBefore)),this.settings.selectorSummaryTotal&&(this._summaryTotalEl=document.querySelector(this.settings.selectorSummaryTotal))}},{key:"_checkActiveDiscount",value:function(){if(this._state.active&&this._state.active.code){var t=this.shopifyStore.getDiscountCode();t&&t!==this._state.active.code&&s.debug("current active discount does not match: "+t)}}},{key:"_getDiscounts",value:function(){var t=[];for(var e in this._state.discounts)this._state.discounts.hasOwnProperty(e)&&t.push(this._state.discounts[e]);return t}},{key:"_getDiscountUuid",value:function(t){if(this._state.discounts)for(var e in this._state.discounts)if(this._state.discounts.hasOwnProperty(e)&&this._state.discounts[e].id===t)return e;return null}},{key:"_getDiscountIds",value:function(t){for(var e=[],i=0;i<t.length;i++){var r=t[i];r.id?e.push(r.id):s.warn("found discount without id! not stackable: ",r)}return e}},{key:"_clearStateDiscounts",value:function(){this._state.discounts={}}},{key:"_storeDiscountState",value:function(){window.localStorage&&localStorage.setItem(this.settings.storageKey,JSON.stringify(this._state))}},{key:"_restoreDiscountState",value:function(){if(window.localStorage){var t=localStorage.getItem(this.settings.storageKey);if(t)return JSON.parse(t)}return{}}},{key:"_removeDiscountState",value:function(){window.localStorage&&localStorage.removeItem(this.settings.storageKey)}},{key:"_getDeDuplicatedDiscountIds",value:function(t){t.sort(function(t,e){return e.priority-t.priority});var e=[],s=o.default.getInstance().cache,i=[];if(s)for(var r=0;r<t.length;r++){var a=t[r],u=this._getDiscountUuid(a.id);if(u){var l=n.default.getState(u),c=this._filterOfferItemsInCart(l,s);a.duplicate=!1;for(var m=[],h=0;h<c.length;h++){var y=c[h];if(-1!==i.indexOf(y.id)){a.duplicate=!0;break}m.push(y.id)}a.duplicate||(i.push.apply(i,m),e.push(a.id))}}return e}},{key:"_getDiscountOfferItems",value:function(t){var e=o.default.getInstance().cache,s=[];if(e)for(var i=0;i<t.length;i++){var r=t[i],a=this._getDiscountUuid(r);if(a){var u=n.default.getState(a),l=this._filterOfferItemsInCart(u,e);u.quantity<l.length&&(u.quantity=l.length),s.push.apply(s,m(l))}}return s}},{key:"_filterOfferItemsInCart",value:function(t,e){return t.items?t.items.filter(function(t){for(var s=0;s<e.items.length;s++){if(e.items[s].variant_id.toString()===t.id.toString())return!0}return!1}):[]}}],[{key:"getInstance",value:function(t){return u._instance?u._instance:(u._instance=new u(t),u._instance)}}]),u}(),b=E;exports.default=b;
},{"./util":"zY0S","./const":"QqYi","loglevel":"ohSP","@shopify/theme-currency/currency":"jUSW","./offer-api":"FkkJ","./shopify-store":"cEki","./offer-state":"jVXE","./shopify-cart":"ydp9"}],"xAgl":[function(require,module,exports) {
var define;
var e;!function(n,t){"function"==typeof e&&e.amd?e([],t):"object"==typeof exports?module.exports=t():n.loadjs=t()}(this,function(){var e=function(){},n={},t={},r={};function s(e,n){if(e){var s=r[e];if(t[e]=n,s)for(;s.length;)s[0](e,n),s.splice(0,1)}}function i(n,t){n.call&&(n={success:n}),t.length?(n.error||e)(t):(n.success||e)(n)}function o(n,t,r,s){var i,c,f=document,u=r.async,l=(r.numRetries||0)+1,a=r.before||e,h=n.replace(/[\?|#].*$/,""),p=n.replace(/^(css|img)!/,"");s=s||0,/(^css!|\.css$)/.test(h)?((c=f.createElement("link")).rel="stylesheet",c.href=p,(i="hideFocus"in c)&&c.relList&&(i=0,c.rel="preload",c.as="style")):/(^img!|\.(png|gif|jpg|svg|webp)$)/.test(h)?(c=f.createElement("img")).src=p:((c=f.createElement("script")).src=n,c.async=void 0===u||u),c.onload=c.onerror=c.onbeforeload=function(e){var f=e.type[0];if(i)try{c.sheet.cssText.length||(f="e")}catch(u){18!=u.code&&(f="e")}if("e"==f){if((s+=1)<l)return o(n,t,r,s)}else if("preload"==c.rel&&"style"==c.as)return c.rel="stylesheet";t(n,f,e.defaultPrevented)},!1!==a(n,c)&&f.head.appendChild(c)}function c(e,t,r){var c,f;if(t&&t.trim&&(c=t),f=(c?r:t)||{},c){if(c in n)throw"LoadJS";n[c]=!0}function u(n,t){!function(e,n,t){var r,s,i=(e=e.push?e:[e]).length,c=i,f=[];for(r=function(e,t,r){if("e"==t&&f.push(e),"b"==t){if(!r)return;f.push(e)}--i||n(f)},s=0;s<c;s++)o(e[s],r,t)}(e,function(e){i(f,e),n&&i({success:n,error:t},e),s(c,e)},f)}if(f.returnPromise)return new Promise(u);u()}return c.ready=function(e,n){return function(e,n){e=e.push?e:[e];var s,i,o,c=[],f=e.length,u=f;for(s=function(e,t){t.length&&c.push(e),--u||n(c)};f--;)i=e[f],(o=t[i])?s(i,o):(r[i]=r[i]||[]).push(s)}(e,function(e){i(n,e)}),c},c.done=function(e){s(e,[])},c.reset=function(){n={},t={},r={}},c.isDefined=function(e){return e in n},c});
},{}],"U86w":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=n(require("loadjs"));function n(e){return e&&e.__esModule?e:{default:e}}function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function t(e,n){for(var r=0;r<n.length;r++){var t=n[r];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function u(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}var a=function(){function n(){r(this,n)}return u(n,null,[{key:"load",value:function(n,r){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{async:!0};return t.returnPromise=!0,(0,e.default)(n,r,t)}},{key:"isReady",value:function(n){return Array.isArray(n)||(n=[n]),new Promise(function(r,t){e.default.ready(n,function(){r(n)})})}},{key:"isDefined",value:function(n){return e.default.isDefined(n)}},{key:"loadOnce",value:function(e,r){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{async:!0};return n.isDefined(r)?n.isReady(r):n.load(e,r,t)}}]),n}(),i=a;exports.default=i;
},{"loadjs":"xAgl"}],"P1HH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isDirective=exports.directive=void 0;var e=new WeakMap,t=function(t){return function(){var r=t.apply(void 0,arguments);return e.set(r,!0),r}};exports.directive=t;var r=function(t){return"function"==typeof t&&e.has(t)};exports.isDirective=r;
},{}],"JQ4u":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.removeNodes=exports.reparentNodes=exports.isCEPolyfill=void 0;var e="undefined"!=typeof window&&null!=window.customElements&&void 0!==window.customElements.polyfillWrapFlushCallback;exports.isCEPolyfill=e;var o=function(e,o){for(var l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;o!==l;){var n=o.nextSibling;e.insertBefore(o,r),o=n}};exports.reparentNodes=o;var l=function(e,o){for(var l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;o!==l;){var r=o.nextSibling;e.removeChild(o),o=r}};exports.removeNodes=l;
},{}],"m4zr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.nothing=exports.noChange=void 0;var e={};exports.noChange=e;var o={};exports.nothing=o;
},{}],"kXJ6":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.lastAttributeNameRegex=exports.createMarker=exports.isTemplatePartActive=exports.Template=exports.boundAttributeSuffix=exports.markerRegex=exports.nodeMarker=exports.marker=void 0;var t="{{lit-".concat(String(Math.random()).slice(2),"}}");exports.marker=t;var r="\x3c!--".concat(t,"--\x3e");exports.nodeMarker=r;var a=new RegExp("".concat(t,"|").concat(r));exports.markerRegex=a;var n="$lit$";exports.boundAttributeSuffix=n;var o=function r(o,i){e(this,r),this.parts=[],this.element=i;for(var l=[],c=[],u=document.createTreeWalker(i.content,133,null,!1),d=0,f=-1,v=0,h=o.strings,m=o.values.length;v<m;){var g=u.nextNode();if(null!==g){if(f++,1===g.nodeType){if(g.hasAttributes()){for(var b=g.attributes,T=b.length,A=0,N=0;N<T;N++)s(b[N].name,n)&&A++;for(;A-- >0;){var k=h[v],y=p.exec(k)[2],M=y.toLowerCase()+n,R=g.getAttribute(M);g.removeAttribute(M);var S=R.split(a);this.parts.push({type:"attribute",index:f,name:y,strings:S}),v+=S.length-1}}"TEMPLATE"===g.tagName&&(c.push(g),u.currentNode=g.content)}else if(3===g.nodeType){var w=g.data;if(w.indexOf(t)>=0){for(var C=g.parentNode,E=w.split(a),P=E.length-1,B=0;B<P;B++){var F=void 0,O=E[B];if(""===O)F=x();else{var $=p.exec(O);null!==$&&s($[2],n)&&(O=O.slice(0,$.index)+$[1]+$[2].slice(0,-n.length)+$[3]),F=document.createTextNode(O)}C.insertBefore(F,g),this.parts.push({type:"node",index:++f})}""===E[P]?(C.insertBefore(x(),g),l.push(g)):g.data=E[P],v+=P}}else if(8===g.nodeType)if(g.data===t){var L=g.parentNode;null!==g.previousSibling&&f!==d||(f++,L.insertBefore(x(),g)),d=f,this.parts.push({type:"node",index:f}),null===g.nextSibling?g.data="":(l.push(g),f--),v++}else for(var _=-1;-1!==(_=g.data.indexOf(t,_+1));)this.parts.push({type:"node",index:-1}),v++}else u.currentNode=c.pop()}for(var j=0,W=l;j<W.length;j++){var q=W[j];q.parentNode.removeChild(q)}};exports.Template=o;var s=function(e,t){var r=e.length-t.length;return r>=0&&e.slice(r)===t},i=function(e){return-1!==e.index};exports.isTemplatePartActive=i;var x=function(){return document.createComment("")};exports.createMarker=x;var p=/([ \x09\x0a\x0c\x0d])([^\0-\x1F\x7F-\x9F "'>=/]+)([ \x09\x0a\x0c\x0d]*=[ \x09\x0a\x0c\x0d]*(?:[^ \x09\x0a\x0c\x0d"'`<>=]*|"[^"]*|'[^']*))$/;exports.lastAttributeNameRegex=p;
},{}],"nn5n":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TemplateInstance=void 0;var e=require("./dom.js"),t=require("./template.js");function r(e){return i(e)||o(e)||s(e)||n()}function n(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function i(e){if(Array.isArray(e))return l(e)}function a(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=s(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(l)throw i}}}}function s(e,t){if(e){if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(e,t):void 0}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,t,r){return t&&c(e.prototype,t),r&&c(e,r),e}var p=function(){function n(e,t,r){u(this,n),this.__parts=[],this.template=e,this.processor=t,this.options=r}return f(n,[{key:"update",value:function(e){var t,r=0,n=a(this.__parts);try{for(n.s();!(t=n.n()).done;){var o=t.value;void 0!==o&&o.setValue(e[r]),r++}}catch(u){n.e(u)}finally{n.f()}var i,s=a(this.__parts);try{for(s.s();!(i=s.n()).done;){var l=i.value;void 0!==l&&l.commit()}}catch(u){s.e(u)}finally{s.f()}}},{key:"_clone",value:function(){for(var n,o=e.isCEPolyfill?this.template.element.content.cloneNode(!0):document.importNode(this.template.element.content,!0),i=[],a=this.template.parts,s=document.createTreeWalker(o,133,null,!1),l=0,u=0,c=s.nextNode();l<a.length;)if(n=a[l],(0,t.isTemplatePartActive)(n)){for(;u<n.index;)u++,"TEMPLATE"===c.nodeName&&(i.push(c),s.currentNode=c.content),null===(c=s.nextNode())&&(s.currentNode=i.pop(),c=s.nextNode());if("node"===n.type){var f=this.processor.handleTextExpression(this.options);f.insertAfterNode(c.previousSibling),this.__parts.push(f)}else{var p;(p=this.__parts).push.apply(p,r(this.processor.handleAttributeExpressions(c,n.name,n.strings,this.options)))}l++}else this.__parts.push(void 0),l++;return e.isCEPolyfill&&(document.adoptNode(o),customElements.upgrade(o)),o}}]),n}();exports.TemplateInstance=p;
},{"./dom.js":"JQ4u","./template.js":"kXJ6"}],"SM33":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SVGTemplateResult=exports.TemplateResult=void 0;var t=require("./dom.js"),e=require("./template.js");function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e,r){return(n="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=o(t,e);if(n){var u=Object.getOwnPropertyDescriptor(n,e);return u.get?u.get.call(r):u.value}})(t,e,r||t)}function o(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=a(t)););return t}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}function i(t,e){return(i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=s();return function(){var r,n=a(t);if(e){var o=a(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return f(this,r)}}function f(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?l(t):e}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function y(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function h(t,e,r){return e&&y(t.prototype,e),r&&y(t,r),t}var b=" ".concat(e.marker," "),m=function(){function t(e,r,n,o){p(this,t),this.strings=e,this.values=r,this.type=n,this.processor=o}return h(t,[{key:"getHTML",value:function(){for(var t=this.strings.length-1,r="",n=!1,o=0;o<t;o++){var u=this.strings[o],i=u.lastIndexOf("\x3c!--");n=(i>-1||n)&&-1===u.indexOf("--\x3e",i+1);var c=e.lastAttributeNameRegex.exec(u);r+=null===c?u+(n?b:e.nodeMarker):u.substr(0,c.index)+c[1]+c[2]+e.boundAttributeSuffix+c[3]+e.marker}return r+=this.strings[t]}},{key:"getTemplateElement",value:function(){var t=document.createElement("template");return t.innerHTML=this.getHTML(),t}}]),t}();exports.TemplateResult=m;var v=function(e){u(o,m);var r=c(o);function o(){return p(this,o),r.apply(this,arguments)}return h(o,[{key:"getHTML",value:function(){return"<svg>".concat(n(a(o.prototype),"getHTML",this).call(this),"</svg>")}},{key:"getTemplateElement",value:function(){var e=n(a(o.prototype),"getTemplateElement",this).call(this),r=e.content,u=r.firstChild;return r.removeChild(u),(0,t.reparentNodes)(r,u.firstChild),e}}]),o}();exports.SVGTemplateResult=v;
},{"./dom.js":"JQ4u","./template.js":"kXJ6"}],"PIiJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.EventPart=exports.PropertyPart=exports.PropertyCommitter=exports.BooleanAttributePart=exports.NodePart=exports.AttributePart=exports.AttributeCommitter=exports.isIterable=exports.isPrimitive=void 0;var t=require("./directive.js"),e=require("./dom.js"),n=require("./part.js"),i=require("./template-instance.js"),r=require("./template-result.js"),o=require("./template.js");function a(t,e,n){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=s(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function s(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=p(t)););return t}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=v();return function(){var n,i=p(t);if(e){var r=p(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return h(this,n)}}function h(t,e){return!e||"object"!==N(e)&&"function"!=typeof e?f(t):e}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function v(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function d(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=m(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function m(t,e){if(t){if("string"==typeof t)return y(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(t,e):void 0}}function y(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function _(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function g(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function b(t,e,n){return e&&g(t.prototype,e),n&&g(t,n),t}function N(t){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var x=function(t){return null===t||!("object"===N(t)||"function"==typeof t)};exports.isPrimitive=x;var P=function(t){return Array.isArray(t)||!(!t||!t[Symbol.iterator])};exports.isIterable=P;var V=function(){function t(e,n,i){_(this,t),this.dirty=!0,this.element=e,this.name=n,this.strings=i,this.parts=[];for(var r=0;r<i.length-1;r++)this.parts[r]=this._createPart()}return b(t,[{key:"_createPart",value:function(){return new k(this)}},{key:"_getValue",value:function(){for(var t=this.strings,e=t.length-1,n="",i=0;i<e;i++){n+=t[i];var r=this.parts[i];if(void 0!==r){var o=r.value;if(x(o)||!P(o))n+="string"==typeof o?o:String(o);else{var a,s=d(o);try{for(s.s();!(a=s.n()).done;){var u=a.value;n+="string"==typeof u?u:String(u)}}catch(l){s.e(l)}finally{s.f()}}}}return n+=t[e]}},{key:"commit",value:function(){this.dirty&&(this.dirty=!1,this.element.setAttribute(this.name,this._getValue()))}}]),t}();exports.AttributeCommitter=V;var k=function(){function e(t){_(this,e),this.value=void 0,this.committer=t}return b(e,[{key:"setValue",value:function(e){e===n.noChange||x(e)&&e===this.value||(this.value=e,(0,t.isDirective)(e)||(this.committer.dirty=!0))}},{key:"commit",value:function(){for(;(0,t.isDirective)(this.value);){var e=this.value;this.value=n.noChange,e(this)}this.value!==n.noChange&&this.committer.commit()}}]),e}();exports.AttributePart=k;var w=function(){function a(t){_(this,a),this.value=void 0,this.__pendingValue=void 0,this.options=t}return b(a,[{key:"appendInto",value:function(t){this.startNode=t.appendChild((0,o.createMarker)()),this.endNode=t.appendChild((0,o.createMarker)())}},{key:"insertAfterNode",value:function(t){this.startNode=t,this.endNode=t.nextSibling}},{key:"appendIntoPart",value:function(t){t.__insert(this.startNode=(0,o.createMarker)()),t.__insert(this.endNode=(0,o.createMarker)())}},{key:"insertAfterPart",value:function(t){t.__insert(this.startNode=(0,o.createMarker)()),this.endNode=t.endNode,t.endNode=this.startNode}},{key:"setValue",value:function(t){this.__pendingValue=t}},{key:"commit",value:function(){if(null!==this.startNode.parentNode){for(;(0,t.isDirective)(this.__pendingValue);){var e=this.__pendingValue;this.__pendingValue=n.noChange,e(this)}var i=this.__pendingValue;i!==n.noChange&&(x(i)?i!==this.value&&this.__commitText(i):i instanceof r.TemplateResult?this.__commitTemplateResult(i):i instanceof Node?this.__commitNode(i):P(i)?this.__commitIterable(i):i===n.nothing?(this.value=n.nothing,this.clear()):this.__commitText(i))}}},{key:"__insert",value:function(t){this.endNode.parentNode.insertBefore(t,this.endNode)}},{key:"__commitNode",value:function(t){this.value!==t&&(this.clear(),this.__insert(t),this.value=t)}},{key:"__commitText",value:function(t){var e=this.startNode.nextSibling,n="string"==typeof(t=null==t?"":t)?t:String(t);e===this.endNode.previousSibling&&3===e.nodeType?e.data=n:this.__commitNode(document.createTextNode(n)),this.value=t}},{key:"__commitTemplateResult",value:function(t){var e=this.options.templateFactory(t);if(this.value instanceof i.TemplateInstance&&this.value.template===e)this.value.update(t.values);else{var n=new i.TemplateInstance(e,t.processor,this.options),r=n._clone();n.update(t.values),this.__commitNode(r),this.value=n}}},{key:"__commitIterable",value:function(t){Array.isArray(this.value)||(this.value=[],this.clear());var e,n,i=this.value,r=0,o=d(t);try{for(o.s();!(n=o.n()).done;){var s=n.value;void 0===(e=i[r])&&(e=new a(this.options),i.push(e),0===r?e.appendIntoPart(this):e.insertAfterPart(i[r-1])),e.setValue(s),e.commit(),r++}}catch(u){o.e(u)}finally{o.f()}r<i.length&&(i.length=r,this.clear(e&&e.endNode))}},{key:"clear",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.startNode;(0,e.removeNodes)(this.startNode.parentNode,t.nextSibling,this.endNode)}}]),a}();exports.NodePart=w;var A=function(){function e(t,n,i){if(_(this,e),this.value=void 0,this.__pendingValue=void 0,2!==i.length||""!==i[0]||""!==i[1])throw new Error("Boolean attributes can only contain a single expression");this.element=t,this.name=n,this.strings=i}return b(e,[{key:"setValue",value:function(t){this.__pendingValue=t}},{key:"commit",value:function(){for(;(0,t.isDirective)(this.__pendingValue);){var e=this.__pendingValue;this.__pendingValue=n.noChange,e(this)}if(this.__pendingValue!==n.noChange){var i=!!this.__pendingValue;this.value!==i&&(i?this.element.setAttribute(this.name,""):this.element.removeAttribute(this.name),this.value=i),this.__pendingValue=n.noChange}}}]),e}();exports.BooleanAttributePart=A;var C=function(t){u(n,V);var e=c(n);function n(t,i,r){var o;return _(this,n),(o=e.call(this,t,i,r)).single=2===r.length&&""===r[0]&&""===r[1],o}return b(n,[{key:"_createPart",value:function(){return new S(this)}},{key:"_getValue",value:function(){return this.single?this.parts[0].value:a(p(n.prototype),"_getValue",this).call(this)}},{key:"commit",value:function(){this.dirty&&(this.dirty=!1,this.element[this.name]=this._getValue())}}]),n}();exports.PropertyCommitter=C;var S=function(t){u(n,k);var e=c(n);function n(){return _(this,n),e.apply(this,arguments)}return n}();exports.PropertyPart=S;var j=!1;!function(){try{var t={get capture(){return j=!0,!1}};window.addEventListener("test",t,t),window.removeEventListener("test",t,t)}catch(e){}}();var E=function(){function e(t,n,i){var r=this;_(this,e),this.value=void 0,this.__pendingValue=void 0,this.element=t,this.eventName=n,this.eventContext=i,this.__boundHandleEvent=function(t){return r.handleEvent(t)}}return b(e,[{key:"setValue",value:function(t){this.__pendingValue=t}},{key:"commit",value:function(){for(;(0,t.isDirective)(this.__pendingValue);){var e=this.__pendingValue;this.__pendingValue=n.noChange,e(this)}if(this.__pendingValue!==n.noChange){var i=this.__pendingValue,r=this.value,o=null==i||null!=r&&(i.capture!==r.capture||i.once!==r.once||i.passive!==r.passive),a=null!=i&&(null==r||o);o&&this.element.removeEventListener(this.eventName,this.__boundHandleEvent,this.__options),a&&(this.__options=O(i),this.element.addEventListener(this.eventName,this.__boundHandleEvent,this.__options)),this.value=i,this.__pendingValue=n.noChange}}},{key:"handleEvent",value:function(t){"function"==typeof this.value?this.value.call(this.eventContext||this.element,t):this.value.handleEvent(t)}}]),e}();exports.EventPart=E;var O=function(t){return t&&(j?{capture:t.capture,passive:t.passive,once:t.once}:t.capture)};
},{"./directive.js":"P1HH","./dom.js":"JQ4u","./part.js":"m4zr","./template-instance.js":"nn5n","./template-result.js":"SM33","./template.js":"kXJ6"}],"mAZn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.defaultTemplateProcessor=exports.DefaultTemplateProcessor=void 0;var e=require("./parts.js");function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function n(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}var o=function(){function r(){t(this,r)}return n(r,[{key:"handleAttributeExpressions",value:function(t,r,n,o){var a=r[0];return"."===a?new e.PropertyCommitter(t,r.slice(1),n).parts:"@"===a?[new e.EventPart(t,r.slice(1),o.eventContext)]:"?"===a?[new e.BooleanAttributePart(t,r.slice(1),n)]:new e.AttributeCommitter(t,r,n).parts}},{key:"handleTextExpression",value:function(t){return new e.NodePart(t)}}]),r}();exports.DefaultTemplateProcessor=o;var a=new o;exports.defaultTemplateProcessor=a;
},{"./parts.js":"PIiJ"}],"K8aL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.templateFactory=t,exports.templateCaches=void 0;var e=require("./template.js");function t(t){var s=r.get(t.type);void 0===s&&(s={stringsArray:new WeakMap,keyString:new Map},r.set(t.type,s));var a=s.stringsArray.get(t.strings);if(void 0!==a)return a;var n=t.strings.join(e.marker);return void 0===(a=s.keyString.get(n))&&(a=new e.Template(t,t.getTemplateElement()),s.keyString.set(n,a)),s.stringsArray.set(t.strings,a),a}var r=new Map;exports.templateCaches=r;
},{"./template.js":"kXJ6"}],"dvwX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.render=exports.parts=void 0;var e=require("./dom.js"),r=require("./parts.js"),t=require("./template-factory.js"),s=new WeakMap;exports.parts=s;var a=function(a,o,p){var i=s.get(o);void 0===i&&((0,e.removeNodes)(o,o.firstChild),s.set(o,i=new r.NodePart(Object.assign({templateFactory:t.templateFactory},p))),i.appendInto(o)),i.setValue(a),i.commit()};exports.render=a;
},{"./dom.js":"JQ4u","./parts.js":"PIiJ","./template-factory.js":"K8aL"}],"KMqM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"DefaultTemplateProcessor",{enumerable:!0,get:function(){return e.DefaultTemplateProcessor}}),Object.defineProperty(exports,"defaultTemplateProcessor",{enumerable:!0,get:function(){return e.defaultTemplateProcessor}}),Object.defineProperty(exports,"SVGTemplateResult",{enumerable:!0,get:function(){return t.SVGTemplateResult}}),Object.defineProperty(exports,"TemplateResult",{enumerable:!0,get:function(){return t.TemplateResult}}),Object.defineProperty(exports,"directive",{enumerable:!0,get:function(){return r.directive}}),Object.defineProperty(exports,"isDirective",{enumerable:!0,get:function(){return r.isDirective}}),Object.defineProperty(exports,"removeNodes",{enumerable:!0,get:function(){return n.removeNodes}}),Object.defineProperty(exports,"reparentNodes",{enumerable:!0,get:function(){return n.reparentNodes}}),Object.defineProperty(exports,"noChange",{enumerable:!0,get:function(){return o.noChange}}),Object.defineProperty(exports,"nothing",{enumerable:!0,get:function(){return o.nothing}}),Object.defineProperty(exports,"AttributeCommitter",{enumerable:!0,get:function(){return i.AttributeCommitter}}),Object.defineProperty(exports,"AttributePart",{enumerable:!0,get:function(){return i.AttributePart}}),Object.defineProperty(exports,"BooleanAttributePart",{enumerable:!0,get:function(){return i.BooleanAttributePart}}),Object.defineProperty(exports,"EventPart",{enumerable:!0,get:function(){return i.EventPart}}),Object.defineProperty(exports,"isIterable",{enumerable:!0,get:function(){return i.isIterable}}),Object.defineProperty(exports,"isPrimitive",{enumerable:!0,get:function(){return i.isPrimitive}}),Object.defineProperty(exports,"NodePart",{enumerable:!0,get:function(){return i.NodePart}}),Object.defineProperty(exports,"PropertyCommitter",{enumerable:!0,get:function(){return i.PropertyCommitter}}),Object.defineProperty(exports,"PropertyPart",{enumerable:!0,get:function(){return i.PropertyPart}}),Object.defineProperty(exports,"parts",{enumerable:!0,get:function(){return u.parts}}),Object.defineProperty(exports,"render",{enumerable:!0,get:function(){return u.render}}),Object.defineProperty(exports,"templateCaches",{enumerable:!0,get:function(){return a.templateCaches}}),Object.defineProperty(exports,"templateFactory",{enumerable:!0,get:function(){return a.templateFactory}}),Object.defineProperty(exports,"TemplateInstance",{enumerable:!0,get:function(){return p.TemplateInstance}}),Object.defineProperty(exports,"createMarker",{enumerable:!0,get:function(){return s.createMarker}}),Object.defineProperty(exports,"isTemplatePartActive",{enumerable:!0,get:function(){return s.isTemplatePartActive}}),Object.defineProperty(exports,"Template",{enumerable:!0,get:function(){return s.Template}}),exports.svg=exports.html=void 0;var e=require("./lib/default-template-processor.js"),t=require("./lib/template-result.js"),r=require("./lib/directive.js"),n=require("./lib/dom.js"),o=require("./lib/part.js"),i=require("./lib/parts.js"),u=require("./lib/render.js"),a=require("./lib/template-factory.js"),p=require("./lib/template-instance.js"),s=require("./lib/template.js");"undefined"!=typeof window&&(window.litHtmlVersions||(window.litHtmlVersions=[])).push("1.2.1");var l=function(r){for(var n=arguments.length,o=new Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];return new t.TemplateResult(r,o,"html",e.defaultTemplateProcessor)};exports.html=l;var c=function(r){for(var n=arguments.length,o=new Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];return new t.SVGTemplateResult(r,o,"svg",e.defaultTemplateProcessor)};exports.svg=c;
},{"./lib/default-template-processor.js":"mAZn","./lib/template-result.js":"SM33","./lib/directive.js":"P1HH","./lib/dom.js":"JQ4u","./lib/part.js":"m4zr","./lib/parts.js":"PIiJ","./lib/render.js":"dvwX","./lib/template-factory.js":"K8aL","./lib/template-instance.js":"nn5n","./lib/template.js":"kXJ6"}],"jBp4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.repeat=void 0;var e=require("../lit-html.js");function r(e,r){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=t(e))||r&&e&&"number"==typeof e.length){n&&(e=n);var o=0,a=function(){};return{s:a,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,f=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return l=e.done,e},e:function(e){f=!0,i=e},f:function(){try{l||null==n.return||n.return()}finally{if(f)throw i}}}}function t(e,r){if(e){if("string"==typeof e)return n(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?n(e,r):void 0}}function n(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var o=function(r,t){var n=r.startNode.parentNode,o=void 0===t?r.endNode:t.startNode,a=n.insertBefore((0,e.createMarker)(),o);n.insertBefore((0,e.createMarker)(),o);var i=new e.NodePart(r.options);return i.insertAfterNode(a),i},a=function(e,r){return e.setValue(r),e.commit(),e},i=function(r,t,n){var o=r.startNode.parentNode,a=n?n.startNode:r.endNode,i=t.endNode.nextSibling;i!==a&&(0,e.reparentNodes)(o,t.startNode,i,a)},l=function(r){(0,e.removeNodes)(r.startNode.parentNode,r.startNode,r.endNode.nextSibling)},f=function(e,r,t){for(var n=new Map,o=r;o<=t;o++)n.set(e[o],o);return n},u=new WeakMap,s=new WeakMap,d=(0,e.directive)(function(t,n,d){var c;return void 0===d?d=n:void 0!==n&&(c=n),function(n){if(!(n instanceof e.NodePart))throw new Error("repeat can only be used in text bindings");var v,p,y,N=u.get(n)||[],b=s.get(n)||[],h=[],m=[],g=[],w=0,S=r(t);try{for(S.s();!(v=S.n()).done;){var x=v.value;g[w]=c?c(x,w):w,m[w]=d(x,w),w++}}catch(W){S.e(W)}finally{S.f()}for(var A=0,M=N.length-1,j=0,k=m.length-1;A<=M&&j<=k;)if(null===N[A])A++;else if(null===N[M])M--;else if(b[A]===g[j])h[j]=a(N[A],m[j]),A++,j++;else if(b[M]===g[k])h[k]=a(N[M],m[k]),M--,k--;else if(b[A]===g[k])h[k]=a(N[A],m[k]),i(n,N[A],h[k+1]),A++,k--;else if(b[M]===g[j])h[j]=a(N[M],m[j]),i(n,N[M],N[A]),M--,j++;else if(void 0===p&&(p=f(g,j,k),y=f(b,A,M)),p.has(b[A]))if(p.has(b[M])){var I=y.get(g[j]),O=void 0!==I?N[I]:null;if(null===O){var P=o(n,N[A]);a(P,m[j]),h[j]=P}else h[j]=a(O,m[j]),i(n,O,N[A]),N[I]=null;j++}else l(N[M]),M--;else l(N[A]),A++;for(;j<=k;){var B=o(n,h[k+1]);a(B,m[j]),h[j++]=B}for(;A<=M;){var E=N[A++];null!==E&&l(E)}u.set(n,h),s.set(n,g)}});exports.repeat=d;
},{"../lit-html.js":"KMqM"}],"zFN9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.classMap=void 0;var t=require("../lit-html.js");function e(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=n(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var a=0,i=function(){};return{s:i,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,c=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return s=t.done,t},e:function(t){c=!0,o=t},f:function(){try{s||null==r.return||r.return()}finally{if(c)throw o}}}}function n(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}var s=function(){function t(n){a(this,t),this.classes=new Set,this.changed=!1,this.element=n;var r,i=e((n.getAttribute("class")||"").split(/\s+/));try{for(i.s();!(r=i.n()).done;){var o=r.value;this.classes.add(o)}}catch(s){i.e(s)}finally{i.f()}}return o(t,[{key:"add",value:function(t){this.classes.add(t),this.changed=!0}},{key:"remove",value:function(t){this.classes.delete(t),this.changed=!0}},{key:"commit",value:function(){if(this.changed){var t="";this.classes.forEach(function(e){return t+=e+" "}),this.element.setAttribute("class",t)}}}]),t}(),c=new WeakMap,u=(0,t.directive)(function(e){return function(n){if(!(n instanceof t.AttributePart)||n instanceof t.PropertyPart||"class"!==n.committer.name||n.committer.parts.length>1)throw new Error("The `classMap` directive must be used in the `class` attribute and must be the only part in the attribute.");var r=n.committer,a=r.element,i=c.get(n);void 0===i&&(a.setAttribute("class",r.strings.join(" ")),c.set(n,i=new Set));var o=a.classList||new s(a);for(var u in i.forEach(function(t){t in e||(o.remove(t),i.delete(t))}),e){var l=e[u];l!=i.has(u)&&(l?(o.add(u),i.add(u)):(o.remove(u),i.delete(u)))}"function"==typeof o.commit&&o.commit()}});exports.classMap=u;
},{"../lit-html.js":"KMqM"}],"spbt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("lit-html"),r=require("lit-html/directives/repeat"),t=require("lit-html/directives/class-map");function n(){var e=u(["\n        <div class=",">\n           ","\n        </div>\n    "]);return n=function(){return e},e}function i(){var e=u(['\n<div class="cl-grid __no_padding">\n    <div class="row">\n    ',"\n    </div>\n</div>\n"]);return i=function(){return e},e}function u(e,r){return r||(r=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(r)}}))}var c=function(u,c,l){return(0,e.html)(i(),(0,r.repeat)(u,function(r,i){return(0,e.html)(n(),(0,t.classMap)(l),r)}))},l=c;exports.default=l;
},{"lit-html":"KMqM","lit-html/directives/repeat":"jBp4","lit-html/directives/class-map":"zFN9"}],"AGMv":[function(require,module,exports) {

},{}],"uuSc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=l(require("loglevel")),t=o(require("./resource-loader")),r=o(require("./util")),n=require("lit-html"),i=o(require("./template/layout-grid.template"));function o(e){return e&&e.__esModule?e:{default:e}}function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function l(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=n?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,t&&t.set(e,r),r}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&c(e.prototype,t),r&&c(e,r),e}require("./lib/flexboxgrid/cl-grid.min.css");var f=function(){function e(t){u(this,e);this.settings=r.default.extend({assets:"https://assets.cloudlift.app",productsEl:null,selector:null,config:{columns:0}},t||{}),r.default.isElement(this.settings.selector)?this.element=this.settings.selector:this.element=document.querySelector(this.settings.selector)}return a(e,[{key:"render",value:function(){var e={},t=this.settings.config.columns;0===t&&(t=this.settings.productsEl.length);var r=Math.round(12/t);r<12&&(e["col-sm-"+r]=!0),e["col-xs-12"]=!0,(0,n.render)((0,i.default)(this.settings.productsEl,this.settings.config,e),this.element)}},{key:"destroy",value:function(){}}]),e}(),d=f;exports.default=d;
},{"loglevel":"ohSP","./resource-loader":"U86w","./util":"zY0S","lit-html":"KMqM","./template/layout-grid.template":"spbt","./lib/flexboxgrid/cl-grid.min.css":"AGMv"}],"aSN8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("lit-html"),r=require("lit-html/directives/repeat"),t=require("lit-html/directives/class-map");function i(){var e=n(['\n        <li class="glide__slide">',"</li>\n     "]);return i=function(){return e},e}function l(){var e=n(['\n<div class="cl-slider glide">\n  <div class="glide__track" data-glide-el="track">\n    <ul class="glide__slides">\n     ','\n    </ul>\n  </div>\n  <div class="glide__arrows" data-glide-el="controls">\n    <button class="glide__arrow glide__arrow--left" data-glide-dir="<"></button>\n    <button class="glide__arrow glide__arrow--right" data-glide-dir=">"></button>\n  </div>\n</div>\n']);return l=function(){return e},e}function n(e,r){return r||(r=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(r)}}))}var d=function(t,n){return(0,e.html)(l(),(0,r.repeat)(t,function(r,t){return(0,e.html)(i(),r)}))},a=d;exports.default=a;
},{"lit-html":"KMqM","lit-html/directives/repeat":"jBp4","lit-html/directives/class-map":"zFN9"}],"IJf5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=o(require("loglevel")),t=n(require("./resource-loader")),s=n(require("./util")),r=require("lit-html"),i=n(require("./template/layout-slider.template"));function n(e){return e&&e.__esModule?e:{default:e}}function l(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return l=function(){return e},e}function o(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=l();if(t&&t.has(e))return t.get(e);var s={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var n=r?Object.getOwnPropertyDescriptor(e,i):null;n&&(n.get||n.set)?Object.defineProperty(s,i,n):s[i]=e[i]}return s.default=e,t&&t.set(e,s),s}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var s=0;s<t.length;s++){var r=t[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t,s){return t&&a(e.prototype,t),s&&a(e,s),e}var f=function(){function e(r){u(this,e);this.settings=s.default.extend({assets:"https://assets.cloudlift.app",productsEl:null,selector:null,config:{slides:1}},r||{}),s.default.isElement(this.settings.selector)?this.element=this.settings.selector:this.element=document.querySelector(this.settings.selector),this.resourceId="offer-slider",this.resources=[this.settings.assets+"/static/lib/glide/glide.full.min.css",this.settings.assets+"/static/lib/glide/glide.min.js"],this.ready=t.default.loadOnce(this.resources,this.resourceId,{async:!1})}return c(e,[{key:"render",value:function(){(0,r.render)((0,i.default)(this.settings.productsEl,this.settings.config),this.element);var e=this.element.querySelector(".glide"),t={type:"slider",perView:this.settings.config.slides};this.settings.config.slides>1&&(t.breakpoints={},t.breakpoints[576]={perView:1},this.settings.config.slides>2&&(t.breakpoints[768]={perView:2})),this._slider=new Glide(e,t).mount()}},{key:"destroy",value:function(){this._slider&&this._slider.destroy()}}]),e}(),d=f;exports.default=d;
},{"loglevel":"ohSP","./resource-loader":"U86w","./util":"zY0S","lit-html":"KMqM","./template/layout-slider.template":"aSN8"}],"XmfE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("lit-html");function n(){var e=r(['\n<div class="ldcv ','" >\n    <div class="base ','">\n        <div class="inner card">\n            ',"\n        </div>\n    </div>\n</div>\n"]);return n=function(){return e},e}function r(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}var t=function(r,t,i){return(0,e.html)(n(),t.animationClass,t.className,r)},i=t;exports.default=i;
},{"lit-html":"KMqM"}],"PAkP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=a(require("loglevel")),t=o(require("./resource-loader")),n=o(require("./util")),i=require("lit-html"),s=o(require("./template/display-modal.template"));function o(e){return e&&e.__esModule?e:{default:e}}function l(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return l=function(){return e},e}function a(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=l();if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){var o=i?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(n,s,o):n[s]=e[s]}return n.default=e,t&&t.set(e,n),n}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function d(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e}var u=function(){function e(i){r(this,e);if(this.settings=n.default.extend({assets:"https://assets.cloudlift.app",contentEl:null,onClose:null,closable:!0,config:{animation:"fade",maxWidth:null,className:""}},i||{}),this.settings.config.animation&&!this.settings.config.animationClass){this.settings.config.animationClass={fade:"ldcv-fade",spin:"ldcv-vortex",slide:"ldcv-slide-btt",scale:"ldcv-scale"}[this.settings.config.animation]}if(this.resourceId="offer-modal",this.resources=[this.settings.assets+"/static/lib/ldcover/ldcv.full.min.css",this.settings.assets+"/static/lib/ldcover/ldcv.min.js"],this.ready=t.default.loadOnce(this.resources,this.resourceId,{async:!1}),this.settings.config.maxWidth&&-1!==this.settings.config.maxWidth.indexOf("px")){var s=parseInt(this.settings.config.maxWidth),o=s>800?s-200:s,l="\n                @media only screen and (min-width: 768px) {\n                     .".concat(this.settings.config.className," {\n                            width:").concat(o,"px;\n                     }\n                }\n                @media only screen and (min-width: 1024px) {\n                    .").concat(this.settings.config.className," {\n                        width:").concat(s,"px;\n                    }\n                }");n.default.addStyleElement(l)}}return d(e,[{key:"show",value:function(){var e=this;this._modalEl=document.createElement("div"),(0,i.render)((0,s.default)(this.settings.contentEl,this.settings.config),this._modalEl),document.body.appendChild(this._modalEl),this._modal=new ldCover({root:this._modalEl.querySelector(".ldcv"),lock:!this.settings.closable}),this._modal.toggle(),this._modal.get().then(function(){e.settings.onClose&&e.settings.onClose()})}},{key:"hide",value:function(){this._modal&&this._modal.set(!1,!0)}},{key:"isVisible",value:function(){return!0}},{key:"destroy",value:function(){document.body.removeChild(this._modalEl)}}]),e}();u.resources=["/lib/ldcover/ldcv.min.css","/lib/ldcover/ldcv.effects.min.css","/lib/ldcover/ldcv.js"];var f=u;exports.default=f;
},{"loglevel":"ohSP","./resource-loader":"U86w","./util":"zY0S","lit-html":"KMqM","./template/display-modal.template":"XmfE"}],"Cl6E":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=i(require("loglevel")),t=n(require("./util"));function n(e){return e&&e.__esModule?e:{default:e}}function o(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return o=function(){return e},e}function i(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=o();if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var s=i?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(n,r,s):n[r]=e[r]}return n.default=e,t&&t.set(e,n),n}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function l(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}var a=function(){function n(e){r(this,n);if(this.settings=t.default.extend({assets:"https://assets.cloudlift.app",contentEl:null,selector:"body",config:{position:"afterbegin"}},e||{}),"$content_box"===this.settings.selector){var o="cl-box-"+Math.floor(1e4*Math.random());this.settings.selector="#"+o,Shopify.Checkout.OrderStatus.addContentBox('<div id="'+o+'"></div>'),this._contentBox=!0}}return l(n,[{key:"show",value:function(){this._contentEl=this.settings.contentEl,this.element||(t.default.isElement(this.settings.selector)?this.element=this.settings.selector:this.element=document.querySelector(this.settings.selector)),this.element?this.element.insertAdjacentElement(this.settings.config.position,this._contentEl):e.warn("offer display no element for selector: ",this.settings.selector)}},{key:"hide",value:function(){this._removeContent()}},{key:"destroy",value:function(){this._removeContent()}},{key:"isVisible",value:function(){return!!(this.element&&this.element.parentNode&&t.default.isInPage(this.element))||(delete this.element,!1)}},{key:"_removeContent",value:function(){if(this._contentEl&&(this._contentEl.parentNode&&this._contentEl.parentNode.removeChild(this._contentEl),delete this._contentEl,this._contentBox)){var e=t.default.findParent(this.element,".content-box");e&&e.parentNode.removeChild(e)}}}]),n}(),u=a;exports.default=u;
},{"loglevel":"ohSP","./util":"zY0S"}],"gBF5":[function(require,module,exports) {
"use strict";function e(){this.entries=[]}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e,e.prototype.add=function(e,t,n){this.entries.push({element:e,event:t,fn:n}),e.addEventListener(t,n)},e.prototype.removeAll=function(){this.entries=this.entries.filter(function(e){return e.element.removeEventListener(e.event,e.fn),!1})};
},{}],"Tkp7":[function(require,module,exports) {
"use strict";function r(r){return fetch("/products/"+r+".js").then(function(r){return r.json()})}function t(r,t){if(i(r),"number"!=typeof t)throw new TypeError(t+" is not a Number.");return r.variants.filter(function(r){return r.id===t})[0]||null}function n(r,t){return i(r),e(r,o(r,t))}function e(r,t){return i(r),u(t),r.variants.filter(function(r){return t.every(function(t,n){return r.options[n]===t})})[0]||null}function o(r,t){i(r),a(t);var n=[];return t.forEach(function(t){for(var e=0;e<r.options.length;e++)if(r.options[e].name.toLowerCase()===t.name.toLowerCase()){n[e]=t.value;break}}),n}function i(r){if("object"!=typeof r)throw new TypeError(r+" is not an object.");if(0===Object.keys(r).length&&r.constructor===Object)throw new Error(r+" is empty.")}function a(r){if(!Array.isArray(r))throw new TypeError(r+" is not an array.");if(0===r.length)return[];if(!r[0].hasOwnProperty("name"))throw new Error(r[0]+"does not contain name key.");if("string"!=typeof r[0].name)throw new TypeError("Invalid value type passed for name of option "+r[0].name+". Value should be string.")}function u(r){if(Array.isArray(r)&&"object"==typeof r[0])throw new Error(r+"is not a valid array of options.")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.getProductJson=r,exports.getVariantFromId=t,exports.getVariantFromSerializedArray=n,exports.getVariantFromOptionArray=e;
},{}],"ksyH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getUrlWithVariant=o,exports.ProductForm=i;var t=n(require("./listeners")),e=require("@shopify/theme-product");function n(t){return t&&t.__esModule?t:{default:t}}var r={idInput:'[name="id"]',optionInput:'[name^="options"]',quantityInput:'[name="quantity"]',propertyInput:'[name^="properties"]'};function o(t,e){return/variant=/.test(t)?t.replace(/(variant=)[^&]+/,"$1"+e):/\?/.test(t)?t.concat("&variant=").concat(e):t.concat("?variant=").concat(e)}function i(e,n,o){this.element=e,this.product=s(n),o=o||{},this._listeners=new t.default,this._listeners.add(this.element,"submit",this._onSubmit.bind(this,o)),this.optionInputs=this._initInputs(r.optionInput,o.onOptionChange),this.quantityInputs=this._initInputs(r.quantityInput,o.onQuantityChange),this.propertyInputs=this._initInputs(r.propertyInput,o.onPropertyChange)}function u(t,e){return t.reduce(function(t,n){return(n.checked||"radio"!==n.type&&"checkbox"!==n.type)&&t.push(e({name:n.name,value:n.value})),t},[])}function p(t,e){return t.reduce(function(t,n){return(n.checked||"radio"!==n.type&&"checkbox"!==n.type)&&(t[e(n.name)]=n.value),t},{})}function s(t){if("object"!=typeof t)throw new TypeError(t+" is not an object.");if(void 0===t.variants[0].options)throw new TypeError("Product object is invalid. Make sure you use the product object that is output from {{ product | json }} or from the http://[your-product-url].js route");return t}i.prototype.destroy=function(){this._listeners.removeAll()},i.prototype.options=function(){return u(this.optionInputs,function(t){return t.name=/(?:^(options\[))(.*?)(?:\])/.exec(t.name)[2],t})},i.prototype.variant=function(){return(0,e.getVariantFromSerializedArray)(this.product,this.options())},i.prototype.properties=function(){var t=p(this.propertyInputs,function(t){return/(?:^(properties\[))(.*?)(?:\])/.exec(t)[2]});return 0===Object.entries(t).length?null:t},i.prototype.quantity=function(){return this.quantityInputs[0]?Number.parseInt(this.quantityInputs[0].value,10):1},i.prototype._setIdInputValue=function(t){var e=this.element.querySelector(r.idInput);e||((e=document.createElement("input")).type="hidden",e.name="id",this.element.appendChild(e)),e.value=t.toString()},i.prototype._onSubmit=function(t,e){e.dataset=this._getProductFormEventData(),this._setIdInputValue(e.dataset.variant.id),t.onFormSubmit&&t.onFormSubmit(e)},i.prototype._onFormEvent=function(t){return void 0===t?Function.prototype:function(e){e.dataset=this._getProductFormEventData(),t(e)}.bind(this)},i.prototype._initInputs=function(t,e){return Array.prototype.slice.call(this.element.querySelectorAll(t)).map(function(t){return this._listeners.add(t,"change",this._onFormEvent(e)),t}.bind(this))},i.prototype._getProductFormEventData=function(){return{options:this.options(),variant:this.variant(),properties:this.properties(),quantity:this.quantity()}};
},{"./listeners":"gBF5","@shopify/theme-product":"Tkp7"}],"s8ky":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.formatMoney=a;var e="${{amount}}";function a(a,t){"string"==typeof a&&(a=a.replace(".",""));var r="",o=/\{\{\s*(\w+)\s*\}\}/,n=t||e;function s(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:",",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:".";if(isNaN(e)||null==e)return 0;var o=(e=(e/100).toFixed(a)).split(".");return o[0].replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1"+t)+(o[1]?r+o[1]:"")}switch(n.match(o)[1]){case"amount":r=s(a,2);break;case"amount_no_decimals":r=s(a,0);break;case"amount_with_comma_separator":r=s(a,2,".",",");break;case"amount_no_decimals_with_comma_separator":r=s(a,0,".",",")}return n.replace(o,r)}
},{}],"npm8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n=require("lit-html"),t=require("lit-html/directives/class-map");function r(){var n=z(['<div class="col-xs-5 col-md"><span data-product-title></span></div>']);return r=function(){return n},n}function i(){var n=z(["",""]);return i=function(){return n},n}function u(){var n=z(['<div class="col-xs-5 col-md"><a data-product-link><span data-product-title></span></a></div>']);return u=function(){return n},n}function c(){var n=z(["<img data-product-img />"]);return c=function(){return n},n}function a(){var n=z(["<a data-product-link><img data-product-img /></a>"]);return a=function(){return n},n}function l(){var n=z(['\n            <div class="cl-product-img col-xs-2">\n                 ',"\n           </div>"]);return l=function(){return n},n}function d(){var n=z(['<div class="col-xs-12" data-product-offer></div>']);return d=function(){return n},n}function o(){var n=z(['\n     <div class="cl-product cl-grid __row ','">\n        <div class="row">\n            ',"\n            \n            ","\n            \n            ",'\n            \n            <div class="col-xs col-sm-6 col-md" data-product-options></div> \n            \n            <div class="col-xs-5 col-md-4" data-product-price></div>\n                     \n            <div class="col-xs col-md-2" data-product-button></div>\n            \n            ',"\n        </div>\n    </div>\n"]);return o=function(){return n},n}function e(){var n=z(["<div data-product-offer></div>"]);return e=function(){return n},n}function s(){var n=z(["<span data-product-title></span>"]);return s=function(){return n},n}function v(){var n=z(["",""]);return v=function(){return n},n}function p(){var n=z(["<a data-product-link><span data-product-title></span></a>"]);return p=function(){return n},n}function f(){var n=z(["<img data-product-img />"]);return f=function(){return n},n}function m(){var n=z(["<a data-product-link><img data-product-img /></a>"]);return m=function(){return n},n}function h(){var n=z(['\n            <div class="cl-product-img col-xs-12 col-sm">\n                 ',"\n            </div>\n             "]);return h=function(){return n},n}function g(){var n=z(['\n     <div class="cl-product cl-grid __col ','">\n        <div class="row">\n            ','\n            <div class="cl-product-detail col-xs-12 col-sm">\n                 ',"\n                 \n                 ","\n                 \n                 <div data-product-options></div>\n        \n                 <div data-product-price></div>\n                 \n                 <div data-product-button></div>\n            </div>\n            \n            ","\n        </div>\n    </div>\n"]);return g=function(){return n},n}function x(){var n=z(["<div data-product-offer></div>"]);return x=function(){return n},n}function b(){var n=z(["<span data-product-title></span>"]);return b=function(){return n},n}function k(){var n=z(["",""]);return k=function(){return n},n}function M(){var n=z(["<a data-product-link><span data-product-title></span></a>"]);return M=function(){return n},n}function _(){var n=z(["<img data-product-img />"]);return _=function(){return n},n}function w(){var n=z(["<a data-product-link><img data-product-img /></a>"]);return w=function(){return n},n}function j(){var n=z(['\n            <div class="cl-product-img col-xs-3 col-sm-12">\n                 ',"\n            </div>\n             "]);return j=function(){return n},n}function O(){var n=z(['\n     <div class="cl-product cl-grid ','">\n        <div class="row">\n            ','\n            <div class="cl-product-detail col-xs-9 col-sm-12">\n                 ',"\n                 \n                 ","\n                 \n                 <div data-product-options></div>\n        \n                 <div data-product-price></div>\n                 \n                 <div data-product-button></div>\n            </div>\n            \n            ","\n        </div>\n    </div>\n"]);return O=function(){return n},n}function q(){var n=z(['\n     <div class="__badge ','">',"</div> \n"]);return q=function(){return n},n}function z(n,t){return t||(t=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(t)}}))}var P={},y=function(r){return(0,n.html)(q(),(0,t.classMap)(r.classMap),r.text)};P.default=function(r){return(0,n.html)(O(),(0,t.classMap)(r.classMap),r.img?(0,n.html)(j(),r.link?(0,n.html)(w()):(0,n.html)(_())):null,r.link&&r.title?(0,n.html)(M()):(0,n.html)(k(),r.title?(0,n.html)(b()):null),r.html?(0,n.html)(x()):null,r.badge?y(r.badge):null)},P.col=function(r){return(0,n.html)(g(),(0,t.classMap)(r.classMap),r.img?(0,n.html)(h(),r.link?(0,n.html)(m()):(0,n.html)(f())):null,r.link&&r.title?(0,n.html)(p()):(0,n.html)(v(),r.title?(0,n.html)(s()):null),r.html?(0,n.html)(e()):null,r.badge?y(r.badge):null)},P.row=function(e){return(0,n.html)(o(),(0,t.classMap)(e.classMap),e.html?(0,n.html)(d()):null,e.img?(0,n.html)(l(),e.link?(0,n.html)(a()):(0,n.html)(c())):null,e.link&&e.title?(0,n.html)(u()):(0,n.html)(i(),e.title?(0,n.html)(r()):null),e.badge?y(e.badge):null)};var A=P;exports.default=A;
},{"lit-html":"KMqM","lit-html/directives/class-map":"zFN9"}],"kRzK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n=require("lit-html"),e=require("lit-html/directives/repeat"),t=require("lit-html/directives/class-map");function r(){var n=c(['\n                    <option value="','" ?selected="','" >',"</option>\n                 "]);return r=function(){return n},n}function i(){var n=c(['<label for="option-',"-Option",'">',"</label>"]);return i=function(){return n},n}function o(){var n=c(["\n            \n            <div>\n                ",'\n                \n                <select id="option-',"-",'" name="options[',']">\n                \n                 ',"\n                \n                </select>\n            </div>\n            \n        "]);return o=function(){return n},n}function u(){var n=c(["\n         ","\n    "]);return u=function(){return n},n}function l(){var n=c(["\n<div> \n","\n</div>\n"]);return l=function(){return n},n}function c(n,e){return e||(e=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(e)}}))}var a=function(n){return n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")},p=function(t,c,p){return(0,n.html)(l(),t.options.length>0?(0,n.html)(u(),(0,e.repeat)(t.options,function(n){return n.name},function(u,l){return(0,n.html)(o(),p.optionsLabel?(0,n.html)(i(),t.id,u.position,u.name):null,t.id,u.position,a(u.name),(0,e.repeat)(u.values,function(n){return n},function(e,t){return(0,n.html)(r(),e,c["option"+u.position]==e,e)}))})):null)},f=p;exports.default=f;
},{"lit-html":"KMqM","lit-html/directives/repeat":"jBp4","lit-html/directives/class-map":"zFN9"}],"svZz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n=require("lit-html");function t(){var n=i(['<span><svg aria-hidden="true" focusable="false" role="presentation" class="cl-spinner" viewBox="0 0 20 20"><path d="M7.229 1.173a9.25 9.25 0 1 0 11.655 11.412 1.25 1.25 0 1 0-2.4-.698 6.75 6.75 0 1 1-8.506-8.329 1.25 1.25 0 1 0-.75-2.385z" fill="#919EAB"></path></svg></span>']);return t=function(){return n},n}function e(){var n=i([" <span>","</span>"]);return e=function(){return n},n}function r(){var n=i(["<span></span>"]);return r=function(){return n},n}function u(){var n=i(['<input class="cl-quantity" type="number" placeholder="1" name="quantity" .value=',' .min="','" pattern="[0-9]*">']);return u=function(){return n},n}function a(){var n=i(["\n        ",'\n        <button class="cl-button" ?disabled="','" @click=',">\n            ","\n            ","\n        </button>\n"]);return a=function(){return n},n}function i(n,t){return t||(t=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(t)}}))}var l=function(i,l,o,c){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;return(0,n.html)(a(),c.quantity?(0,n.html)(u(),s,s):null,l,i,o?(0,n.html)(r()):(0,n.html)(e(),c.buttonText),c.loading?(0,n.html)(t()):null)},o=l;exports.default=o;
},{"lit-html":"KMqM"}],"acO7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("lit-html");function t(){var e=r(['<span class="cl-check"></span>']);return t=function(){return e},e}function n(){var e=r(['\n        <button class="cl-select" ?disabled="','" @click=',">\n            ","\n        </button>\n"]);return n=function(){return e},e}function r(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var u=function(r,u,c,l){return(0,e.html)(n(),u,r,c?(0,e.html)(t()):null)},c=u;exports.default=c;
},{"lit-html":"KMqM"}],"ibVD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=a(require("../util"));function a(e){return e&&e.__esModule?e:{default:e}}var s=function(a,s,c,n,r){var t={before:c?'<span class="__before">'.concat(c,"</span>"):"",price:s?'<span class="__price">'.concat(s,"</span>"):"",discount:n?'<span class="__discount">'.concat(n,"</span>"):"",offer:r?'<span class="__offer">'.concat(r,"</span>"):""};return a=e.default.replacePlaceholders(a,t),'<span class="cl-price">'.concat(a,"</span>")},c=s;exports.default=c;
},{"../util":"zY0S"}],"JrzW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=v(require("loglevel")),e=g(require("./util")),i=g(require("./translate")),s=require("@shopify/theme-product-form"),n=v(require("@shopify/theme-currency")),r=require("lit-html"),a=g(require("./template/product-data.template")),o=g(require("./template/product-options.template")),l=g(require("./template/product-button.template")),c=g(require("./template/product-select.template")),u=g(require("./template/price.template")),h=require("@shopify/theme-currency/currency"),d=require("./const"),p=g(require("./offer-discount"));function g(t){return t&&t.__esModule?t:{default:t}}function f(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return f=function(){return t},t}function v(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=f();if(e&&e.has(t))return e.get(t);var i={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=s?Object.getOwnPropertyDescriptor(t,n):null;r&&(r.get||r.set)?Object.defineProperty(i,n,r):i[n]=t[n]}return i.default=t,e&&e.set(t,i),i}function m(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function y(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function _(t,e,i){return e&&y(t.prototype,e),i&&y(t,i),t}var E=function(){function t(i,s){m(this,t);this.product=i,this.settings=e.default.extend({api:"https://api.cloudlift.app",assets:"https://assets.cloudlift.app",selector:null,onAddItem:null,onSelectedChanged:null,onChange:null,discount:null,preview:!1,variants:[],quantity:1,html:"",config:{template:"row",classMap:{},inCart:!1,html:!1,img:!0,quantity:!0,title:!0,quantityTitle:!1,variantTitle:!1,optionsLabel:!1,select:!1,buttonSelect:!1,button:!0,price:!0,link:!1,buttonText:"Add to Cart",priceTemplate:"$before $price",moneyFormat:"SFr. {{amount}}",loading:!1}},s||{}),this.selected=!1,this.offerDiscount=p.default.getInstance(),this.settings.selector?e.default.isElement(this.settings.selector)?this.element=this.settings.selector:this.element=document.querySelector(this.settings.selector):this.element=document.createElement("span"),this._init()}return _(t,[{key:"updateOptions",value:function(t){this.settings=e.default.extend(this.settings,t),this._renderVariant(this.selectedVariant)}},{key:"updateHtml",value:function(t){this.settings.html=t,this.productHtmlEl&&this.settings.config.html&&(this.productHtmlEl.innerHTML='<div class="cl-html">'+this.settings.html+"</div>")}},{key:"selectVariant",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=0;i<this.product.variants.length;i++){var s=this.product.variants[i];if(s.id.toString()===t.toString()){this.selectedVariant=s,this.productOptionsEl&&(e?this.productOptionsEl.classList.add("cl-hide"):(0,r.render)((0,o.default)(this.product,this.selectedVariant,this.settings.config),this.productOptionsEl)),this._renderVariant(this.selectedVariant),this.settings.onChange&&this.settings.onChange(this.selectedVariant);break}}}},{key:"getQuantity",value:function(){return this._productForm&&this.settings.config.quantity&&this.settings.config.button?this._productForm.quantity():this.settings.quantity}},{key:"getPrice",value:function(){return null!=this.selectedVariant?parseFloat(this.selectedVariant.price):0}},{key:"getProperties",value:function(){var t=this._productForm.properties(),e={};if(null!=t&&t.length>0)for(var i=0;i<t.length;i++){var s=t[i];e[s.name]=s.value}return e}},{key:"getDiscountValue",value:function(){var t=0;if(this.settings.discount){var e=this.settings.discount,i=this.getPrice(),s=this.getQuantity();e.valueType!==d.DiscountValueType.BUYXGETY_PERCENTAGE&&e.valueType!==d.DiscountValueType.BUYXGETY_FREE||(s=this.settings.quantity);var n=i*s;if(e.order)e.valueType===d.DiscountValueType.PERCENTAGE&&(t=this.offerDiscount.calcDiscountValue(e,n));else{var r=n;t=this.offerDiscount.calcDiscountValue(e,r)}}return t}},{key:"destroy",value:function(){}},{key:"_init",value:function(){var t=this;if(this.settings.variants&&this.settings.variants.length>0&&this.settings.variants.length!==this.product.variants.length){this.product=JSON.parse(JSON.stringify(this.product)),this.product.variants=this.product.variants.filter(function(e){return-1!==t.settings.variants.indexOf(e.id.toString())});for(var e=function(e){var i=t.product.options[e];i.values=i.values.filter(function(e){for(var s=0;s<t.product.variants.length;s++){if(e===t.product.variants[s]["option"+i.position])return!0}return!1})},i=0;i<this.product.options.length;i++)e(i)}this.settings.variants&&this.product.variants.length>0&&(this.selectedVariant=this.product.variants[0],this._render(),this._renderVariant(this.selectedVariant),this._productForm=new s.ProductForm(this.element,this.product,{onOptionChange:function(e){return t._onOptionChange(e)},onQuantityChange:function(e){return t._onQuantityChange(e)}}))}},{key:"_onAdd",value:function(t){t&&t.preventDefault(),this.settings.config.loading=!0,this._renderButton(this.selectedVariant),this.settings.onAddItem&&this.settings.onAddItem(this.product,this.selectedVariant,this.getQuantity(),this.getProperties())}},{key:"_onSelect",value:function(t){t&&t.preventDefault(),this.selected=!this.selected,this._renderButton(this.selectedVariant),this.settings.onSelectedChanged&&this.settings.onSelectedChanged(this.selected)}},{key:"_deSelect",value:function(){this.selected&&(this._onSelect(),this._selected=!0)}},{key:"_selectVariant",value:function(t){this.selectedVariant=t,this._renderVariant(this.selectedVariant)}},{key:"_onOptionChange",value:function(t){var e=t.dataset.variant;this._selectVariant(e),this.settings.onChange&&this.settings.onChange(this.selectedVariant)}},{key:"_onQuantityChange",value:function(){this._renderVariant(this.selectedVariant),this.settings.onChange&&this.settings.onChange(this.selectedVariant)}},{key:"_render",value:function(){var t=this;(0,r.render)(a.default[this.settings.config.template](this.settings.config),this.element),this.productTitleEl=this.element.querySelector("[data-product-title]"),this.productImgEl=this.element.querySelector("[data-product-img]"),this.productOptionsEl=this.element.querySelector("[data-product-options]"),this.productPriceEl=this.element.querySelector("[data-product-price]"),this.productButtonEl=this.element.querySelector("[data-product-button]"),this.productLinksEl=this.element.querySelectorAll("[data-product-link]"),this.productHtmlEl=this.element.querySelector("[data-product-offer]"),this.productOptionsEl&&(this.product.variants.length>1&&!this.settings.config.inCart?(0,r.render)((0,o.default)(this.product,this.selectedVariant,this.settings.config),this.productOptionsEl):this.productOptionsEl.classList.add("cl-hide")),this.settings.config.select&&!this.settings.config.inCart&&(this.productTitleEl&&this.productTitleEl.addEventListener("click",function(e){return t._onSelect()}),this.productImgEl&&this.productImgEl.addEventListener("click",function(e){return t._onSelect()})),this.updateHtml(this.settings.html)}},{key:"_renderVariant",value:function(t){var e,i;(null===t?(this.productPriceEl.classList.add("cl-hide"),this._deSelect()):t&&!t.available?(this.productPriceEl.classList.add("cl-hide"),this._deSelect()):t&&t.available&&(this.productPriceEl.classList.remove("cl-hide"),this._renderPrice(t),this._selected&&(this.selected=!0,delete this._selected,this.settings.config.select&&this.settings.onSelectedChanged&&this.settings.onSelectedChanged(this.selected))),this.productTitleEl)&&(e=this.settings.config.variantTitle&&t?t.name:this.product.title,this.settings.config.quantityTitle&&(e=this.getQuantity()+"x "+e),this.productTitleEl.textContent=e);this.productImgEl&&(t&&t.featured_image?i=t.featured_image.src:this.product.featured_image&&(i=this.product.featured_image),i?(this.productImgEl.classList.remove("cl-hide"),this.productImgEl.src=i):this.productImgEl.classList.add("cl-hide"));this._renderButton(t),this._updateVariantLinks()}},{key:"_renderButton",value:function(t){if(this.productButtonEl)if(this.settings.config.button){var e=null==t;if(this.settings.config.inCart){this.productButtonEl.innerHTML='<svg class="__check" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><circle cx="12" cy="12" r="10" stroke="none" fill="#fff"></circle><path d="M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10-4.477 10-10 10zm-.997-6l7.07-7.071-1.414-1.414-5.656 5.657-2.829-2.829-1.414 1.414L11.003 16z" fill="rgba(47,204,113,1)"/></svg>'}else this.settings.config.select?(0,r.render)((0,c.default)(this._onSelect.bind(this),e,this.selected,this.settings.config),this.productButtonEl):(this.settings.preview&&!this.settings.config.buttonSelect&&(e=!0),(0,r.render)((0,l.default)(this.settings.config.buttonSelect?this._onSelect.bind(this):this._onAdd.bind(this),e,this.selected,this.settings.config,this.settings.quantity),this.productButtonEl));this.productButtonEl.classList.remove("cl-hide")}else this.productButtonEl.classList.add("cl-hide")}},{key:"_renderPrice",value:function(t){if(this.settings.config.price){var e=null,i=null,s=null,n=null,r=parseFloat(t.price)*this.getQuantity();if(this.settings.discount){var a=this.getDiscountValue();0!==a&&(i=(0,h.formatMoney)(r,this.settings.config.moneyFormat),r-=a,n=(0,h.formatMoney)(a,this.settings.config.moneyFormat),s=this.offerDiscount.getDiscountValueString(this.settings.discount))}0!==r&&(e=(0,h.formatMoney)(r,this.settings.config.moneyFormat)),this.productPriceEl.innerHTML=(0,u.default)(this.settings.config.priceTemplate,e,i,n,s)}}},{key:"_updateVariantLinks",value:function(){if(this.productLinksEl.length>0)for(var t=0;t<this.productLinksEl.length;t++){var e=this.productLinksEl[t];null!==this.selectedVariant?e.setAttribute("href","/products/"+this.product.handle+"?variant="+this.selectedVariant.id):e.setAttribute("href","")}}}]),t}(),V=E;exports.default=V;
},{"loglevel":"ohSP","./util":"zY0S","./translate":"IkY8","@shopify/theme-product-form":"ksyH","@shopify/theme-currency":"s8ky","lit-html":"KMqM","./template/product-data.template":"npm8","./template/product-options.template":"kRzK","./template/product-button.template":"svZz","./template/product-select.template":"acO7","./template/price.template":"ibVD","@shopify/theme-currency/currency":"jUSW","./const":"QqYi","./offer-discount":"y1JY"}],"VZdO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.unsafeHTML=void 0;var e=require("../lib/parts.js"),t=require("../lit-html.js"),r=new WeakMap,n=(0,t.directive)(function(n){return function(i){if(!(i instanceof t.NodePart))throw new Error("unsafeHTML can only be used in text bindings");var a=r.get(i);if(void 0===a||!(0,e.isPrimitive)(n)||n!==a.value||i.value!==a.fragment){var o=document.createElement("template");o.innerHTML=n;var s=document.importNode(o.content,!0);i.setValue(s),r.set(i,{value:n,fragment:s})}}});exports.unsafeHTML=n;
},{"../lib/parts.js":"PIiJ","../lit-html.js":"KMqM"}],"oRz2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=l(require("loglevel")),t=o(require("./util")),n=o(require("./offer-display-content")),i=require("lit-html"),r=require("lit-html/directives/unsafe-html.js");function o(e){return e&&e.__esModule?e:{default:e}}function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function l(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=i?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r]}return n.default=e,t&&t.set(e,n),n}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),e}function f(){var e=d(['\n    <div class="cl-product-checkbox" >\n       ','\n       <label for="cl-cb-offer">\n         <input type="checkbox" id="cl-cb-offer" /><span>',"</span>\n        </label>\n    </div>\n"]);return f=function(){return e},e}function d(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var h=function(e,t){return(0,i.html)(f(),(0,r.unsafeHTML)(t.html),e.title)},p=function(){function e(n,i,r,o){c(this,e);this.productOffer=n,this.displayModal=i,this.displayLayout=r,this.visible=!1,this.settings=t.default.extend({assets:"https://assets.cloudlift.app",contentEl:null,selector:null,onClose:null,config:{html:"",display_content:{}}},o||{})}return a(e,[{key:"_render",value:function(){this._contentEl=document.createElement("span"),(0,i.render)(h(this.productOffer.product,this.settings.config),this._contentEl),this.displayCheckbox=new n.default({contentEl:this._contentEl,selector:'form[action*="/cart/add"]',config:this.settings.config.display_content})}},{key:"show",value:function(){return this.visible?this._contentEl.querySelector("input[type=checkbox]").checked?(this.displayModal.show(),this.displayLayout.render()):this.settings.onClose&&this.settings.onClose():(this._render(),this.displayCheckbox.show(),this.visible=!0),Promise.resolve()}},{key:"hide",value:function(){this.visible&&(this.displayCheckbox.hide(),this.visible=!1,this.displayModal.hide())}},{key:"isVisible",value:function(){return this.displayCheckbox.isVisible()}},{key:"destroy",value:function(){}}]),e}(),y=p;exports.default=y;
},{"loglevel":"ohSP","./util":"zY0S","./offer-display-content":"Cl6E","lit-html":"KMqM","lit-html/directives/unsafe-html.js":"VZdO"}],"wslp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("lit-html"),e=require("lit-html/directives/unsafe-html.js"),n=require("lit-html/directives/class-map");function r(){var t=o(['<div style="color: #000; font-weight: normal !important;margin-top: 0.5em;font-size: 12px !important;text-align: center;">powered by <a style="color: #1e73bd; display: inline !important;" target="_blank" href="http://apps.shopify.com/offer-templates?ref=free">Offer-Templates</a></div>']);return r=function(){return t},t}function i(){var t=o([' <div class="cl-dismiss-text"><span @click=',">","</span></div>"]);return i=function(){return t},t}function l(){var t=o([' <div class="cl-offer-button">',"</div>"]);return l=function(){return t},t}function s(){var t=o([' <div class="cl-offer-price">',"</div>"]);return s=function(){return t},t}function u(){var t=o(['<div class="cl-html">',"</div>"]);return u=function(){return t},t}function c(){var t=o([' <div class="cl-dismiss" @click=',"></div>"]);return c=function(){return t},t}function a(){var t=o(['\n    <div id="','" class="cl-offer ','" >\n       ',"\n       ",'\n       <div class="cl-offer-layout ','">',"</div>\n       ","\n       ","\n       ","\n       ","\n    </div>\n"]);return a=function(){return t},t}function o(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var f=function(t,e,n){var r={};return r["__"+t.displayLayout]=!0,r.__footer=null!=e||null!=n,r.__bxgy=t.config.buyXText&&""!==t.config.buyXText,r},d=function(o,d,m,v,p,h){return(0,t.html)(a(),o.uuid,(0,n.classMap)({"cl-m-select":d.multiSelect}),d.dismiss?(0,t.html)(c(),v):null,d.html?(0,t.html)(u(),(0,e.unsafeHTML)(o.html)):null,(0,n.classMap)(f(o,p,h)),m,p?(0,t.html)(s(),p):null,h?(0,t.html)(l(),h):null,d.dismiss&&d.dismissText?(0,t.html)(i(),v,d.dismissText):null,d.branding?(0,t.html)(r()):null)},m=d;exports.default=m;
},{"lit-html":"KMqM","lit-html/directives/unsafe-html.js":"VZdO","lit-html/directives/class-map":"zFN9"}],"RI0L":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=r(require("./util")),e=r(require("./shopify-store")),n=r(require("./offer-product"));function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}var u=function(){function n(r){o(this,n);this.shopifyStore=e.default.getInstance(),this.settings=t.default.extend({api:"https://api.cloudlift.app"},r||{})}return a(n,[{key:"resolveProductOffers",value:function(t){var e=this,n=[];if(this.shopifyStore.isProduct()&&t.config.productTrigger&&n.push(this.shopifyStore.getProduct().then(function(t){return{product:t,variants:[],quantity:1}})),t.products&&t.products.length>0)for(var r=function(r){var o=t.products[r];n.push(e.shopifyStore.getProduct(o.handle).then(function(t){return{product:t,variants:o.variants,quantity:o.quantity}}))},o=0;o<t.products.length;o++)r(o);if(t.collections&&t.collections.length>0)for(var i=function(r){var o=t.collections[r];n.push(e.shopifyStore.getCollectionProducts(o.handle).then(function(t){return t.splice(0,o.quantity).map(function(t){return{product:e.mapCollectionProductFormat(t),variants:[],quantity:1}})}))},a=0;a<t.collections.length;a++)i(a);return Promise.all(n).then(function(t){return t.flat(1)})}},{key:"mapCollectionProductFormat",value:function(t){t.images.length>0?t.featured_image=t.images[0].src:t.featured_image="",t.type=t.product_type;for(var e=0;e<t.variants.length;e++){var n=t.variants[e];n.options=[];for(var r=1;r<4;r++){var o=n["option"+r];o&&n.options.push(o)}if(n.price){var i=parseFloat(n.price);isNaN(i)?n.price=0:n.price=100*i}t.variants.length>1?n.name=t.title+" - "+n.title:n.name=t.title}return t}}],[{key:"getInstance",value:function(t){return n._instance?n._instance:(n._instance=new n(t),n._instance)}}]),n}(),c=u;exports.default=c;
},{"./util":"zY0S","./shopify-store":"cEki","./offer-product":"JrzW"}],"DFet":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=k(require("loglevel")),e=P(require("./util")),i=P(require("./ajax-watch")),s=P(require("./translate")),r=P(require("./shopify-cart")),o=P(require("./shopify-store")),n=P(require("./offer-discount")),a=P(require("./offer-state")),c=require("./const"),u=P(require("./offer-api")),f=P(require("./offer-app")),d=P(require("./offer-layout-grid")),l=P(require("./offer-layout-slider")),h=P(require("./offer-display-modal")),g=P(require("./offer-display-content")),p=P(require("./offer-product")),y=P(require("./offer-display-product-checkbox")),v=P(require("./template/offer.template")),_=P(require("./template/price.template")),m=P(require("./template/product-button.template")),w=require("@shopify/theme-currency/currency"),S=require("lit-html");require("./style/style.css");var b=P(require("./offer-product-resolver"));function P(t){return t&&t.__esModule?t:{default:t}}function E(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return E=function(){return t},t}function k(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=E();if(e&&e.has(t))return e.get(t);var i={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var o=s?Object.getOwnPropertyDescriptor(t,r):null;o&&(o.get||o.set)?Object.defineProperty(i,r,o):i[r]=t[r]}return i.default=t,e&&e.set(t,i),i}function q(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function C(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function O(t,e,i){return e&&C(t.prototype,e),i&&C(t,i),t}var T=function(){function s(t,i){q(this,s);this.active=!1,this.showOffer=!0,this.offer=t,this.offerProducts=[],this._productsEl=[],this._productsPriceEl=null,this._productsSelectEl=null,this.selectedCount=0,this.api=u.default.getInstance(),this.shopifyStore=o.default.getInstance(),this.shopifyCart=r.default.getInstance(),this.offerDiscount=n.default.getInstance(),this.settings=e.default.extend({api:"https://api.cloudlift.app",assets:"https://assets.cloudlift.app",preview:!1,designer:!1,currencyFormats:{moneyFormat:"{{amount}} $"},cart:{ajax:!1,url:"/cart",selectorOpen:""},config:{branding:!1,dismiss:!1,dismissText:"No thanks",auto:!1,replace:!1,reuse:!1,reshow:!1,quantityMatch:!1,excludeCart:!1,all:!1,bundle:!1,multiSelect:!1,addAsync:!1,productForm:!1,productTrigger:!1,priceTotal:!1,checkout:!1,buttonText:"Add selected",buyXText:"BUY",getYText:"GET",priceTemplate:"$before $price",moneyFormat:"",loading:!1,html:!0,product:{html:!1,img:!0,quantity:!0,quantityTitle:!1,optionsLabel:!1,select:!1,button:!0,buttonSelect:!1,price:!0,link:!1,buttonText:"Add to Cart",priceTemplate:"$before $price",moneyFormat:""}}},i||{}),this.settings.config.moneyFormat||(this.settings.config.moneyFormat=this.settings.currencyFormats.moneyFormat),this.settings.config.product.moneyFormat||(this.settings.config.product.moneyFormat=this.settings.currencyFormats.moneyFormat),this._init()}return O(s,[{key:"setActive",value:function(t){this._display&&(t?this.active&&this._display.isVisible()||!this._state.dismissed&&this.showOffer&&this._display.show():this.active&&this._display.hide()),t&&this.settings.config.auto&&this._checkAutoDiscount(),this.active=t}},{key:"destroy",value:function(){for(;this.offerProducts.length;)this.offerProducts.shift().destroy();this._display&&this._display.destroy(),this._layout&&this._layout.destroy(),this.removeCss()}},{key:"_init",value:function(){var i=this;(this._restoreOfferState(),this.settings.config.auto)||b.default.getInstance().resolveProductOffers(this.offer).then(function(t){return!i.settings.config.excludeCart||i.settings.designer||i.settings.preview?t:i.shopifyCart.getCart(!0).then(function(e){return e.items.length>0?t.filter(function(t){for(var i=0;i<e.items.length;i++){if(e.items[i].product_id.toString()===t.product.id.toString())return!1}return!0}):t})}).then(function(s){if(0!==s.length){var r=i.offer.hasDiscount&&i.offer.discount;i.settings.config.bundle&&(i.settings.config.all=!0),i.settings.config.product.button=!i.settings.config.all,i.settings.config.product.select=i.settings.config.multiSelect,i.settings.config.productForm&&(i.settings.config.addAsync=i.settings.config.productForm),i.settings.config.product.buttonSelect=!i.settings.config.product.select&&i.settings.config.addAsync,i.settings.config.html=!i.settings.config.product.html;for(var o=0;o<s.length;o++){var n=s[o],a=void 0,u=JSON.parse(JSON.stringify(i.settings.config.product));if(0===o&&i.settings.config.productTrigger&&i.shopifyStore.isProduct()){if(1===s.length)return void t.warn("no offer products for offer: "+i.offer.uuid,i.offer);u.priceTemplate="$price",u.button=!0,u.inCart=!0,u.classMap={__cart:!0},a=new p.default(n.product,{discount:null,variants:n.variants||[],quantity:n.quantity||1,html:"",config:u,preview:i.settings.preview})}else{var f=r?i.offer.discount:null;f&&(f=i._filterDiscountProducts(f,n,u)),i.settings.config.bundle&&i._addBundleConfig(n,u),a=new p.default(n.product,{onChange:function(){return i._renderPrice()},onSelectedChanged:i._onSelectedChanged.bind(i),onAddItem:i._onAdd.bind(i),discount:f,variants:n.variants||[],quantity:n.quantity||1,html:i.settings.config.product.html?i._renderHtml(i.offer.html,n.product):"",config:u,preview:i.settings.preview}),i.settings.config.all&&(a.selected=!0,i.selectedCount++)}i.offerProducts.push(a),i._productsEl.push(a.element)}switch(i._layoutEl=document.createElement("span"),i.offer.displayLayout){case c.DisplayLayout.BASIC:i._layout={render:function(){for(var t=0;t<i._productsEl.length;t++){var e=i._productsEl[t];i._layoutEl.appendChild(e)}},destroy:function(){}};break;case c.DisplayLayout.STACKED:i._layout=new d.default({assets:i.settings.assets,productsEl:i._productsEl,selector:i._layoutEl,config:e.default.extend(i.settings.config.layout_grid||{},{columns:1})});break;case c.DisplayLayout.GRID:i._layout=new d.default({assets:i.settings.assets,productsEl:i._productsEl,selector:i._layoutEl,config:i.settings.config.layout_grid});break;case c.DisplayLayout.SLIDER:i._layout=new l.default({assets:i.settings.assets,productsEl:i._productsEl,selector:i._layoutEl,config:i.settings.config.layout_slider})}switch(i.offerEl=document.createElement("span"),i.updateHtml(i.offer.html,!1),i.offer.css&&i.updateCss(i.offer.css),i._render(),i.offer.displayType){case c.DisplayType.MODAL:i.settings.config.display_modal&&(i.settings.config.display_modal.maxWidth=i.offer.styles["offer-max-width"],i.settings.config.display_modal.className="cl-modal-"+i.offer.uuid),i._display=new h.default({assets:i.settings.assets,contentEl:i.offerEl,closable:!i.settings.config.dismiss,config:i.settings.config.display_modal,onClose:function(){return i._onClose(!1)}});break;case c.DisplayType.CONTENT:i._display=new g.default({assets:i.settings.assets,contentEl:i.offerEl,selector:i.settings.config.selector,config:i.settings.config.display_content})}var v=!1;i.shopifyStore.isProduct()&&(i.offer.displayType===c.DisplayType.MODAL?(v=!0,i.showOffer=!1,i.settings.config.checkbox&&(i._display=new y.default(productOffer,i._display,i._layout,{config:i.settings.config.checkbox,onClose:function(){return i._onClose(!1)}}),i._display.show())):i.settings.config.productForm&&i.offer.displayType===c.DisplayType.CONTENT&&(v=!0));var _=[];null!=i._display.ready&&_.push(i._display.ready),null!=i._layout.ready&&_.push(i._layout.ready),Promise.all(_).then(function(){if((i.showOffer||i.settings.preview)&&(i._display.show(),i._layout.render(),i._display.isVisible()&&(!i.settings.designer&&i.settings.preview&&i.offer.displayType===c.DisplayType.CONTENT&&i._display._contentEl.scrollIntoView({behavior:"smooth",block:"end"}),i._offerView())),v)for(var e=i.shopifyStore.findProductForms(),s=function(s){var r=e[s];i._productFormSubmit=!1,t.debug("subscribed to productForm submit:",r),i.shopifyStore.onProductFormSubmit(r,function(t){if(i.active&&!i._productFormSubmit)if(i._productFormSubmit=!0,t.preventDefault(),t.stopImmediatePropagation(),i._productFormEvent=t,i._productForm=r,i.settings.config.productForm)i._onAddSelected().then(function(){i._triggerFormEvent()});else{var e=i.shopifyStore.findProductFormVariantId(r);if(e)for(var s=0;s<i.offerProducts.length;s++){i.offerProducts[s].selectVariant(e,!0)}i._display.show(),i._layout.render(),i._display.isVisible()&&i._offerView()}},[".cl-cart-add"])},r=0;r<e.length;r++)s(r)})}else t.warn("no offer products for offer: "+i.offer.uuid,i.offer)}).catch(function(e){t.error("failed to load offer products for offer: "+i.offer.uuid,e),i.settings.designer&&e.xhr&&(401===e.xhr.status?i._designerPreviewError('<div style="text-align: center;padding:0.5em;font-family: -apple-system, BlinkMacSystemFont, Roboto, Helvetica, Arial, sans-serif;"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="60" height="60"><path fill="none" d="M0 0h24v24H0z"/><path fill="#5563c1" d="M19 10h1a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V11a1 1 0 0 1 1-1h1V9a7 7 0 1 1 14 0v1zm-2 0V9A5 5 0 0 0 7 9v1h10zm-6 4v4h2v-4h-2z"/></svg><h3>Your store is password protected</h3><p>To view a live preview of your offer your store needs to be public<p><p>You can still preview the offer on your store by clicking on the "Preview offer" button.</p></div>'):404===e.xhr.status?i._designerPreviewError('<div style="text-align: center;padding:0.5em;font-family: -apple-system, BlinkMacSystemFont, Roboto, Helvetica, Arial, sans-serif;"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="60" height="60"><path fill="none" d="M0 0h24v24H0z"/><path fill="#5563c1" d="M18.031 16.617l4.283 4.282-1.415 1.415-4.282-4.283A8.96 8.96 0 0 1 11 20c-4.968 0-9-4.032-9-9s4.032-9 9-9 9 4.032 9 9a8.96 8.96 0 0 1-1.969 5.617zm-2.006-.742A6.977 6.977 0 0 0 18 11c0-3.868-3.133-7-7-7-3.868 0-7 3.132-7 7 0 3.867 3.132 7 7 7a6.977 6.977 0 0 0 4.875-1.975l.15-.15zm-3.847-8.699a2 2 0 1 0 2.646 2.646 4 4 0 1 1-2.646-2.646z"/></svg><h3>Offer product not found</h3><p><i>'+e.xhr.responseURL+"</i></p><p>Please remove this product from the offer.</p></div>"):i._designerPreviewError('<div style="text-align: center;padding:0.5em;font-family: -apple-system, BlinkMacSystemFont, Roboto, Helvetica, Arial, sans-serif;"><h3>Offer preview error</h3><p><i>'+e.xhr.responseURL+" ("+e.xhr.status+")</i></p></div>"))})}},{key:"_render",value:function(){var t=this;this.settings.config.priceTotal?(this._productsPriceEl||(this._productsPriceEl=document.createElement("span")),this._renderPrice()):delete this._productsPriceEl,(this.settings.config.multiSelect||this.settings.config.all||this.settings.config.addAsync)&&!this.settings.config.productForm?(this._productsSelectEl||(this._productsSelectEl=document.createElement("span")),this._renderSelect()):delete this._productsSelectEl,(0,S.render)((0,v.default)(this.offer,this.settings.config,this._layoutEl,function(){return t._onClose(!0)},this._productsPriceEl,this._productsSelectEl),this.offerEl)}},{key:"updateOptions",value:function(t){var i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.settings=e.default.extend(this.settings,t),t.config&&t.config.product)for(var s=0;s<this.offerProducts.length;s++){this.offerProducts[s].updateOptions({config:t.config.product})}i&&this._render()}},{key:"updateHtml",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this.settings.config.productTrigger&&this.offerProducts.length>1?1:0,s=this.offerProducts.length>0?this.offerProducts[i].product:null;if(this.offer.html=this._renderHtml(t,s),e&&(this._render(),!this.settings.config.html))for(var r=0;r<this.offerProducts.length;r++){var o=this.offerProducts[r];o.updateHtml(this._renderHtml(t,o.product))}}},{key:"updateCss",value:function(t){this.removeCss(),this._style=e.default.addStyleElement(t)}},{key:"removeCss",value:function(){this._style&&this._style.parentNode.removeChild(this._style)}},{key:"_renderHtml",value:function(t,i){var s={product:i&&i.title?'<span class="__product">'.concat(i.title,"</span>"):"",offer:this.offer.hasDiscount&&this.offer.discount?'<span class="__discount">'.concat(this.offerDiscount.getDiscountValueString(this.offer.discount),"</span>"):""};return e.default.replacePlaceholders(t,s)}},{key:"_onClose",value:function(t){var e=this;if(t?this._display.hide():(this._state.closed=this._state.closed||0,this._state.closed++,this._state.closed>=3&&(t=!0)),t){var i=new Date;i.setDate(i.getDate()+1),this._state.dismissed=!0,this._state.dreset=i.getTime()}var s=Promise.resolve();this.settings.config.addAsync&&this.selectedCount>0&&!this.settings.preview&&(s=this._onAddSelected()),s.then(function(){e._storeOfferState(),e._triggerFormEvent()})}},{key:"_triggerFormEvent",value:function(){if(this._productFormEvent){var e=this._productFormEvent;e.target?"click"===e.type?e.target.click():"submit"===e.type&&e.target.submit():(t.error("missing event target - manual form submit"),this._productForm.submit()),this._productFormEvent=null,this._productFormSubmit=!1}}},{key:"_addOffer",value:function(e){var i=this;if(!this.settings.preview){if(this.shopifyStore.isOrderStatus()){var s={id:Shopify.checkout.order_id,items:e};return this.api.createOrder(this.offer.uuid,s).then(function(t){i._setUsed(e).then(function(){t.location&&(window.location=t.location)})}).catch(function(t){alert("order add failed:"+t.error)})}return this._addToCart(e).then(function(s){var r=i._setUsed(e),o=Promise.resolve(),n=[];return i.settings.config.replace&&(i._productFormEvent?(i._productFormEvent=null,i._productFormSubmit=!1,o=i.shopifyStore.getProduct().then(function(t){if(t&&t.variants){var e=i.shopifyStore.findProductFormVariantId(i._productForm);if(e)for(var s=0;s<t.variants.length;s++){var r=t.variants[s];if(r.id.toString()===e.toString()){n.push({id:r.id,quantity:1,price:r.price&&r.price>0?r.price/100:0});break}}}})):i.settings.config.replace&&i.offer.productsReplace.length>0&&(o=i.shopifyCart.getCart(!0).then(function(e){var s=!1,r=e.items.reduce(function(e,r){for(var o=0;o<i.offer.productsReplace.length;o++){var a=i.offer.productsReplace[o];if(a.id.toString()===r.product_id.toString()){var c=!0;a.variants&&a.variants.length>0&&-1===a.variants.indexOf(r.variant_id.toString())&&(c=!1),c&&(e[r.variant_id]=Math.max(0,r.quantity-a.quantity),s=!0,n.push({id:r.variant_id,quantity:a.quantity,price:r.price&&r.price>0?r.price/100:0}),t.debug("replaced item quantity from: "+r.quantity+" to: "+e[r.variant_id],r))}}return e},{});if(s)return i.offerDiscount.skipCartUpdate++,i.shopifyCart.updateItemQuantitiesById(r)}))),Promise.all([r,o]).then(function(){n.length>0&&(i._state.replaced=n,i._storeOfferState()),i._productFormEvent&&!i.settings.config.replace?i._refreshLocationLazy():window.location=i._getRefreshLocation(),i._display.hide()})}).catch(function(t){alert("cart add failed:"+t.description)})}}},{key:"_onAdd",value:function(t,e,i,s){var r=this.shopifyCart.toItem(e.id,i,s);return this._addOffer([r])}},{key:"_onSelectedChanged",value:function(t){t?this.selectedCount++:(this.selectedCount--,this.selectedCount<0&&(this.selectedCount=0)),this._renderPrice(),this._renderSelect()}},{key:"_renderPrice",value:function(){if(this._productsPriceEl){for(var t=null,e=null,i=null,s=null,r=0,o=0,n=this.offer.hasDiscount&&this.offer.discount,a=0;a<this.offerProducts.length;a++){var c=this.offerProducts[a];c.selected&&null!=c.selectedVariant&&(r+=c.getPrice()*c.getQuantity(),n&&!this.offer.discount.order&&(o+=c.getDiscountValue()))}n&&this.offer.discount.order&&(o=this.offerDiscount.calcDiscountValue(this.offer.discount,r)),0!==o&&(e=(0,w.formatMoney)(r,this.settings.config.moneyFormat),r-=o,s=(0,w.formatMoney)(o,this.settings.config.moneyFormat)),n&&(i=this.offerDiscount.getDiscountValueString(this.offer.discount)),0!==r?(t=(0,w.formatMoney)(r,this.settings.config.moneyFormat),this._productsPriceEl.innerHTML=(0,_.default)(this.settings.config.priceTemplate,t,e,s,i)):this._productsPriceEl.innerHTML=""}}},{key:"_renderSelect",value:function(){var t=this;if(this._productsSelectEl){var e=this.selectedCount<=0,i=function(e){return t._onAddSelected(e)};e&&!this.settings.config.multiSelect&&(i=function(e){return t._display.hide()},e=!1),this.settings.preview&&(e=!0),(0,S.render)((0,m.default)(i,e,!1,this.settings.config),this._productsSelectEl)}}},{key:"_onAddSelected",value:function(e){e&&e.preventDefault();for(var i=[],s=0;s<this.offerProducts.length;s++){var r=this.offerProducts[s];r.selected&&null!=r.selectedVariant&&i.push(this.shopifyCart.toItem(r.selectedVariant.id,r.getQuantity(),r.getProperties()))}return i.length>0?(this.settings.config.loading=!0,this._renderSelect(),t.debug("adding selected product items",i),this.selectedCount=0,this._addOffer(i)):Promise.resolve()}},{key:"_addToCart",value:function(e){var i=this,s=void 0!==this.settings.config.quantityMatch&&this.settings.config.quantityMatch,r=Promise.resolve(e);return s&&(r=this.shopifyCart.getCart(!0).then(function(t){var s=JSON.parse(JSON.stringify(e));if(i._productFormEvent){var r=i.shopifyStore.findProductFormVariantId(i._productForm);if(r){var o=i.shopifyStore.findProductFormQuantity(i._productForm);t.items.push({variant_id:r,quantity:o})}}return s.filter(function(i){for(var s=0;s<t.items.length;s++){var r=t.items[s];if(r.variant_id.toString()===i.id.toString()){i.quantity-=r.quantity;for(var o=0;o<e.length;o++){var n=e[o];if(n.id===i.id){n.add=Math.max(0,i.quantity);break}}if(i.quantity<=0)return!1}}return!0})})),r.then(function(e){return 1===e.length?i.shopifyCart.addItem(e[0]).then(function(e){return t.debug("added single item to cart",e),[e]}):i.shopifyCart.addItems(e).then(function(e){return t.debug("added multiple items to cart",e),e})})}},{key:"_offerView",value:function(){this.settings.preview||this.api.offerEvent(this.offer.uuid,c.OfferEventType.VIEW,null)}},{key:"_getRefreshLocation",value:function(){var t="/cart";this.settings.cart.ajax&&(t=window.location.pathname+window.location.search),this.settings.cart.url&&(t=this.settings.cart.url),this.settings.cart.selectorOpen&&(-1===t.indexOf("?")?t+="?":t+="&",t+=f.default.ParamOfferCartOpen);var e=this.settings.config.checkout?"/checkout":t;return this.offer.hasDiscount&&this.offer.discount.code?this.shopifyStore.getDiscountUrl(this.offer.discount.code,e):e}},{key:"_refreshLocationLazy",value:function(){if((this.settings.config.checkout||this.offer.hasDiscount&&this.offer.discount.code)&&window.localStorage){var t=this._getRefreshLocation();localStorage.setItem(f.default.locationStorageKey,t);var e=i.default.register(function(i){/.*cart\/add.js/.test(i.url)&&(e(),localStorage.removeItem(f.default.locationStorageKey),setTimeout(function(){return window.location=t},500))})}}},{key:"_setUsed",value:function(t){var i=this;if(this.offerDiscount.skipCartUpdate++,this._state.used){this._state.discount&&this.api.invalidateOffer(this.offer.uuid,{uuid:this.offer.uuid,items:this._state.items,discount:this._state.discount});for(var s=0;s<t.length;s++){for(var r=t[s],o=!1,n=0;n<this._state.items.length;n++){var a=this._state.items[n];if(a.id===r.id){a.quantity=r.quantity,a.properties=e.default.extend(a.properties,r.properties),o=!0;break}}o||this._state.items.push(r)}t=this._state.items}return this._state.used=!1,this._state.reuse=!1,this.api.useOffer(this.offer.uuid,{uuid:this.offer.uuid,items:t}).then(function(e){i._state.used=!0,i._state.valid=!0,i._state.items=t,i._state.quantity=i._getOfferMinQuantity(t),i._state.bundle=void 0!==i.settings.config.bundle&&i.settings.config.bundle,i._state.all=void 0!==i.settings.config.all&&i.settings.config.all,i._state.remove=void 0!==i.settings.config.remove&&i.settings.config.remove,i._state.replace=void 0!==i.settings.config.replace&&i.settings.config.replace,i._state.reuse=void 0!==i.settings.config.reuse&&i.settings.config.reuse,i._state.reshow=void 0!==i.settings.config.reshow&&(i.settings.config.reshow&&i.offer.displayType===c.DisplayType.CONTENT),i._state.auto=void 0!==i.settings.config.auto&&i.settings.config.auto;var s=Promise.resolve();return e.discount&&(i.offer.discount=e.discount,i._state.discount=e.discount.id,(s=i.offerDiscount.addDiscount(i.offer.uuid,e.discount)).then(function(t){return t&&(i.offer.discount.code=t),t})),i._storeOfferState(),s})}},{key:"_filterDiscountProducts",value:function(t,e,i){if(t.products.length>0&&t.valueType===c.DiscountValueType.BUYXGETY_PERCENTAGE||t.valueType===c.DiscountValueType.BUYXGETY_FREE){this._discountProducts=this._discountProducts||JSON.parse(JSON.stringify(t.products));for(var s=0;s<this._discountProducts.length;s++){var r=this._discountProducts[s];if(!(r.quantity<=0)&&e.product.id.toString()===r.id.toString()){var o=!1;if(e.variants&&e.variants.length>1)for(var n=0;n<e.variants.length;n++){var a=e.variants[n];if(-1!==r.variants.indexOf(a.toString())){o=!0;break}}else o=!0;if(o){var u=e.quantity||1;r.quantity-=u,r.quantity>=0&&(t=null)}}}t?(i.classMap={__c_get:!0},!this._discountProductsGetBadge&&this.settings.config.getYText&&(i.badge={text:this.settings.config.getYText,classMap:{cl_bxgy:!0}},this._discountProductsGetBadge=!0)):(i.priceTemplate="$price",i.classMap={__c_buy:!0},!this._discountProductsBuyBadge&&this.settings.config.buyXText&&(i.badge={text:this.settings.config.buyXText,classMap:{cl_bxgy:!0}},this._discountProductsBuyBadge=!0))}return t}},{key:"_addBundleConfig",value:function(t,e){this._discountProductsBundleBadge?(e.classMap={__bundle:!0},e.badge={text:"+",classMap:{cl_bundle:!0}}):this._discountProductsBundleBadge=!0}},{key:"_getOfferMinQuantity",value:function(t){for(var e=!1,i=0,s=0;s<t.length;s++){for(var r=t[s],o=1,n=0;n<this.offer.products.length;n++){var a=this.offer.products[n],c=!1;if(a.variants&&a.variants.length>0?-1!==a.variants.indexOf(r.id.toString())&&(c=!0):c=!0,c){(o=a.quantity)>1&&(e=!0);break}}this.settings.config.auto&&r.collectionQuantity&&(e=!0,o=r.collectionQuantity),i+=o}return e?i:1}},{key:"_checkAutoDiscount",value:function(){var t=this;this.settings.config.designer||this.shopifyCart.getCart(!0).then(function(e){var i=[];if(e.items.length>0){for(var s=0;s<e.items.length;s++){var r=e.items[s];if(t.offer.products&&t.offer.products.length>0)for(var o=0;o<t.offer.products.length;o++){var n=t.offer.products[o];if(r.product_id.toString()===n.id.toString()){var a=!1;n.variants&&n.variants.length>0?-1!==n.variants.indexOf(r.variant_id.toString())&&(a=!0):a=!0,a&&r.quantity>=n.quantity&&i.push({id:r.variant_id,quantity:n.quantity,properties:r.properties})}}if(t.offer.collections&&t.offer.collections.length>0&&window.clCartProduct)for(var c=window.clCartProduct,u=0;u<t.offer.collections.length;u++){var f=t.offer.collections[u];if(c.hasOwnProperty(r.key))for(var d=c[r.key],l=0;l<d.collections.length;l++){var h=d.collections[l];if(f.id.toString()===h.id.toString()){r.quantity>=f.quantity&&i.push({id:r.variant_id,quantity:r.quantity,properties:r.properties,collectionQuantity:f.quantity});break}}}}t.settings.config.bundle&&t.offer.products.length>i.length&&(i.length=0),i.length>0&&t._state.used&&(i=i.filter(function(e){for(var i=0;i<t._state.items.length;i++){if(t._state.items[i].id===e.id)return!1}return!0}))}return i}).then(function(e){e.length>0&&t._setUsed(e).then(function(e){e&&(window.location=t._getRefreshLocation())})})}},{key:"_designerPreviewError",value:function(t){var e=document.createElement("span");e.innerHTML=t,this._display=new g.default({assets:this.settings.assets,contentEl:e,selector:this.settings.config.selector,config:this.settings.config.display_content}),this._display.show()}},{key:"_storeOfferState",value:function(){a.default.storeState(this.offer.uuid,this._state)}},{key:"_restoreOfferState",value:function(){this.settings.preview?this._state={}:this._state=a.default.getState(this.offer.uuid)}}]),s}(),F=T;exports.default=F;
},{"loglevel":"ohSP","./util":"zY0S","./ajax-watch":"XoAR","./translate":"IkY8","./shopify-cart":"ydp9","./shopify-store":"cEki","./offer-discount":"y1JY","./offer-state":"jVXE","./const":"QqYi","./offer-api":"FkkJ","./offer-app":"PnKN","./offer-layout-grid":"uuSc","./offer-layout-slider":"IJf5","./offer-display-modal":"PAkP","./offer-display-content":"Cl6E","./offer-product":"JrzW","./offer-display-product-checkbox":"oRz2","./template/offer.template":"wslp","./template/price.template":"ibVD","./template/product-button.template":"svZz","@shopify/theme-currency/currency":"jUSW","lit-html":"KMqM","./style/style.css":"AGMv","./offer-product-resolver":"RI0L"}],"WXoQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("lit-html"),t=require("lit-html/directives/repeat"),n=require("lit-html/directives/class-map");function s(){var e=u(['<button class="cl-s-save" @click=',' ?disabled="','">Save</button>']);return s=function(){return e},e}function l(){var e=u(['<button class="cl-s-start step-location" @click=',">Select location</button>"]);return l=function(){return e},e}function c(){var e=u(['<button class="cl-s-stop" @click=',">Cancel</button>"]);return c=function(){return e},e}function o(){var e=u(['\n                    <option value="','" ?selected="','" >',"</option>\n                 "]);return o=function(){return e},e}function i(){var e=u(['\n                    <option value="','" ?selected="','" >',"</option>\n                 "]);return i=function(){return e},e}function r(){var e=u([' <option value="','" selected>Custom:</option>']);return r=function(){return e},e}function a(){var e=u(['\n<div class="cl-offer-selector cl-grid wizard">\n    <div class="row">\n        <div class="col-md-1 col-xs-12" style="display:flex; justify-content: flex-end; align-items: center;">\n           <div class="cl-s-info step-info"  @click=','><svg viewBox="0 0 16 16" preserveAspectRatio="xMidYMid meet" focusable="false" style="pointer-events: none; display: block; width: 100%; height: 100%; fill: white;"><g><path d="M8 0c-4.4 0-8 3.6-8 8s3.6 8 8 8 8-3.6 8-8-3.6-8-8-8zM9 13h-2v-7h2v7zM9 5h-2v-2h2v2z"></path></g></svg></div>\n           <p>Show Offer</p>\n        </div>\n        <div class="col-md-3 col-xs-6">\n           <select class="step-selectors" name="selectors" @change='," >\n                 ","\n                 ",'\n            </select>\n        </div>\n        <div class="col-md-3 col-xs-6">\n           <input type="text" name="selector" placeholder="Element selector" class="step-selector ','" .value=',' @input="','">\n        </div>\n        <div class="col-md-1 col-xs-6">\n           <select class="step-position" name="content_position" @change=',">\n                 ",'\n            </select>\n        </div>\n        <div class="col-md-2 col-xs-6">\n            ','\n        </div>\n        <div class="col-md-1 col-xs-12">\n            ','\n            \n            \n            <div class="cl-s-close" @click=',"></div>\n        </div>\n    </div>\n</div>\n"]);return a=function(){return e},e}function u(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var d=function(u,d){return(0,e.html)(a(),d.startWizard,d.selectorSelected,u.selectorCustom?(0,e.html)(r(),u.selector):null,(0,t.repeat)(u.selectors,function(e){return e},function(t,n){return(0,e.html)(i(),t,u.selector==t,t)}),(0,n.classMap)({"cl-s-invalid":u.selectorInvalid}),u.selector,d.selectorChanged,d.positionChanged,(0,t.repeat)(u.positions,function(e){return e.value},function(t,n){return(0,e.html)(o(),t.value,u.position==t.value,t.text)}),u.inspector?(0,e.html)(c(),d.stop):(0,e.html)(l(),d.start),u.saved||u.inspector||u.selectorInvalid?null:(0,e.html)(s(),d.save,u.saved||u.inspector),d.close)},v=d;exports.default=v;
},{"lit-html":"KMqM","lit-html/directives/repeat":"jBp4","lit-html/directives/class-map":"zFN9"}],"CveL":[function(require,module,exports) {
"use strict";var e={},t=e.hasOwnProperty,r=function(e,r){if(!e)return r;var s={};for(var i in r)s[i]=t.call(e,i)?e[i]:r[i];return s},s=/[ -,\.\/;-@\[-\^`\{-~]/,i=/[ -,\.\/;-@\[\]\^`\{-~]/,o=/['"\\]/,n=/(^|\\+)?(\\[A-F0-9]{1,6})\x20(?![a-fA-F0-9\x20])/g,a=function e(t,o){"single"!=(o=r(o,e.options)).quotes&&"double"!=o.quotes&&(o.quotes="single");for(var a="double"==o.quotes?'"':"'",u=o.isIdentifier,c=t.charAt(0),l="",p=0,f=t.length;p<f;){var g=t.charAt(p++),d=g.charCodeAt(),v=void 0;if(d<32||d>126){if(d>=55296&&d<=56319&&p<f){var h=t.charCodeAt(p++);56320==(64512&h)?d=((1023&d)<<10)+(1023&h)+65536:p--}v="\\"+d.toString(16).toUpperCase()+" "}else v=o.escapeEverything?s.test(g)?"\\"+g:"\\"+d.toString(16).toUpperCase()+" ":/[\t\n\f\r\x0B:]/.test(g)?u||":"!=g?"\\"+d.toString(16).toUpperCase()+" ":g:"\\"==g||!u&&('"'==g&&a==g||"'"==g&&a==g)||u&&i.test(g)?"\\"+g:g;l+=v}return u&&(/^_/.test(l)?l="\\_"+l.slice(1):/^-[-\d]/.test(l)?l="\\-"+l.slice(1):/\d/.test(c)&&(l="\\3"+c+" "+l.slice(1))),l=l.replace(n,function(e,t,r){return t&&t.length%2?e:(t||"")+r}),!u&&o.wrap?a+l+a:l};a.options={escapeEverything:!1,isIdentifier:!1,quotes:"single",wrap:!1},a.version="1.0.1",module.exports=a;
},{}],"d52b":[function(require,module,exports) {
"use strict";var e=this&&this.__assign||function(){return(e=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e}).apply(this,arguments)},n=this&&this.__generator||function(e,n){var t,r,a,o,u={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(o){return function(i){return function(o){if(t)throw new TypeError("Generator is already executing.");for(;u;)try{if(t=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return u.label++,{value:o[1],done:!1};case 5:u.label++,r=o[1],o=[0];continue;case 7:o=u.ops.pop(),u.trys.pop();continue;default:if(!(a=(a=u.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){u=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){u.label=o[1];break}if(6===o[0]&&u.label<a[1]){u.label=a[1],a=o;break}if(a&&u.label<a[2]){u.label=a[2],u.ops.push(o);break}a[2]&&u.ops.pop(),u.trys.pop();continue}o=n.call(e,u)}catch(i){o=[6,i],r=0}finally{t=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,i])}}},t=this&&this.__values||function(e){var n="function"==typeof Symbol&&e[Symbol.iterator],t=0;return n?n.call(e):{next:function(){return e&&t>=e.length&&(e=void 0),{value:e&&e[t++],done:!e}}}};Object.defineProperty(exports,"__esModule",{value:!0});var r,a,o,u=require("cssesc");function i(n,t){if(n.nodeType!==Node.ELEMENT_NODE)throw new Error("Can't generate CSS selector for non-element node type.");if("html"===n.tagName.toLowerCase())return"html";var u={root:document.body,idName:function(e){return!0},className:function(e){return!0},tagName:function(e){return!0},attr:function(e,n){return!1},seedMinLength:1,optimizedMinLength:2,threshold:1e3,maxNumberOfTries:1e4};a=e({},u,t),o=l(a.root,u);var i=c(n,r.All,function(){return c(n,r.Two,function(){return c(n,r.One)})});if(i){var f=_(S(i,n));return f.length>0&&(i=f[0]),s(i)}throw new Error("Selector was not found.")}function l(e,n){return e.nodeType===Node.DOCUMENT_NODE?e:e===n.root?e.ownerDocument:e}function c(e,n,t){for(var o=null,u=[],i=e,l=0,c=function(){var e=E(m(i))||E.apply(void 0,v(i))||E.apply(void 0,d(i))||E(y(i))||[b()],c=g(i);if(n===r.All)c&&(e=e.concat(e.filter(N).map(function(e){return w(e,c)})));else if(n===r.Two)e=e.slice(0,1),c&&(e=e.concat(e.filter(N).map(function(e){return w(e,c)})));else if(n===r.One){var s=(e=e.slice(0,1))[0];c&&N(s)&&(e=[w(s,c)])}for(var h=0,p=e;h<p.length;h++){(s=p[h]).level=l}if(u.push(e),u.length>=a.seedMinLength&&(o=f(u,t)))return"break";i=i.parentElement,l++};i&&i!==a.root.parentElement;){if("break"===c())break}return o||(o=f(u,t)),o}function f(e,n){var t=_(T(e));if(t.length>a.threshold)return n?n():null;for(var r=0,o=t;r<o.length;r++){var u=o[r];if(p(u))return u}return null}function s(e){for(var n=e[0],t=n.name,r=1;r<e.length;r++){var a=e[r].level||0;t=n.level===a-1?e[r].name+" > "+t:e[r].name+" "+t,n=e[r]}return t}function h(e){return e.map(function(e){return e.penalty}).reduce(function(e,n){return e+n},0)}function p(e){switch(o.querySelectorAll(s(e)).length){case 0:throw new Error("Can't select any node with this selector: "+s(e));case 1:return!0;default:return!1}}function m(e){var n=e.getAttribute("id");return n&&a.idName(n)?{name:"#"+u(n,{isIdentifier:!0}),penalty:0}:null}function v(e){return Array.from(e.attributes).filter(function(e){return a.attr(e.name,e.value)}).map(function(e){return{name:"["+u(e.name,{isIdentifier:!0})+'="'+u(e.value)+'"]',penalty:.5}})}function d(e){return Array.from(e.classList).filter(a.className).map(function(e){return{name:"."+u(e,{isIdentifier:!0}),penalty:1}})}function y(e){var n=e.tagName.toLowerCase();return a.tagName(n)?{name:n,penalty:2}:null}function b(){return{name:"*",penalty:3}}function g(e){var n=e.parentNode;if(!n)return null;var t=n.firstChild;if(!t)return null;for(var r=0;t&&(t.nodeType===Node.ELEMENT_NODE&&r++,t!==e);)t=t.nextSibling;return r}function w(e,n){return{name:e.name+":nth-child("+n+")",penalty:e.penalty+1}}function N(e){return"html"!==e.name&&!e.name.startsWith("#")}function E(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var t=e.filter(O);return t.length>0?t:null}function O(e){return null!=e}function T(e,r){var a,o,u;return void 0===r&&(r=[]),n(this,function(n){switch(n.label){case 0:if(!(e.length>0))return[3,5];a=0,o=e[0],n.label=1;case 1:return a<o.length?(u=o[a],[5,t(T(e.slice(1,e.length),r.concat(u)))]):[3,4];case 2:n.sent(),n.label=3;case 3:return a++,[3,1];case 4:return[3,7];case 5:return[4,r];case 6:n.sent(),n.label=7;case 7:return[2]}})}function _(e){return Array.from(e).sort(function(e,n){return h(e)-h(n)})}function S(e,r,o){var u,i,l;return void 0===o&&(o={counter:0,visited:new Map}),n(this,function(n){switch(n.label){case 0:if(!(e.length>2&&e.length>a.optimizedMinLength))return[3,5];u=1,n.label=1;case 1:return u<e.length-1?o.counter>a.maxNumberOfTries?[2]:(o.counter+=1,(i=e.slice()).splice(u,1),l=s(i),o.visited.has(l)?[2]:p(i)&&x(i,r)?[4,i]:[3,4]):[3,5];case 2:return n.sent(),o.visited.set(l,!0),[5,t(S(i,r,o))];case 3:n.sent(),n.label=4;case 4:return u++,[3,1];case 5:return[2]}})}function x(e,n){return o.querySelector(s(e))===n}!function(e){e[e.All=0]="All",e[e.Two=1]="Two",e[e.One=2]="One"}(r||(r={})),exports.default=i;
},{"cssesc":"CveL"}],"MG6V":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=a(require("./util")),t=a(require("./template/offer-selector.template")),s=a(require("@medv/finder")),i=require("lit-html"),n=c(require("loglevel")),o=a(require("./resource-loader"));function r(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return r=function(){return e},e}function c(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=r();if(t&&t.has(e))return t.get(e);var s={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=i?Object.getOwnPropertyDescriptor(e,n):null;o&&(o.get||o.set)?Object.defineProperty(s,n,o):s[n]=e[n]}return s.default=e,t&&t.set(e,s),s}function a(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var s=0;s<t.length;s++){var i=t[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function d(e,t,s){return t&&u(e.prototype,t),s&&u(e,s),e}var f=function(){function r(t){l(this,r);var s={assets:"https://assets.cloudlift.app",selector:"",position:"",selectors:[],excludes:["input","select","button","button *","select *",".cl-offer-selector",".cl-offer-selector *"],sizes:{minWidth:300,minHeight:0},hoverClass:"cl-s-hover",wizardSteps:[],onSave:function(){},onStart:function(){},onStop:function(){},onSelector:function(e,t,s){n.debug("got selection: ",e,t,s)},config:{selector:"",selectorInvalid:!1,selectorCustom:!1,inspector:!1,saved:!1,position:"afterbegin",positions:[{text:"before",value:"beforebegin"},{text:"at start",value:"afterbegin"},{text:"at end",value:"beforeend"},{text:"after",value:"afterend"}]}};this.settings=e.default.extend(s,t||{}),this._setup()}return d(r,[{key:"show",value:function(){document.body.appendChild(this._containerEl),this._isWizardAutoStart()&&this.startWizard()}},{key:"hide",value:function(){this._containerEl&&this._containerEl.parentNode.removeChild(this._containerEl)}},{key:"render",value:function(){var s=this;this.settings.config.saved=this._isSaved(),this.settings.config.selectorCustom=this._isSelectorCustom(),(0,i.render)((0,t.default)(this.settings.config,{startWizard:function(){return s.startWizard()},start:function(){return s.start()},stop:function(){return s.stop()},save:function(){s.settings.selector=s.settings.config.selector,s.settings.position=s.settings.config.position,s.settings.onSave()},close:function(){s._isSaved()?s.hide():confirm("location not saved, close anyway ?")&&s.hide()},selectorChanged:e.default.debounced(1e3,function(e){e.target.value&&s._selectSelector(e.target.value)}),selectorSelected:function(e){s._selectSelector(e.target.value)},positionChanged:function(e){s.settings.config.position=e.target.value,s.render(),s.settings.config.selector&&s.settings.onSelector(s.last,s.settings.config.selector,s.settings.config.position)}}),this._containerEl)}},{key:"startWizard",value:function(){var e=this;this._initWizard().then(function(){e._driver.defineSteps(e.settings.wizardSteps),e._driver.start()})}},{key:"destroy",value:function(){this.hide(),delete this._containerEl}},{key:"updateSelectors",value:function(e){e&&(this.settings.selectors=e,this.settings.config.selectors=this._filterValidSelectors(this.settings.selectors))}},{key:"updateSelector",value:function(e,t){this.settings.selector=e,this.settings.position=t,this.settings.selector?(this.settings.position&&(this.settings.config.position=this.settings.position),this._selectSelector(this.settings.selector)):this.settings.config.selectors.length>0&&this._selectSelector(this.settings.config.selectors[0])}},{key:"updateWizardSteps",value:function(e){this.settings.wizardSteps=e}},{key:"start",value:function(){document.addEventListener("mouseover",this.onInspectorMouseOver,!0),document.addEventListener("mouseout",this.onInspectorMouseOut,!0),document.addEventListener("click",this.onInspectorClick,!0),this.settings.config.inspector=!0,this.render(),this.settings.onStart()}},{key:"stop",value:function(){document.removeEventListener("mouseover",this.onInspectorMouseOver,!0),document.removeEventListener("mouseout",this.onInspectorMouseOut,!0),document.removeEventListener("click",this.onInspectorClick,!0),this.last.classList.remove(this.settings.hoverClass),this.settings.config.inspector=!1,this.render(),this.settings.onStop()}},{key:"_selectSelector",value:function(e){var t;null!=(t="$"==e[0]?document.body:document.querySelector(e))?(this.settings.config.selectorInvalid=!1,this.settings.config.selector=e,this.render(),this.settings.onSelector(t,this.settings.config.selector,this.settings.config.position)):(this.settings.config.selectorInvalid=!0,this.render())}},{key:"_filterValidSelectors",value:function(e){for(var t=[],s=0;s<e.length;s++){var i=e[s];("$"==i[0]||document.querySelector(i))&&t.push(i)}return t}},{key:"_isSelectorCustom",value:function(){return!!this.settings.config.selector&&-1===this.settings.selectors.indexOf(this.settings.config.selector)}},{key:"_isSaved",value:function(){return this._isSelectorSaved()&&this._isPositionSaved()}},{key:"_isSelectorSaved",value:function(){return!this.settings.config.selector||this.settings.selector===this.settings.config.selector}},{key:"_isPositionSaved",value:function(){return!this.settings.config.position||this.settings.position===this.settings.config.position}},{key:"_isWizardAutoStart",value:function(){return"0"!==e.default.readCookie("cl-s-wizard")}},{key:"_setWizardAutoStart",value:function(t){t?e.default.removeCookie("cl-s-wizard"):e.default.writeCookie("cl-s-wizard","0")}},{key:"_initWizard",value:function(){var e=this;return this._loadWizardLib().then(function(){e._driver?e._driver.reset():e._driver=new Driver({onReset:function(){e._setWizardAutoStart(!1)},doneBtnText:"Done",closeBtnText:"Close",nextBtnText:"Next",prevBtnText:"Previous",className:"cl-offer-wizard",allowClose:!1,animate:!1})})}},{key:"_loadWizardLib",value:function(){return o.default.loadOnce([this.settings.assets+"/static/lib/driverjs/driver.min.js",this.settings.assets+"/static/lib/driverjs/driver.min.css"],"driverjs",{async:!1}).then(function(){n.info("driverjs resources loaded")}).catch(function(e){n.error("failed to load resources: ",e)})}},{key:"_setup",value:function(){var t=this;window.onbeforeunload=function(){if(!t._isSaved())return"Location not saved, continue toto exit?"},this._containerEl=document.createElement("span"),this.settings.config.selectors=this._filterValidSelectors(this.settings.selectors),this.onInspectorMouseOver=function(s){for(var i=s.target,o=0;o<t.settings.excludes.length;o++){var r=t.settings.excludes[o];if(e.default.matches(i,r))return void n.debug("element matches excluded selector",r,i)}t.settings.sizes.minWidth>0&&i.offsetWidth<t.settings.sizes.minWidth?n.trace("element width is smaller than minWidth",i.offsetWidth,t.settings.sizes.minWidth):t.settings.sizes.minHeight>0&&i.offsetHeight<t.settings.sizes.minHeight?n.trace("element width is smaller than minWidth",i.offsetHeight,t.settings.sizes.minHeight):(i.classList.add(t.settings.hoverClass),t.last=i)},this.onInspectorMouseOut=function(e){e.target.classList.remove(t.settings.hoverClass)},this.onInspectorClick=function(e){if(e.preventDefault(),e.stopImmediatePropagation(),t.last){t.last.classList.remove(t.settings.hoverClass);var i=(0,s.default)(t.last);n.debug("cl-offer-selector selected selector: ",i,t.last),t._selectSelector(i)}t.stop()}}}]),r}(),h=f;exports.default=h;
},{"./util":"zY0S","./template/offer-selector.template":"WXoQ","@medv/finder":"d52b","lit-html":"KMqM","loglevel":"ohSP","./resource-loader":"U86w"}],"PnKN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=h(require("./util")),t=h(require("./shopify-store")),r=h(require("./shopify-cart")),i=h(require("./ajax-watch")),o=h(require("./offer-api")),a=h(require("./offer")),n=h(require("./offer-state")),s=h(require("./offer-discount")),c=h(require("./offer-selector")),f=require("./const.js"),u=p(require("loglevel")),l=require("./const");function d(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return d=function(){return e},e}function p(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=d();if(t&&t.has(e))return t.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,t&&t.set(e,r),r}function h(e){return e&&e.__esModule?e:{default:e}}function v(e){return _(e)||m(e)||y(e)||g()}function g(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function y(e,t){if(e){if("string"==typeof e)return O(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?O(e,t):void 0}}function m(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _(e){if(Array.isArray(e))return O(e)}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function S(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function C(e,t,r){return t&&w(e.prototype,t),r&&w(e,r),e}var k=function(){function d(i){S(this,d),this.config=i,this.offers=[],this.api=o.default.getInstance({api:i.api,queryParams:{shop:this.config.shop}});var a=this.config.setup?"":this.config.url.replace("http:","https:");for(var n in this.shopifyStore=t.default.getInstance({api:a}),this.shopifyCart=r.default.getInstance({api:a}),i.currencyFormats)i.currencyFormats.hasOwnProperty(n)&&-1!==i.currencyFormats[n].indexOf("&")&&(i.currencyFormats[n]=e.default.decodeHtml(i.currencyFormats[n]));this.config.discount.moneyFormat=i.currencyFormats?i.currencyFormats.moneyWithCurrencyFormat:void 0,this.config.discount.cart=this.config.cart.ajax,this.offerDiscount=s.default.getInstance(this.config.discount),this.offerCache={},this.config.setup&&this.setup()}return C(d,[{key:"setup",value:function(){var e=this;this._checkOfferClear(),this._checkOfferCartClear(),this._checkOfferCartOpen(),this._checkLocationStorage()||(this._checkOfferPreview()?this._checkOfferCartOpen(!0):this._checkOfferSelector()?this._checkOfferCartOpen(!0):(this.shopifyStore.isOrderStatus()&&this._checkOfferOrder(),this.destroy(),this.triggers=this._filterTriggers(),this.triggers.sort(function(e,t){return t.priority-e.priority}),this._evaluateTriggers().then(function(t){if(t.cart){i.default.register(function(t){t.method&&"POST"===t.method.toString().toUpperCase()&&(/.*cart\.js.*/.test(t.url)||/.*cart\/.*\.js/.test(t.url))&&e._evaluateTriggers()});if(e.config.cart&&e.config.cart.selectorOpen){var r=document.querySelector(e.config.cart.selectorOpen);null!=r&&r.addEventListener("click",function(){setTimeout(function(){return e._evaluateTriggers()},500)})}}if(t.product&&t.product.variant_id){var o=e.shopifyStore.findProductFormBestMatch(t.product.id);o.addEventListener("change",function(r){e.shopifyStore.findProductFormVariantId(o)!=t.product.variant_id&&e._evaluateTriggers()})}})))}},{key:"destroy",value:function(){for(;this.offers.length;){this.offers.pop().destroy()}}},{key:"_evaluateTriggers",value:function(){for(var e=this,t=[],r=0;r<this.triggers.length;r++)for(var i=this.triggers[r],o=0;o<i.conditions.length;o++)for(var a=i.conditions[o],s=0;s<a.length;s++){var c=a[s];c.data&&-1===t.indexOf(c.data)&&t.push(c.data)}var f=this._buildUsedOfferTriggers();f.length>0&&-1===t.indexOf("cart")&&t.push("cart"),-1!==t.indexOf("cart_product")&&-1===t.indexOf("cart")&&t.push("cart");for(var l={},d=[],p=0;p<t.length;p++){switch(t[p]){case"cart":this.shopifyStore.isOrderStatus()?function(){var e={total_price:0,item_count:0,items:[]};if(Shopify.checkout){var t=parseFloat(Shopify.checkout.total_price);isNaN(t)&&(t=0),e.total_price=100*t,e.items=Shopify.checkout.line_items.map(function(t){return e.item_count+=t.quantity,{quantity:t.quantity,product_id:t.product_id,variant_id:t.variant_id}})}l.cart=e}():d.push(new Promise(function(t,r){e.shopifyCart.getCart().then(function(e){l.cart=e,t()}).catch(function(){return t()})}));break;case"cart_product":0!==this.config.level&&4!==this.config.level?u.error("offer-templates: cart product conditions are only available on the pro plan"):void 0===window.clCartProduct?u.error("offer-templates: no cartProduct object defined for cart product conditions"):l.cart_product=window.clCartProduct;break;case"product":this.shopifyStore.isProduct()&&d.push(new Promise(function(t,r){e.shopifyStore.getProduct().then(function(r){l.product=r;var i=e.shopifyStore.findProductFormBestMatch(r.id);l.product.variant_id=e.shopifyStore.findProductFormVariantId(i),t()}).catch(function(){return t()})}));break;case"user":break;case"customer":0!==this.config.level&&4!==this.config.level?u.error("offer-templates: customer conditions are only available on the pro plan"):void 0===window.clCustomer?u.error("offer-templates: no customer object defined for customer conditions"):l.customer=window.clCustomer}}return Promise.all(d).then(function(){for(var t=[],r=function(r){var i=f[r],o=i.uuid,a=n.default.getState(o),s=e._evaluateConditions(i.conditions,l);u.debug("used offer "+o+" conditions valid:",s),s?a.valid||(a.valid=!0,n.default.storeState(o,a),u.debug("invalid offer "+o+" is valid again:",a),t.push(e.api.useOffer(o,{uuid:o,items:a.items}).then(function(t){t.discount&&e.offerDiscount.addDiscount(o,t.discount,!1)}))):(a.valid&&(a.valid=!1,n.default.storeState(o,a),u.debug("valid offer "+o+" is invalid:",a),t.push(e._invalidateOffer(o,a))),f.splice(r,1))},i=f.length-1;i>=0;i--)r(i);Promise.all(t).then(function(){l.cart&&e.offerDiscount.updateCartDiscounts(f,l.cart)});for(var o=Promise.resolve(),a=function(t){o=o.then(function(){var r=e.triggers[t],i=e._evaluateConditions(r.conditions,l);return u.debug("trigger "+r.uuid+" conditions active:",i),i?e._activateOffer(r.uuid):e._deActivateOffer(r.uuid)})},s=0;s<e.triggers.length;s++)a(s);return l})}},{key:"_invalidateOffer",value:function(e,t){var r=this;return this.api.invalidateOffer(e,{uuid:e,items:t.items,discount:t.discount}).then(function(i){t.used=!1,n.default.storeState(e,t),t.remove&&t.items.length>0&&r.shopifyCart.getCart(!0).then(function(e){for(var i={},o=!1,a=0;a<e.items.length;a++)for(var n=e.items[a],s=0;s<t.items.length;s++){var c=t.items[s];c.id.toString()===n.variant_id.toString()&&(i[n.variant_id]=n.quantity-c.quantity,o=!0)}if(o)return r.shopifyCart.updateItemQuantitiesById(i).then(function(){(r.shopifyStore.isCart()||r.config.cart.ajax)&&window.location.reload()})})})}},{key:"_activateOffer",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=n.default.getState(e);if(!r){if(i.used&&i.valid&&!i.reshow&&!i.auto)return Promise.resolve(!1);if(i.dismissed){var o=!1;if(null!=i.dreset)(new Date).getTime()-i.dreset>0&&(o=!0);if(!o)return Promise.resolve(!1);i.dismissed=!1,delete i.dreset,delete i.closed,n.default.storeState(e,i)}}return this._getOrFetchOffer(e).then(function(i){for(var o in t.offers)if(o!==e&&t.offers.hasOwnProperty(o)){var n=t.offers[o].offer;if(i.displayType===f.DisplayType.MODAL&&n.displayType===f.DisplayType.MODAL)return u.debug("---\x3e skipping active modal offer - only one active modal supported: ",i),!1;if(i.displayType===f.DisplayType.CONTENT&&n.displayType===f.DisplayType.CONTENT&&i.config.selector&&i.config.selector===n.config.selector&&i.config.display_content&&n.config.display_content&&i.config.display_content.position===n.config.display_content.position&&"$"!==i.config.selector[0])return u.debug("---\x3e skipping active content offer - multiple active offers require different selector: ",i),!1}return t.offers.hasOwnProperty(e)||(i.config.branding=t.config.branding,t.offers[e]=new a.default(i,{api:t.config.api,assets:t.config.assets,cart:t.config.cart,currencyFormats:t.config.currencyFormats,config:i.config,preview:r})),t.offers[e].setActive(!0),!0})}},{key:"_deActivateOffer",value:function(e){return this.offers.hasOwnProperty(e)&&this.offers[e].setActive(!1),Promise.resolve()}},{key:"_destroyOffer",value:function(e){this.offers.hasOwnProperty(e)&&(this.offers[e].destroy(),delete this.offers[e])}},{key:"_getOrFetchOffer",value:function(e){var t=this.offerCache[e];return t?Promise.resolve(t):this.api.fetchOffer(e)}},{key:"_filterTriggers",value:function(){var e=this;return this.config.triggers.filter(function(t){switch(t.trigger){case f.Trigger.PRODUCT:if(e.shopifyStore.isProduct())return!0;break;case f.Trigger.CART:if(e.shopifyStore.isCart())return!0;if(e.config.cart&&e.config.cart.ajax||e.shopifyStore.hasCart())return!0;break;case f.Trigger.ORDER_STATUS:if(e.shopifyStore.isOrderStatus())return!0}return!1})}},{key:"_buildUsedOfferTriggers",value:function(){for(var e=[],t=0;t<this.config.triggers.length;t++){var r=this.config.triggers[t];if(r.trigger!==f.Trigger.ORDER_STATUS){var i=n.default.getState(r.uuid);if(i&&(i.used||i.reuse)){var o={uuid:r.uuid,trigger:r.trigger,conditions:[]},a=this.offerDiscount.getOfferDiscount(o.uuid);if(null!=a&&a.products&&a.products.length>0)for(var s=0;s<a.products.length;s++){var c=a.products[s],u={data:"cart",field:"items",operator:">=",value:c.quantity.toString(),products:[c]};o.conditions.push([u])}if(i.items&&i.items.length>0){var l;if(i.bundle)for(var d=0;d<i.items.length;d++){var p=i.items[d],h={data:"cart",field:"items",operator:">=",value:p.quantity.toString(),products:[{id:"0",type:"product",variants:[p.id.toString()]}]};o.conditions.push([h])}else{var g={data:"cart",field:"items",operator:">=",value:"1",products:[]};i.quantity&&(g.value=i.quantity.toString());for(var y=0;y<i.items.length;y++){var m=i.items[y];g.products.push({id:"0",type:"product",variants:[m.id.toString()]})}o.conditions.push([g])}var _=r.conditions.filter(function(e){return e.filter(function(e){return!0===e.validate}).length>0});(l=o.conditions).push.apply(l,v(_))}e.push(o)}}}return e}},{key:"_evaluateConditions",value:function(e,t){for(var r=!0,i=0;i<e.length;i++){for(var o=e[i],a=!1,n=0;n<o.length;n++){var s=o[n];if("product"===s.data?a=this._evaluateProductCondition(s,t[s.data]):"cart"===s.data?a=this._evaluateCartCondition(s,t[s.data]):"cart_product"===s.data?a=this._evaluateCartProductCondition(s,t[s.data],t.cart):"customer"===s.data&&(a=this._evaluateCustomerCondition(s,t[s.data])),u.debug("evaluated condition: ",s,a),a)break}if(u.debug("condition group "+i+" :",a),!a){r=!1;break}}return r}},{key:"_evaluateProductCondition",value:function(e,t){switch(e.field){case"product":if(e.products){for(var r=0;r<e.products.length;r++){var i=e.products[r];if(i.id.toString()===t.id.toString()){if(!(t.variant_id&&i.variants&&i.variants.length>0))return!0;if(-1!==i.variants.indexOf(t.variant_id.toString()))return!0}}if(0===e.products.length&&null!=e.value&&"0"===e.value.toString())return!0}break;case"product_handle":if(this._evaluateOperation(e.operator,e.value,t.handle))return!0;break;case"product_title":if(this._evaluateOperation(e.operator,e.value,t.title))return!0;break;case"product_type":if(t.type&&this._evaluateOperation(e.operator,e.value,t.type))return!0;if(t.product_type&&this._evaluateOperation(e.operator,e.value,t.product_type))return!0;break;case"product_vendor":if(this._evaluateOperation(e.operator,e.value,t.vendor))return!0;break;case"product_tags":var o;o=Array.isArray(t.tags)?t.tags:t.tags.indexOf(", ")>=0?t.tags.split(", "):[t.tags];for(var a=0;a<e.tags.length;a++)for(var n=0;n<o.length;n++)if(e.tags[a].toString().toLowerCase().trim()===o[n].toString().toLowerCase().trim())return!0;break;case"product_collections":if(e.collections&&t.collections)for(var s=0;s<e.collections.length;s++)for(var c=e.collections[s],f=0;f<t.collections.length;f++){var u=t.collections[f];if(c.id.toString()===u.id.toString())return!0}}return!1}},{key:"_evaluateCartCondition",value:function(e,t){switch(e.field){case"items":if(e.products){var r=t.items;r=t.items.filter(function(t){for(var r=0;r<e.products.length;r++){var i=e.products[r];if(i.id.toString()===t.product_id.toString()||"0"===i.id.toString())if(i.variants&&i.variants.length>0){if(-1!==i.variants.indexOf(t.variant_id.toString()))return!0}else if("0"!==i.id.toString())return!0}return!1});for(var i=0,o=0;o<r.length;o++){i+=r[o].quantity}if(this._evaluateOperation(e.operator,e.value,i))return!0}else if(this._evaluateOperation(e.operator,e.value,t.item_count))return!0;break;case"total":var a=t.total_price,n=100*parseFloat(e.value);if(this._evaluateOperation(e.operator,n,a))return!0}return!1}},{key:"_evaluateCartProductCondition",value:function(e,t,r){var i=this;void 0===e.value&&(e.value=1),void 0===e.operator&&(e.operator=">=");for(var o=r.items.filter(function(r){if(t.hasOwnProperty(r.key)){var o=t[r.key];if(i._evaluateProductCondition(e,o))return!0}return!1}),a=0,n=0;n<o.length;n++){a+=o[n].quantity}return!!this._evaluateOperation(e.operator,e.value,a)}},{key:"_evaluateCustomerCondition",value:function(e,t){if(!t||!t.id)return!1;switch(e.field){case"customer_tags":if(t.tags)for(var r=0;r<e.tags.length;r++)for(var i=0;i<t.tags.length;i++)if(e.tags[r].toString().toLowerCase().trim()===t.tags[i].toString().toLowerCase().trim())return!0;break;case"customer_name":if(this._evaluateOperation(e.operator,e.value,t.name))return!0;break;case"customer_email":if(this._evaluateOperation(e.operator,e.value,t.email))return!0;break;case"customer_country":if(e.value&&2===e.value.length){if(this._evaluateOperation(e.operator,e.value,t.country_code))return!0}else if(this._evaluateOperation(e.operator,e.value,t.country))return!0}return!1}},{key:"_evaluateOperation",value:function(e,t,r){if(void 0!==r){switch(e){case"equals":return r.toString().toLowerCase().trim()===t.toString().toLowerCase().trim();case"contains":return r.toString().toLowerCase().trim().indexOf(t.toString().toLowerCase().trim())>-1;case"=":return parseFloat(r)===parseFloat(t);case"!=":return parseFloat(r)!==parseFloat(t);case">":return parseFloat(r)>parseFloat(t);case">=":return parseFloat(r)>=parseFloat(t);case"<":return parseFloat(r)<parseFloat(t);case"<=":return parseFloat(r)<=parseFloat(t)}return!1}}},{key:"_checkLocationStorage",value:function(){if(window.localStorage){var e=localStorage.getItem(d.locationStorageKey);if(e)return localStorage.removeItem(d.locationStorageKey),window.location=e,!0}return!1}},{key:"_checkOfferPreview",value:function(){var t=this,r=e.default.getQueryParam(window.location.href,"clOfferPreview");return!(!r||!window.opener)&&(window.addEventListener("message",function(e){if(console.trace("got message",e.data),"clOfferPreview"===e.data.action){var r=e.data.offer;if(r){var i=r.uuid;t._destroyOffer(i),t.offerCache[i]=r,t._activateOffer(i,!0),r.displayType===f.DisplayType.CONTENT&&r.config.selector&&t.shopifyStore.isCart()&&t.shopifyCart.getCart().then(function(e){0===e.item_count&&confirm("Empty cart found - to preview your offer please visit your store and manually add a product to your cart.")&&(window.open("https://"+t.config.shop,"_blank"),window.close())})}}}),window.opener.postMessage({action:"clOfferPreview",uuid:r},"*"),!0)}},{key:"_checkOfferSelector",value:function(){var t,r,i=this,o=e.default.getQueryParam(window.location.href,"clOfferSelector");return!(!o||!window.opener)&&(this.offerSelector=new c.default({assets:this.config.assets,onSave:function(){window.opener.postMessage({action:"clOfferSelector",uuid:r,selector:t.config.selector,position:t.config.display_content.position},"*"),window.close()},onStart:function(){t&&i._destroyOffer(r)},onSelector:function(e,o,a){t&&(i._destroyOffer(r),t.config.selector=o,t.config.display_content=t.config.display_content||{},t.config.display_content.position=a,i.offerCache[r]=t,i._activateOffer(r,!0))}}),this.offerSelector.render(),window.addEventListener("message",function(e){"clOfferPreview"===e.data.action&&(t=e.data.offer,r=t.uuid,e.data.selectors&&(i.shopifyStore.isOrderStatus()&&e.data.selectors.splice(0,0,"$content_box"),i.offerSelector.updateSelectors(e.data.selectors)),e.data.wizardSteps&&i.offerSelector.updateWizardSteps(e.data.wizardSteps),t.config.selector?i.offerSelector.updateSelector(t.config.selector,t.config.display_content?t.config.display_content.position:"afterbegin"):i.offerSelector.updateSelector("",""),i.offerSelector.show())}),window.opener.postMessage({action:"clOfferPreview",uuid:o},"*"),(this.shopifyStore.isCart()||this.config.cart.ajax)&&this.shopifyCart.getCart().then(function(e){0===e.item_count&&confirm("Empty cart found - to select a location for your offer please visit your store and manually add a product to your cart.")&&(window.open("https://"+i.config.shop,"_blank"),window.close())}),!0)}},{key:"_checkOfferClear",value:function(){e.default.hasQueryParam(window.location.href,d.ParamOfferClear)&&(n.default.clearAllStates(),this.offerDiscount.clearState())}},{key:"_checkOfferCartOpen",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.config.cart&&this.config.cart.selectorOpen){var r=e.default.hasQueryParam(window.location.href,d.ParamOfferCartOpen);if(t||r){var i=document.querySelector(this.config.cart.selectorOpen);null!=i&&i.click()}}}},{key:"_checkOfferCartClear",value:function(){e.default.hasQueryParam(window.location.href,d.ParamOfferCartClear)&&this.shopifyCart.clear()}},{key:"_checkOfferOrder",value:function(){if(Shopify.checkout&&Shopify.checkout.order_id){var e=n.default.parseAllStates();for(var t in e)if(e.hasOwnProperty(t)){var r=e[t];r.valid&&r.used&&(this.api.offerEvent(t,l.OfferEventType.ORDER,{orderId:Shopify.checkout.order_id,items:r.items,replaced:r.replaced}),n.default.clearState(t))}this.offerDiscount.clearState()}}}]),d}();k.locationStorageKey="cl-location",k.ParamOfferClear="clOfferClear",k.ParamOfferCartOpen="clOfferCartOpen",k.ParamOfferCartClear="clOfferCartClear";var b=k;exports.default=b;
},{"./util":"zY0S","./shopify-store":"cEki","./shopify-cart":"ydp9","./ajax-watch":"XoAR","./offer-api":"FkkJ","./offer":"DFet","./offer-state":"jVXE","./offer-discount":"y1JY","./offer-selector":"MG6V","./const.js":"QqYi","loglevel":"ohSP","./const":"QqYi"}],"Mv9D":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.initTemplatePolyfill=void 0;var e=require("../lib/dom.js"),t=function(){if(arguments.length>0&&void 0!==arguments[0]&&arguments[0]||!("content"in document.createElement("template"))){var t=document.implementation.createHTMLDocument("template"),n=t.body,i={enumerable:!0,configurable:!0},r=Document.prototype.createElement;Document.prototype.createElement=function(o,c){var a,l,s=r.call(this,o,c);return"TEMPLATE"===s.tagName&&(a=s,l=t.createDocumentFragment(),Object.defineProperties(a,{content:Object.assign(Object.assign({},i),{get:function(){return l}}),innerHTML:Object.assign(Object.assign({},i),{set:function(t){n.innerHTML=t,(0,e.removeNodes)(l,l.firstChild),(0,e.reparentNodes)(l,n.firstChild)}})})),s}}};exports.initTemplatePolyfill=t;
},{"../lib/dom.js":"JQ4u"}],"Focm":[function(require,module,exports) {
"use strict";var e=u(require("./scripts/translate")),t=u(require("./scripts/offer-app")),r=u(require("./scripts/offer")),o=require("lit-html/polyfills/template_polyfill"),i=f(require("loglevel")),n=u(require("loadjs"));function l(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return l=function(){return e},e}function f(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=l();if(t&&t.has(e))return t.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var n=o?Object.getOwnPropertyDescriptor(e,i):null;n&&(n.get||n.set)?Object.defineProperty(r,i,n):r[i]=e[i]}return r.default=e,t&&t.set(e,r),r}function u(e){return e&&e.__esModule?e:{default:e}}var a=function(){return!("Promise"in window&&"assign"in Object&&String.prototype.startsWith&&Array.prototype.flat)},s=function(){(0,o.initTemplatePolyfill)();var n=window.Cloudlift.offer.config;i.setDefaultLevel(i.levels.ERROR);var l=i.getLevel();i.setLevel(void 0!==n.log?n.log:l),i.debug("got config",n),window.addEventListener("cloudlift.offer.ready",function(e){i.debug("resources loaded")}),e.default.translations=n.i18n,window.Cloudlift.offer.App=new t.default(n),window.Cloudlift.offer.lib={Offer:r.default}};a()?(0,n.default)(window.Cloudlift.offer.config.assets+"/static/lib/core-js/core-js.min.js",s):s();
},{"./scripts/translate":"IkY8","./scripts/offer-app":"PnKN","./scripts/offer":"DFet","lit-html/polyfills/template_polyfill":"Mv9D","loglevel":"ohSP","loadjs":"xAgl"}]},{},["Focm"], null)